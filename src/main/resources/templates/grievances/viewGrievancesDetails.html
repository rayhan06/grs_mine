<!DOCTYPE html xmlns:th="http://www.thymeleaf.org" >
<html xmlns:th="http://www.thymeleaf.org">
<div th:fragment="viewGrievancesDetailsIncludeStyle" th:remove="tag">
    <div th:replace="fileUpload :: fileUploadIncludeStyle"> </div>
    <link href="/assets/global/plugins/bootstrap-summernote/summernote.css" rel="stylesheet" type="text/css" />
    <link href="/assets/pages/css/search.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/icheck/skins/all.css" rel="stylesheet" type="text/css" />
    <link href="/assets/pages/css/invoice.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/jstree/dist/themes/default/style.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/bootstrap-select/css/bootstrap-select.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/select2/css/select2-bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/datatables/datatables.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/css/star-rating.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/css/custom-carousel.css" rel="stylesheet" type="text/css" th:unless="${#lists.isEmpty(feedbacks)}"/>
    <link href="assets/global/plugins/easy-autocomplete/easy-autocomplete.css" rel="stylesheet" type="text/css"/>
</div>
<div class="page-content" th:fragment="viewGrievancesDetails">
    <div class="row">
        <div class="col-md-12">
            <!-- BEGIN Portlet PORTLET-->
            <div th:class="${!isMobileLogin ? 'portlet light' : ''}">
                <div class="portlet-title" th:if="${!(isMobileLogin && grsUser)}">
                    <div th:if="${!isMobileLogin}" style="text-align: center;font-size: x-large;line-height: 18px;color: #683091;">
                        <span class="modulename modulename-hide-on-mobile caption-subject bold uppercase" th:text="#{detailed.grievance}">  </span>
                    </div>
                    <div class="actions">
                        <a th:if="${!isMobileLogin}" class="btn btn-circle btn-icon-only btn-default fullscreen hide-on-mobile" href="javascript:;" data-original-title="" title=""> </a>
                    </div>
                </div>
                <div class="portlet-body">
                    <div class="row">
                        <div class="col-md-9" th:if="${grsUser==false}">
                            <div class="tabbable-line">
                                <ul class="nav nav-tabs">

                                    <li class="" th:if="${grsUser==false}" class="active">
                                        <a href="#complaintDetails" data-toggle="tab">
                                            <i class="icon-notebook" ></i>
                                            <span th:text="#{description}"></span>
                                        </a>
                                    </li>
                                    <li th:if="${grsUser==false}" >
                                        <a href="#complaintMovementHistory" data-toggle="tab" onclick="getComplaintMovement();"><i class="icon-clock"></i> <span th:text="#{history}"></span></a>
                                    </li>
                                    <div class="actions pull-right" style="padding-right: 20px;">
                                        <div class="row">
                                            <a th:if="${!isMobileLogin}" href="javascript:;" id="btnBack" onclick="javascript:goPreviousPage();" class="btn btn-danger btn-lg"><i class="icon-action-undo"></i> <span class="tabname tabname-hide-on-mobile" th:text="#{go.back.to.list}"></span></a>
                                            <a th:if="${grsUser && isFeedbackEnabled}" class="btn btn-primary btn-lg" data-toggle="modal" id="feedbackButtonId" href="#modalFeedback"><span th:text="#{rate.us}"></span></a>
                                            <!--<div class="btn btn-group hidden" id="reviveComplaint">
                                                <button class="btn btn-circle btn-primary btn-sm" th:classappend="${reviveFlag==false}? hide : '' " th:disabled="${!reviveFlag}" type="button" onclick="reviveComplaint()"><i class="icon-energy"></i> অভিযোগ পুনরুদ্ধার</button>
                                            </div>-->
                                            <div class="btn-group hidden" id="appealButton">
                                                <button class="btn btn-primary btn-lg" th:classappend="${isBlacklisted==true}? hide : '' " th:disabled="${isBlacklisted}" type="button" onclick="appealOption()"><i class="icon-energy"></i> আপিল করুন</button>
                                            </div>
                                            <div class="btn-group" id="retakeButton" th:if="${canRetakeComplaint}">
                                                <button class="btn btn-primary btn-lg" type="button" onclick="retakeComplaint()"><i class="icon-energy"></i>অভিযোগ পুনরুদ্ধার</button>
                                            </div>
                                            <div class="btn btn-group hidden" id="actionButton" th:classappend="${isMobileLogin ? 'pull-right' : ''}">
                                                <button class="btn btn-primary btn-lg dropdown-toggle" type="button" data-toggle="dropdown"><i class="icon-energy" ></i > <span th:text="#{take.action}"></span>
                                                    <i class="fa fa-angle-down"></i>
                                                </button>
                                                <ul class="dropdown-menu pull-right" role="menu" id="actionButtonMenus"></ul>
                                            </div>

                                        </div>
                                    </div>
                                </ul>

                                <div class="tab-content">
                                    <div class="tab-pane active" th:if="${grsUser==false}"  id="complaintDetails">
                                        <div class="blog-page blog-content-2">
                                            <div class="blog-single-content bordered blog-container" style="max-height: 400px;overflow: auto;border: 1px solid #7030A0;">
                                                <div class="blog-single-desc" id="printableArea">
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <span th:text="#{to}"></span><br />
                                                            <span th:text="#{gro}"></span><br />
                                                            <span id="officeName"></span><br />
                                                            <br />
                                                        </div>
                                                        <div class="col-md-offset-2 col-md-3">
                                                            <span th:text="#{grievance.date.colon}"></span> <span id="dateCreated"></span><br />
                                                            <span th:text="#{track.colon}"></span> <span class="trackingNumber"></span><br />
                                                            <span th:text="#{status.colon}"></span> <span id="status"></span> <br />
                                                        </div>
                                                        <div class="col-md-1 hide-on-mobile">
                                                            <a class="btn btn-circle btn-icon-only btn-default btn-print pull-right" id="printGrievanceDetails" data-toggle="tooltip" th:title="#{print}">
                                                                <i class="fa fa-print"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <b><span th:text="#{subject.colon}"></span> <span id="title"></span></b> <br />
                                                            <br />
                                                            <span th:text="#{mr.ms}"></span>
                                                            <br />
                                                            <span id="description"></span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <br />
                                                            <span th:text="#{yours.faithfully}"></span><br /><br />
                                                            <span id="name"></span> <br />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-9">

                                                </div>
                                                <div class="col-lg-3">


                                                </div>
                                            </div>
                                            <div class="mt-list-container list-simple complaint-file">
                                                <label th:text="#{attachments}"></label>
                                                <table id="complaintAttachFile" class="table table-striped">
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" th:if="${grsUser==false}"  id="complaintMovementHistory" style="max-height: -webkit-fill-available;overflow: auto;">
                                        <div class="portlet-body">
                                            <div class="blog-single-content bordered blog-container" id="printable-area">
                                                <div class="timeline col-md-11" id="grievanceHistory"></div>
                                                <div th:if="${!isMobileLogin}" class="col-md-1">
                                                    <a class="btn btn-circle btn-icon-only btn-default btn-print pull-right" id="printGrievanceHistory" data-toggle="tooltip" th:title="#{print}">
                                                        <i class="fa fa-print"></i>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3" th:if="${grsUser==false}">
                            <div class="blog-page blog-content-2">
                                <div class="blog-single-sidebar blog-container">
                                    <div class="blog-single-sidebar-recent">
                                        <div class="panel-group">
                                            <div class="panel panel-default">
                                                <div class="panel-heading" style="background-color: #00ace2;color: white;">
                                                    <h4 class="panel-title">
                                                        <a class="accordion-toggle accordion-toggle-styled" data-toggle="collapse" href="#collapse_3_5" th:text="#{service.info}">  </a>
                                                    </h4>
                                                </div>
                                                <div id="collapse_3_5" class="panel-collapse in">
                                                    <div class="panel-body">
                                                        <div class="row">
                                                            <div class="col-md-12 col-sm-12">
                                                                <div class="form-group">
                                                                    <label class="control-label"> <span th:text="#{service.name.colon}"></span></label>
                                                                    <span id="serviceName"></span>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 col-sm-12">
                                                                <div class="form-group">
                                                                    <label class="control-label"><span th:text="#{service.date.colon}"></span></label>
                                                                    <span id="serviceDate"></span>
                                                                </div>
                                                            </div>
                                                            <th:block th:if="${!serviceIsNull}">
                                                                <div class="col-md-12 col-sm-12">
                                                                    <div class="form-group">
                                                                        <label class="control-label"><span th:text="#{office.unit.name}"></span>: </label>
                                                                        <span id="officeUnitName"></span>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-12 col-sm-12">
                                                                    <div class="form-group">
                                                                        <label class="control-label"><span th:text="#{service.officer.designation}"></span>: </label>
                                                                        <span id="serviceOfficerDesignation"></span>
                                                                    </div>
                                                                </div>
                                                            </th:block>
                                                            <div class="col-md-12 col-sm-12">
                                                                <div class="form-group">
                                                                    <label class="control-label"><span th:text="#{track.num}"></span>: </label>
                                                                    <span class="trackingNumber"></span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div th:if="${!serviceIsNull}" class="panel-footer">
                                                        <a  id="viewServiceDetails">
                                                            <span>সেবার বিস্তারিত দেখুন</span>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default">
                                                <div class="panel-heading" style="background-color: #5653ba;color: white;">
                                                    <h4 class="panel-title">
                                                        <a class="accordion-toggle accordion-toggle-styled" data-toggle="collapse" href="#collapse_3_1" th:text="#{complainant.info}">  </a>
                                                    </h4>
                                                </div>
                                                <div id="collapse_3_1" class="panel-collapse in">
                                                    <div class="panel-body">
                                                        <div class="row" th:if="${!isAnonymousUser}">
                                                            <div class="col-md-12 col-sm-12">
                                                                <div class="form-group">
                                                                    <label class="control-label"> <span th:text="#{full.name.colon}"></span></label>
                                                                    <span id="fullname"></span>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 col-sm-12">
                                                                <div class="form-group">
                                                                    <label class="control-label"><span th:text="#{mobile.colon}"></span></label>
                                                                    <span id="mobileNumber"></span>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 col-sm-12">
                                                                <div class="form-group">
                                                                    <label class="control-label"> <span th:text="#{perm.add.colon}"></span></label>
                                                                    <span id="permanentAddress"></span>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 col-sm-12">
                                                                <div class="form-group">
                                                                    <label class="control-label"><span th:text="#{occu.colon}"></span></label>
                                                                    <span id="occupation"></span>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 col-sm-12">
                                                                <div class="form-group">
                                                                    <label class="control-label"><span th:text="#{dob.colon}"></span></label>
                                                                    <span id="dateOfBirth"></span>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 col-sm-12">
                                                                <div class="form-group">
                                                                    <label class="control-label"><span th:text="#{nid.colon}"></span></label>
                                                                    <span id="nationalId"></span>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 col-sm-12">
                                                                <div class="form-group">
                                                                    <label class="control-label"><span th:text="#{email.colon}"></span></label>
                                                                    <span id="email"></span>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 col-sm-12 panel-footer" th:if="${isGRO == true && isNagorik == true}">
                                                                <a id="btnGrievances" style="display:none;" onclick="getGrievanceListOfCitizen()" class="bg-font-grey"> <i class="icon-list"></i> <span th:text="#{grievance.list.of.citizen}" style="color:blue"></span></a>
                                                            </div>
                                                        </div>
                                                        <div class="row" th:if="${isAnonymousUser}">
                                                            <div class="col-md-12 col-sm-12 text-center">অজ্ঞাতনামা, কোনো তথ্য পাওয়া যায়নি</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default">
                                                <div class="panel-heading" style="background-color: #009444;color: white;">
                                                    <h4 class="panel-title">
                                                        <a class="accordion-toggle accordion-toggle-styled" data-toggle="collapse" data-parent="#accordion3" href="#collapse_3_6" th:text="#{file.attach}"> All attached files  </a>
                                                    </h4>
                                                </div>
                                                <div id="collapse_3_6" class="panel-collapse">
                                                    <div class="panel-body">
                                                        <div class="row" id="allAttachedFiles">
                                                            <div class="col-md-12 col-sm-12">
                                                                <a onclick="populateComplaintsAttachments()" class="bg-font-grey"> <i class="icon-paper-clip"></i> <span th:text="#{complaint.file.list}" style="color:blue"></span> <span> ( <span th:text="${grievanceFileCount}"></span>)</span></a><br><br>
                                                                <a onclick="populateComplaintsMovementAttachments()" class="bg-font-grey"> <i class="icon-paper-clip"></i> <span th:text="#{complaint.movement.file.list}" style="color:blue"></span> <span> ( <span th:text="${grievanceForwardingFileCount}"></span>)</span></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default">
                                                <div class="panel-heading" style="background-color: #3b86ff;color: white;">
                                                    <h4 class="panel-title">
                                                        <a class="accordion-toggle accordion-toggle-styled collapsed" data-toggle="collapse" data-parent="#accordion4" href="#collapse_3_3" th:text="#{guideline.relevant.part}"> </a>
                                                    </h4>
                                                </div>
                                                <div id="collapse_3_3" class="panel-collapse">
                                                    <div class="panel-body">
                                                        <a onclick="populateGuidelineModal()" class="bg-font-grey"> <i class="icon-paper-clip"></i> <span th:text="#{guideline.relevant.part}" style="color:blue"></span></a><br><br>
                                                        <a class="media-embed" data-asset="false" href="/assets/grs_user_manual.pdf" onclick="javascript:previewGrsUserManual(this, event);"> <i class="icon-paper-clip"></i> <span th:text="#{index.guide.text}" style="color:blue"></span></a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="carousel-reviews broun-block" th:unless="${#lists.isEmpty(feedbacks)}">
                                        <div class="container-fluid">
                                            <div class="row">
                                                <div id="feedbackCarouselForOISFUser" class="carousel slide" data-ride="carousel">
                                                    <!-- Indicators -->
                                                    <ol class="carousel-indicators" th:if="${not #lists.isEmpty(feedbacks) && #lists.size(feedbacks)>1}">
                                                        <th:block th:each="x, iter : ${feedbacks}">
                                                            <li data-target="#feedbackCarouselForOISFUser" th:data-slide-to="${iter.index}" th:class="${iter.first}?'active'"></li>
                                                        </th:block>
                                                    </ol>

                                                    <!-- Wrapper for slides -->
                                                    <div class="carousel-inner">
                                                        <th:block th:each="x, iter : ${feedbacks}">
                                                            <div class="item" th:classappend="${iter.first}?'active'">
                                                                <div class="person-text rel">
                                                                </div>
                                                                <div class="block-text rel zmin">
                                                                    <a title="" href="#" th:text="${x.title}">...</a>
                                                                    <div class="mark" th:inline="text"> <input type="text" class="rating rating-loading" th:value="${x.rating}" data-size="sm" data-show-clear="false" data-readonly="true"> </div>
                                                                    <p th:text="${x.comments}">...</p>

                                                                </div>
                                                                <div class="person-text rel">
                                                                </div>
                                                            </div>
                                                        </th:block>
                                                    </div>
                                                    <a th:if="${not #lists.isEmpty(feedbacks) && #lists.size(feedbacks)>1}" class="left carousel-control" href="#feedbackCarouselForOISFUser" role="button" data-slide="prev">
                                                        <span class="glyphicon glyphicon-chevron-left"></span>
                                                    </a>
                                                    <a th:if="${not #lists.isEmpty(feedbacks) && #lists.size(feedbacks)>1}" class="right carousel-control" href="#feedbackCarouselForOISFUser" role="button" data-slide="next">
                                                        <span class="glyphicon glyphicon-chevron-right"></span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-9" th:if="${grsUser==true}">
                            <div class="tabbable-line">
                                <ul class="nav nav-tabs">
                                    <li class="active" th:if="${grsUser==true}">
                                        <a href="#complaintDetails" data-toggle="tab">
                                            <i class="icon-notebook" ></i>
                                            <span th:text="#{description}"></span>
                                        </a>
                                    </li>
                                    <li th:if="${grsUser==true}">
                                        <a href="#complaintMovementHistory" data-toggle="tab" onclick="getComplainantComplaintMovements();"><i class="icon-clock"></i> <span th:text="#{history}"></span></a>
                                    </li>
                                    <li class="" th:if="${grsUser==false}">
                                        <a href="#complaintDetails" data-toggle="tab">
                                            <i class="icon-notebook" ></i>
                                            <span th:text="#{description}"></span>
                                        </a>
                                    </li>
                                    <div class="actions pull-right" style="padding-right: 20px;">
                                        <div class="row">
                                            <a th:if="${!isMobileLogin}" href="javascript:;" id="btnBack" onclick="javascript:goPreviousPage();" class="btn btn-danger btn-lg"><i class="icon-action-undo"></i> <span class="tabname tabname-hide-on-mobile" th:text="#{go.back.to.list}"></span></a>
                                            <a th:if="${grsUser && isFeedbackEnabled}" class="btn btn-primary btn-lg" data-toggle="modal" id="feedbackButtonId" href="#modalFeedback"><span th:text="#{rate.us}"></span></a>
                                            <!--<div class="btn btn-group hidden" id="reviveComplaint">
                                                <button class="btn btn-circle btn-primary btn-sm" th:classappend="${reviveFlag==false}? hide : '' " th:disabled="${!reviveFlag}" type="button" onclick="reviveComplaint()"><i class="icon-energy"></i> অভিযোগ পুনরুদ্ধার</button>
                                            </div>-->
                                            <div class="btn-group hidden" id="appealButton">
                                                <button class="btn btn-primary btn-lg" th:classappend="${isBlacklisted==true}? hide : '' " th:disabled="${isBlacklisted}" type="button" onclick="appealOption()"><i class="icon-energy"></i> আপিল করুন</button>
                                            </div>

                                            <div class="btn btn-group hidden" id="actionButton" th:classappend="${isMobileLogin ? 'pull-right' : ''}">
                                                <button class="btn btn-primary btn-lg dropdown-toggle" type="button" data-toggle="dropdown"><i class="icon-energy" ></i > <span th:text="#{take.action}"></span>
                                                    <i class="fa fa-angle-down"></i>
                                                </button>
                                                <ul class="dropdown-menu pull-right" role="menu" id="actionButtonMenus"></ul>
                                            </div>
                                        </div>
                                    </div>
                                </ul>
                                <div class="tab-content">
                                    <div class="tab-pane active" th:if="${grsUser==true}"  id="complaintDetails">
                                        <div class="blog-page blog-content-2">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div id="citizenNotification"></div>
                                                    <div class="blog-single-content bordered blog-container" id="printableArea">
                                                        <div class="blog-single-desc">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <span th:text="#{to}"></span><br />
                                                                    <span th:text="#{gro}"></span><br />
                                                                    <span id="officeName"></span><br />
                                                                    <br />
                                                                </div>
                                                                <div class="col-md-offset-2 col-md-3">
                                                                    <span th:text="#{grievance.date.colon}"></span> <span id="dateCreated"></span><br />
                                                                    <span th:text="#{track.colon}"></span> <span class="trackingNumber"></span><br />
                                                                    <span th:text="#{status.colon}"></span> <span id="status"></span> <br />
                                                                </div>
                                                                <div th:if="${!isMobileLogin}" class="col-md-1">
                                                                    <a class="btn btn-circle btn-icon-only btn-default btn-print pull-right" id="printGrievanceDetails" data-toggle="tooltip" th:title="#{print}">
                                                                        <i class="fa fa-print"></i>
                                                                    </a>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <b><span th:text="#{subject.colon}"></span> <span id="title"></span></b> <br />
                                                                    <br />
                                                                    <span th:text="#{mr.ms}"></span>
                                                                    <br />
                                                                    <span id="description"></span>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-md-4">
                                                                    <br />
                                                                    <span th:text="#{yours.faithfully}"></span><br /><br />
                                                                    <span id="name"></span> <br />
                                                                    <span id="mobileNumber"></span><br />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="mt-list-container list-simple complaint-file">
                                                <label th:text="#{attachments}"></label>
                                                <table id="complaintAttachFile" class="table table-striped">
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane" th:if="${grsUser==true}"  id="complaintMovementHistory">
                                        <div class="portlet-body">
                                            <div class="blog-single-content bordered blog-container" id="printable-area">
                                                <div class="timeline col-md-11" id="grievanceHistory"></div>
                                                <div th:if="${!isMobileLogin}" class="col-md-1">
                                                    <a class="btn btn-circle btn-icon-only btn-default btn-print pull-right" id="printGrievanceHistory" data-toggle="tooltip" th:title="#{print}">
                                                        <i class="fa fa-print"></i>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3" th:if="${grsUser==true}">
                            <div class="blog-page blog-content-2">
                                <div class="blog-single-sidebar blog-container">
                                    <div class="blog-single-sidebar-recent">
                                        <div class="panel-group accordion" id="accordion3">
                                            <div class="panel panel-default">
                                                <div class="panel-heading">
                                                    <h4 class="panel-title">
                                                        <a class="accordion-toggle accordion-toggle-styled" data-toggle="collapse" data-parent="#accordion3" href="#collapse_3_6" th:text="#{file.attach}"> All attached files  </a>
                                                    </h4>
                                                </div>
                                                <div id="collapse_3_6" class="panel-collapse">
                                                    <div class="panel-body">
                                                        <div class="row" id="allAttachedFiles">
                                                            <div class="col-md-12 col-sm-12">
                                                                <a onclick="populateComplaintsAttachments()" class="bg-font-grey"> <i class="icon-paper-clip"></i> <span th:text="#{complaint.file.list}" style="color:blue"></span><span> ( <span th:text="${grievanceFileCount}"></span>)</span></a><br><br>
                                                                <a onclick="populateComplaintsMovementAttachments()" class="bg-font-grey"> <i class="icon-paper-clip"></i> <span th:text="#{complaint.movement.file.list}" style="color:blue"></span><span> ( <span th:text="${grievanceForwardingFileCount}"></span>)</span></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel panel-default hide">
                                                <div class="panel-heading">
                                                    <h4 class="panel-title">
                                                        <a class="accordion-toggle accordion-toggle-styled collapsed" data-toggle="collapse" data-parent="#accordion3" href="#collapse_3_2" th:text="#{guideline.relevant.part}"> </a>
                                                    </h4>
                                                </div>
                                                <div id="collapse_3_2" class="panel-collapse collapse">
                                                    <div class="panel-body">

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="grsUserManualModal" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <a class="dark btn-outline" href="/assets/grs_user_manual.pdf" target="_blank" th:text="#{download}"></a>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                </div>
                <div class="modal-body" style="max-height: 800px; overflow-y: scroll; min-height: 800px">
                    <img data-src="assets/grs_user_manual/01.jpg" style="width: 100%;">
                    <img data-src="assets/grs_user_manual/02.jpg" style="width: 100%;">
                    <img data-src="assets/grs_user_manual/03.jpg" style="width: 100%;">
                    <img data-src="assets/grs_user_manual/04.jpg" style="width: 100%;">
                    <img data-src="assets/grs_user_manual/05.jpg" style="width: 100%;">
                    <img data-src="assets/grs_user_manual/06.jpg" style="width: 100%;">
                    <img data-src="assets/grs_user_manual/07.jpg" style="width: 100%;">
                    <img data-src="assets/grs_user_manual/08.jpg" style="width: 100%;">
                    <img data-src="assets/grs_user_manual/09.jpg" style="width: 100%;">
                    <img data-src="assets/grs_user_manual/10.jpg" style="width: 100%;">
                    <img data-src="assets/grs_user_manual/11.jpg" style="width: 100%;">
                    <img data-src="assets/grs_user_manual/12.jpg" style="width: 100%;">
                </div>
                <div class="modal-footer">
                    <a class="btn dark btn-outline" href="/assets/grs_user_manual.pdf" target="_blank" th:text="#{download}"></a>
                    <button class="btn dark btn-outline" data-dismiss="modal" type="button" th:text="#{close}"></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade bs-modal-lg" id="shortGuideline" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content" style="padding: 10px;">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                </div>
                <div class="modal-body">
                    <h4>অভিযোগ প্রতিকার ব্যবস্থাপনা:</h4>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a class="accordion-toggle accordion-toggle-styled" data-toggle="collapse" data-parent="#accordion3" href="#collapse_4_1">
                                    <span>৭.১. অনিক-এর কার্যপদ্ধতি:</span>
                                </a>
                            </h4>
                        </div>
                        <div id="collapse_4_1" class="panel-collapse collapse">
                            <div class="panel-body">
                                <p>(ক) অনিক অনুচ্ছেদ ৭.১.১. অনুসরণ করে প্রাপ্ত অভিযোগ প্রাথমিক যাচাই-বাছাইয়ের পর দপ্তর প্রধানকে অবহিত রেখে নিম্নরূপ পদক্ষেপ গ্রহণ করবেন:</p>
                                <ol>
                                    <li>i) অভিযোগ অন্য কোনো দপ্তরের সঙ্গে সংশ্লিষ্ট হলে উক্ত দপ্তরের অনিকের নিকট প্রেরণ এবং আওতাধীন দপ্তরের সেবা-সংক্রান্ত হলে সংশ্লিষ্ট অনিকের নিকট প্রেরণ;</li>
                                    <li>ii) অভিযোগটি অভিযোগ নিষ্পত্তি কর্মকর্তা (অনিক) সম্পর্কিত হলে কার্যক্রম গ্রহণের জন্য সংশ্লিষ্ট আপিল কর্মকর্তার নিকট প্রেরণ;</li>
                                </ol>
                                <ul>
                                    <li>iii) মন্ত্রণালয়/বিভাগের আপিল কর্মকর্তা সংশ্লিষ্ট হলে দপ্তর প্রধানের অনুমতি সাপেক্ষে তা অভিযোগ ব্যবস্থাপনা সেলে প্রেরণ করতে হবে</li>
                                </ul>
                                <ol>
                                    <li>iv) মন্ত্রণালয়/বিভাগ ব্যতীত অন্যান্য আপিল কর্মকর্তা সংশ্লিষ্ট হলেও তা অভিযোগ ব্যবস্থাপনা সেলে প্রেরণ করতে হবে;</li>
                                    <li>v) অভিযোগ এই নির্দেশিকার আওতায় গ্রহণযোগ্য না হলে উপযুক্ত কারণ লিপিবদ্ধ করে নথিজাতকরণ;</li>
                                    <li>vi) অভিযোগটি এই নির্দেশিকার আওতায় গ্রহণযোগ্য বিবেচিত হলে সংশ্লিষ্ট সেবার দায়িত্বপ্রাপ্ত কর্মকর্তা/কর্মচারীর মতামতের জন্য প্রেরণ।</li>
                                </ol>
                                <p>(খ)&nbsp; সেবা-সংশ্লিষ্ট দায়িত্বপ্রাপ্ত কর্মকর্তার মতামতের জন্য অনিক যুক্তিসংগত সময় নির্ধারণ করে দেবেন এবং প্রেরিত অভিযোগের সঙ্গে নিম্নোক্ত নির্দেশনা প্রদান করবেন&mdash;</p>
                                <ol>
                                    <li>i) অভিযোগে উল্লিখিত সেবাটি ইতোমধ্যে প্রদান করা হয়ে থাকলে বিস্তারিত তথ্য প্রদান করতে হবে;</li>
                                    <li>ii) সেবা প্রদান না করা হয়ে থাকলে তা প্রদান করে বিস্তারিত তথ্যসহ অবহিত করতে হবে;</li>
                                </ol>
                                <ul>
                                    <li>iii) সেবা প্রদানের জন্য অধিকতর সময় প্রয়োজন হলে যথোপযুক্ত কারণ (explanation) জানাতে হবে;</li>
                                </ul>
                                <ol>
                                    <li>iv) অধীনস্ত কোনো কর্মকর্তা/কর্মচারীর দায়িত্বে অবহেলার কারণে নির্ধারিত সময়ে বা পদ্ধতিতে সেবা প্রদান করা সম্ভব না হয়ে থাকলে বিস্তারিত উল্লেখ করতে হবে;</li>
                                    <li>v) আবেদনের অসম্পূর্ণতা অথবা অন্য কোনো কারণে সেবা প্রদান করা সম্ভব না হলে যথোপযুক্ত কারণ উল্লেখ করতে হবে।</li>
                                </ol>
                                <p>(গ)&nbsp; অনিক প্রয়োজনে অভিযোগ-সম্পর্কিত নথি, প্রতিবেদন, সংশ্লিষ্ট কাগজপত্রাদি, লিখিত/মৌখিক বক্তব্য ইত্যাদি সংগ্রহ করতে পারবেন।</p>
                                <p>(ঘ)&nbsp; মতামত প্রাপ্তির পর অথবা নির্ধারিত সময়ে মতামত পাওয়া না গেলে অনুচ্ছেদ ৭.১(ঙ) অনুসারে অনিক পরবর্তী কার্যক্রম গ্রহণ করবেন। দায়িত্বপ্রাপ্ত কর্মকর্তা অথবা অধীনস্থ কর্মকর্তা/কর্মচারী কর্তৃক সেবা প্রদানের ক্ষেত্রে অসদাচরণ, বিধি-বহির্ভূত কাজ কিংবা অনিয়ম সাধিত হয়েছে মর্মে অনিকের নিকট প্রতীয়মান হলে ৭.১.২ অনুচ্ছেদ অনুসরণে দপ্তর প্রধানের অনুমতি গ্রহণপূর্বক তিনি তদন্তের উদ্যোগ গ্রহণ করতে পারবেন।</p>
                                <p>(ঙ) অনিক দাখিলকৃত অভিযোগ, সংশ্লিষ্ট কাগজপত্রাদি, সেবা প্রদানকারীর মতামত, প্রযোজ্য ক্ষেত্রে তদন্ত প্রতিবেদন এবং প্রাসঙ্গিক তথ্য পর্যালোচনা করে নিম্নরূপ সিদ্ধান্ত গ্রহণ করবেন&mdash;</p>
                                <ol>
                                    <li>i) অভিযোগ দাখিলের পর সংশ্লিষ্ট কর্মকর্তা/কর্মচারী কর্তৃক ইতোমধ্যে সেবা প্রদান করা হয়ে থাকলে বিষয়টির নিষ্পত্তি করা হয়েছে বলে গণ্য করবেন। তবে অসদাচরণ, বিধি-বহির্ভূত কাজ কিংবা অনিয়মের ক্ষেত্রে যথোপযুক্ত ব্যবস্থা গ্রহণ করবেন;</li>
                                    <li>ii) দায়িত্বপ্রাপ্ত কর্মকর্তা কর্তৃক সেবা প্রদানের জন্য অধিক সময় প্রয়োজন মর্মে মতামত প্রদান করা হলে অনিক যুক্তিসঙ্গত সময় নির্ধারণ করে উক্ত সেবা প্রদানের নির্দেশনা প্রদান করবেন;</li>
                                </ol>
                                <ul>
                                    <li>iii) দায়িত্বপ্রাপ্ত কর্মকর্তা কর্তৃক সেবা প্রদান করা সম্ভব নয় মর্মে প্রদত্ত মতামত সন্তোষজনক বিবেচিত হলে অনিক অভিযোগটি নিষ্পন্ন করবেন;</li>
                                </ul>
                                <ol>
                                    <li>iv) যদি প্রতীয়মান হয় যে, অভিযোগকারীকে প্রত্যাশিত সেবা বা পণ্য প্রদান করা হয়নি বা আংশিক প্রদান করা হয়েছে, তাহলে তিনি সেবা প্রদানকারী কর্মকর্তা-কর্মচারীকে সেবা প্রদান প্রতিশ্রুতি অনুসরণপূর্বক উক্ত সেবা প্রদান করার জন্য নির্দেশনা প্রদান করবেন;</li>
                                    <li>v) আইনের আওতায় নিবন্ধিত সেবা প্রদানকারী প্রতিষ্ঠানের ক্ষেত্রে বিদ্যমান আইন অনুযায়ী ব্যবস্থা গ্রহণের জন্য দপ্তর প্রধানের নিকট সুপারিশ করবেন।</li>
                                    <li>vi) অন্যান্য ক্ষেত্রে মতামত বা সুপারিশ দপ্তর প্রধান/অভিযোগ ব্যবস্থাপনা সেল/উপযুক্ত কর্তৃপক্ষের নিকট প্রেরণ করবেন।</li>
                                </ol>
                                <p>(চ)&nbsp; অনিক কর্তৃক সেবা প্রদানকারীকে ৭.১ (ঙ) অনুচ্ছেদে সেবা প্রদানের নির্দেশনা দেওয়ার পর নির্ধারিত সময়ে উক্ত নির্দেশনা প্রতিপালিত হলে অভিযোগটি নিষ্পন্ন করবেন। নির্দেশনা প্রতিপালিত না হলে ৭.১.২ অনুচ্ছেদ অনুসরণে দপ্তর প্রধানের অনুমতি গ্রহণপূর্বক তদন্তের উদ্যোগ গ্রহণ করবেন।</p>
                                <p>(ছ)&nbsp; অনিকের নিকট সেবা প্রদানের ক্ষেত্রে কোনো প্রতিবন্ধকতা রয়েছে মর্মে প্রতীয়মান হলে তা সমাধানের জন্য তিনি দপ্তর প্রধানের নিকট সুপারিশ করবেন।</p>
                                <p>(জ) তদন্ত কার্যক্রমে সেবা প্রদানের ক্ষেত্রে কোনো কর্মকর্তা/কর্মচারীর অসদাচরণ, বিধি-বহির্ভূত কাজ কিংবা অনিয়মের প্রমাণ পাওয়া গেলে দপ্তর প্রধানের অনুমতিক্রমে সরকারি কর্মচারী (শৃঙ্খলা ও আপিল) বিধিমালা, ২০১৮ অনুসারে ব্যবস্থা গ্রহণের জন্য নিয়ন্ত্রণকারী কর্তৃপক্ষের নিকট সুপারিশ করবেন।</p>
                                <h3><a name="_Toc505267217"></a>৭.১.১. অভিযোগ যাচাই-বাছাই:</h3>
                                <p>(ক) অভিযোগ প্রাপ্তির পর অনিক অভিযোগ যাচাই-বাছাইয়ের ক্ষেত্রে নিম্নোক্ত বিষয়সমূহ বিবেচনা করবেন:</p>
                                <p>১.&nbsp; অভিযোগটি সংশ্লিষ্ট-সেবাপ্রদানকারী দপ্তরের সেবা কিংবা পণ্যের মান অথবা পদ্ধতি-সংক্রান্ত কিনা;</p>
                                <p>২.&nbsp; সেবা প্রদানের ক্ষেত্রে সেবা প্রদান প্রতিশ্রুতি (Citizen&rsquo;s Charter)- এ বর্ণিত সেবার মান লঙ্ঘন করা হয়েছে কিনা;</p>
                                <p>৩. অভিযোগটি কোনো নাগরিককে তাঁর প্রাপ্য সেবা থেকে বঞ্চিতকরণ কিংবা তাঁকে সেবা প্রদানে অযৌক্তিকভাবে বিলম্বিতকরণ-সংক্রান্ত কিনা;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
                                <p>৪.&nbsp; অভিযোগে প্রদেয়/প্রদত্ত সেবার সঙ্গে সম্পর্কিত বিধি-বহির্ভূত কাজ বা অনিয়মের পর্যাপ্ত উপাদান আছে কিনা;</p>
                                <p>৫. অভিযোগে সেবা প্রদানে অসদাচরণের পর্যাপ্ত উপাদান আছে কি না;</p>
                                <p>৬. অভিযোগকারীর পূর্ণ ঠিকানা, ফোন, ই-মেইল ইত্যাদি আছে কি না;</p>
                                <p>৭.&nbsp; অভিযোগকারী কী বিষয়ে প্রতিকার চান সে সম্পর্কে পর্যাপ্ত তথ্য অভিযোগে সন্নিবেশিত আছে কি না;</p>
                                <p>৮. অনুচ্ছেদ ৬.১ (চ)-এ উল্লিখিত নির্দেশনা মোতাবেক অভিযোগ দাখিল করা হয়েছে কি না; এবং</p>
                                <p>৯. অজ্ঞাতনামা হিসেবে অভিযোগ দায়ের করা হয়েছে কি না।</p>
                                <p>(খ)&nbsp; অজ্ঞাতনামা হিসেবে অভিযোগ দায়ের করলে অভিযোগটির ওপর কার্যক্রম গ্রহণ করা হবে কি না, সে বিষয়ে অভিযোগের ধরন/গুরুত্ব অনুযায়ী অনিক যথাযথ পদক্ষেপ গ্রহণ করবেন;</p>
                                <p>(গ)&nbsp; সংশ্লিষ্ট আইন বা বিধির আওতায় রিভিউ/আপিলের সুযোগ রয়েছে এরূপ ক্ষেত্রে রিভিউ/আপিলের সিদ্ধান্তের বিষয়ে এই নির্দেশিকার আওতায় কার্যক্রম গ্রহণের প্রয়োজন নেই। তবে সেবার মান লঙ্ঘনের ক্ষেত্রে কার্যক্রম গ্রহণ করা যাবে; এবং</p>
                                <p>(ঘ)&nbsp; উক্তরূপ যাচাই-বাছাইয়ের পর অনিক যথোপযুক্ত ব্যবস্থা গ্রহণের মাধ্যমে অভিযোগ নিষ্পত্তির ব্যবস্থা গ্রহণ করবেন।</p>
                                <h3><a name="_Toc505267218"></a>৭.১.২. অভিযোগ তদন্ত:</h3>
                                <p>(ক) তদন্তের সিদ্ধান্ত গ্রহণ করার পর অনিক নিম্নরূপ উদ্যোগ গ্রহণ করবেন:</p>
                                <ol>
                                    <li>i) সংশ্লিষ্ট সেবাপ্রদানকারী কর্মকর্তা-কর্মচারী পদমর্যাদায় অনিক-এর অধস্তন হলে দপ্তর প্রধানের অনুমোদনক্রমে তিনি নিজেই তদন্তের কার্যক্রম গ্রহণ করতে পারবেন;</li>
                                    <li>ii) সংশ্লিষ্ট সেবাপ্রদানকারী কর্মকর্তা সমপর্যায়ের বা ঊর্ধ্বতন কর্মকর্তা হলে তিনি সংশ্লিষ্ট দপ্তর প্রধানের অনুমোদনক্রমে উর্ধ্বতন কর্তৃপক্ষের মাধ্যমে তদন্তের কার্যক্রম গ্রহণ করবেন;</li>
                                </ol>
                                <p>(খ)&nbsp; অনিক নিজে অথবা সংশ্লিষ্ট সেবাপ্রদানকারী কর্মকর্তা/কর্মচারীর ন্যূনতম এক ধাপ ঊর্ধ্বতন কর্মকর্তাকে তদন্ত কর্মকর্তা হিসেবে দায়িত্ব প্রদান করে কিংবা অনধিক তিন সদস্যের তদন্ত কমিটি গঠন করে অভিযোগ তদন্তের ব্যবস্থা করতে পারবেন;</p>
                                <p>(গ)&nbsp; তদন্ত প্রতিবেদন দাখিলের জন্য অনিক সর্বোচ্চ ২০ কার্যদিবস সময় নির্ধারণ করে দেবেন;</p>
                                <p>(ঘ)&nbsp; তদন্ত কর্মকর্তা/তদন্ত কমিটি সময় নির্ধারণ করে অভিযোগকারী, অভিযুক্ত কর্মকর্তা-কর্মচারী অথবা সংশ্লিষ্ট অন্য কোনো ব্যক্তিকে শুনানিতে হাজির হওয়া বা লিখিত বক্তব্য প্রদানের জন্য নোটিশ প্রদান করবেন;</p>
                                <p>(ঙ) সংশ্লিষ্ট কাগজপত্র এবং বক্তব্য পর্যালোচনা করে তদন্ত কর্মকর্তা/তদন্ত কমিটি অনিকের নিকট সুনির্দিষ্ট মতামতসহ তদন্ত প্রতিবেদন দাখিল করবেন। কোনো কর্মকর্তা/কর্মচারীর অসদাচরণ, বিধি-বহির্ভূত কাজ কিংবা অনিয়মের প্রমাণ পাওয়া গেলে অথবা সেবা প্রদানে কোনো প্রতিবন্ধকতা থাকলে তা প্রতিবেদনে উল্লেখ করবেন।</p>
                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a class="accordion-toggle accordion-toggle-styled collapsed" data-toggle="collapse" data-parent="#accordion3" href="#collapse_4_2">
                                    <span>৭.২. আপিল কর্মকর্তার কার্যপদ্ধতি:</span>
                                </a>
                            </h4>
                        </div>
                        <div id="collapse_4_2" class="panel-collapse collapse">
                            <div class="panel-body">
                                <p>(ক) আপিল কর্মকর্তা অনুচ্ছেদ ৭.১.১. অনুসরণ করে প্রাপ্ত আপিল প্রাথমিক যাচাই-বাছাইয়ের পর কার্যক্রম গ্রহণ করবেন;</p>
                                <p>(খ)&nbsp; আপিল কর্মকর্তা প্রয়োজনে যুক্তিসঙ্গত সময় নির্ধারণ করে অনিক অথবা সংশ্লিষ্ট কর্মকর্তা-কর্মচারী বা ব্যক্তির মতামত গ্রহণ করবেন;</p>
                                <p>(গ)&nbsp; আপিল কর্মকর্তা প্রয়োজনে অভিযোগ-সম্পর্কিত নথি, প্রতিবেদন, সংশ্লিষ্ট কাগজপত্রাদি, লিখিত/মৌখিক বক্তব্য ইত্যাদি তথ্য-প্রমাণ তলব/সংগ্রহ করতে পারবেন;</p>
                                <p>(ঘ)&nbsp; আপিল কর্মকর্তা প্রয়োজনীয় ক্ষেত্রে অনুচ্ছেদ ৭.১.২ এ বর্ণিত অনিকের অনুসৃত পদ্ধতির ন্যায় তদন্তের উদ্যোগ গ্রহণ করতে পারবেন;</p>
                                <p>(ঙ) সকল কাগজপত্র, মতামত এবং প্রযোজ্য ক্ষেত্রে তদন্ত প্রতিবেদন পর্যালোচনা করে আপিল কর্মকর্তার নিকট যদি প্রতীয়মান হয়:</p>
                                <ol>
                                    <li>i) অনিক-এর সিদ্ধান্ত যথাযথ ছিল, তবে তিনি অনিকের সিদ্ধান্ত সমর্থন করে সংশ্লিষ্ট সকলকে তাঁর সিদ্ধান্ত অবহিত করবেন;</li>
                                    <li>ii) সেবাপ্রদানকারী কর্মকর্তা/কর্মচারী অনিকের সিদ্ধান্ত যথাযথভাবে প্রতিপালন করেননি, সেক্ষেত্রে সিদ্ধান্ত প্রতিপালনের জন্য তিনি সেবা প্রদানকারীকে নির্দেশনা প্রদান করবেন;</li>
                                </ol>
                                <ul>
                                    <li>iii) অনিকের সিদ্ধান্ত যথাযথ না হলে, সেক্ষেত্রে তিনি উপযুক্ত নির্দেশনা প্রদান করবেন;</li>
                                </ul>
                                <ol>
                                    <li>iv) অভিযুক্ত কর্মকর্তা/কর্মচারীর অসদাচরণ, বিধি-বহির্ভূত কাজ কিংবা অনিয়মের প্রমাণ পাওয়া গেলে দপ্তর প্রধানের অনুমতিক্রমে সরকারি কর্মচারী (শৃঙ্খলা ও আপিল) বিধিমালা, ২০১৮ অনুসারে ব্যবস্থা গ্রহণের জন্য নিয়ন্ত্রণকারী কর্তৃপক্ষের নিকট সুপারিশ করবেন;</li>
                                    <li>v) অন্যান্য ক্ষেত্রে মতামত বা সুপারিশ দপ্তর প্রধান/অভিযোগ ব্যবস্থাপনা সেল/উপযুক্ত কর্তৃপক্ষের নিকট প্রেরণ করবেন।</li>
                                </ol>
                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a class="accordion-toggle accordion-toggle-styled collapsed" data-toggle="collapse" data-parent="#accordion3" href="#collapse_4_3">
                                    <span>৭.৩. অভিযোগ ব্যবস্থাপনা সেলের কার্যপদ্ধতি:</span>
                                </a>
                            </h4>
                        </div>
                        <div id="collapse_4_3" class="panel-collapse collapse">
                            <div class="panel-body">
                                <p>(ক) অভিযোগ ব্যবস্থাপনা সেলের নিকট অভিযোগ/আপিল দাখিল করা হয়ে থাকলে সেলের সদস্য সচিব অনুচ্ছেদ ৭.১.১ অনুসরণ করে প্রাথমিক যাচাই-বাছাইয়ের পর সেলের নিকট সিদ্ধান্তের জন্য উপস্থাপন করবেন।</p>
                                <p>(খ)&nbsp; অভিযোগ ব্যবস্থাপনা সেল প্রয়োজন মনে করলে মতামত প্রদানের জন্য অনিক বা আপিল কর্মকর্তা অথবা সংশ্লিষ্ট ব্যক্তির মতামত গ্রহণ করবেন। এক্ষেত্রে তিনি মতামত প্রদানের জন্য সময় নির্ধারণ করে দেবেন;</p>
                                <p>(গ)&nbsp; অভিযোগ ব্যবস্থাপনা সেল প্রয়োজনে অভিযোগ সম্পর্কিত নথি, দলিল, প্রতিবেদন, লিখিত/মৌখিক বক্তব্য ইত্যাদি তথ্য-প্রমাণ সংগ্রহ করতে পারবেন;</p>
                                <p>(ঘ)&nbsp; তদন্তের উদ্যোগ গ্রহণের প্রয়োজন হলে সেল অনুচ্ছেদ ৭.১.২ অনুসরণ করে কার্যক্রম গ্রহণ করবে।</p>
                                <p>(ঙ) সকল কাগজপত্র, মতামত এবং প্রযোজ্য ক্ষেত্রে তদন্ত প্রতিবেদন প্রাপ্তির পর অভিযোগ ব্যবস্থাপনা সেল নিম্নোরূপ পদক্ষেপ গ্রহণ করবে:</p>
                                <ol>
                                    <li>i) অভিযোগ সঠিক সময়ে নিষ্পত্তি না হলে দপ্তর প্রধানের নিকট অবহিত করতে পারবেন;</li>
                                    <li>ii) যদি প্রতীয়মান হয় যে, অভিযোগ যথাযথভাবে নিষ্পত্তি করা হয়নি, তাহলে সেল সংশ্লিষ্ট কর্তৃপক্ষকে যথাযথ সিদ্ধান্ত প্রদান করবে;</li>
                                </ol>
                                <ul>
                                    <li>iii) সেবা প্রদানের বিষয়ে কোনো প্রতিবন্ধকতা রয়েছে মর্মে প্রতীয়মান হলে তা সমাধানের জন্য সংশ্লিষ্ট মন্ত্রণালয়/বিভাগকে সুপারিশ প্রদান করবে;</li>
                                </ul>
                                <ol>
                                    <li>iv) অভিযুক্ত কর্মকর্তা/কর্মচারীর বিরুদ্ধে অসদাচরণ, বিধি-বহির্ভূত কাজ কিংবা অনিয়মের প্রমাণ পাওয়া গেলে অথবা সেলের নির্দেশনা প্রতিপালন না করলে মন্ত্রিপরিষদ সচিবকে অবহিত রেখে সরকারি কর্মচারী (শৃঙ্খলা ও আপিল) বিধিমালা, ২০১৮ অনুসারে ব্যবস্থা গ্রহণের জন্য নিয়ন্ত্রণকারী কর্তৃপক্ষের নিকট প্রেরণ করবে;</li>
                                    <li>v) অন্যান্য ক্ষেত্রে মতামত বা সুপারিশ দপ্তর প্রধান/উপযুক্ত কর্তৃপক্ষের নিকট প্রেরণ করবে;</li>
                                </ol>
                                <p>(চ)&nbsp; প্রযোজ্য ক্ষেত্রে অভিযোগ ব্যবস্থাপনা সেল মতামত বা সুপারিশ কেন্দ্রীয় অভিযোগ ব্যবস্থাপনা স্টিয়ারিং কমিটির নিকট অনুমোদনের জন্য উপস্থাপন করবে এবং তা সংশ্লিষ্ট দপ্তরে প্রেরণ করবে।</p>

                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a class="accordion-toggle accordion-toggle-styled collapsed" data-toggle="collapse" data-parent="#accordion3" href="#collapse_4_4">
                                    <span>৭.৪. অভিযোগ ও আপিল নিষ্পত্তি:</span>
                                </a>
                            </h4>
                        </div>
                        <div id="collapse_4_4" class="panel-collapse collapse">
                            <div class="panel-body">
                                <p>(ক) অনিক, আপিল কর্মকর্তা অথবা অভিযোগ ব্যবস্থাপনা সেল কর্তৃক প্রদত্ত সেবা প্রদানের নির্দেশনা প্রতিপালিত হলে অভিযোগ নিষ্পত্তি হয়েছে মর্মে গণ্য হবে;</p>
                                <p>(খ)&nbsp; তদন্ত প্রতিবেদন পর্যালোচনা করে তা সন্তোষজনক হলে অভিযোগ নিষ্পত্তি করতে পারবে;</p>
                                <p>(গ)&nbsp; দায়িত্বপ্রাপ্ত কর্মকর্তা অথবা অভিযুক্ত কর্মকর্তা/কর্মচারী সেবা প্রদান করা সম্ভব নয় মর্মে মতামত প্রদান করলে এবং তা সন্তোষজনক বলে বিবেচিত হলে অনিক, আপিল কর্মকর্তা অথবা অভিযোগ ব্যবস্থাপনা সেল প্রযোজ্য ক্ষেত্রে অভিযোগ নিষ্পত্তি করতে পারবেন;</p>
                                <p>(ঘ)&nbsp; অনিক, আপিল কর্মকর্তা অথবা অভিযোগ ব্যবস্থাপনা সেল কর্তৃক সরকারি কর্মচারী (শৃঙ্খলা ও আপিল) বিধিমালা, ২০১৮ অনুসারে ব্যবস্থা গ্রহণের জন্য সুপারিশ করা হলে অভিযোগ নিষ্পত্তি হয়েছে মর্মে গণ্য হবে;</p>
                                <p>(ঙ) অভিযোগ ব্যবস্থাপনা সেল কর্তৃক মন্ত্রণালয়/বিভাগে সুপারিশ অথবা নির্দেশনা প্রদান করা হলে অভিযোগ নিষ্পত্তি হয়েছে মর্মে গণ্য হবে;</p>
                                <p>(চ)&nbsp; অভিযোগ ব্যবস্থাপনা সেল কর্তৃক কেন্দ্রীয় অভিযোগ ব্যবস্থাপনা স্টিয়ারিং কমিটির অনুমোদিত মতামত বা সুপারিশ সংশ্লিষ্ট দপ্তরে প্রেরণ এবং তা বাস্তবায়ন করা হলে অভিযোগ নিষ্পত্তি হয়েছে মর্মে গণ্য হবে;</p>
                                <p>(ছ)&nbsp; প্রতিটি অভিযোগ নিষ্পত্তির সঙ্গে সঙ্গে ইলেক্ট্রনিক মাধ্যমে অথবা ডাকযোগে বা বাহকের মাধ্যমে ৭(সাত) কার্যদিবসের মধ্যে অভিযোগকারীকে অভিযোগের ফলাফল সম্পর্কে অবহিত করতে হবে ।</p>
                                <h3><a name="_Toc505267222"></a>৭.৪.১. অভিযোগ ও আপিল নিষ্পত্তির সময়সীমা:</h3>
                                <p>(ক) অনিক কর্তৃক অভিযোগ নিষ্পত্তির সর্বোচ্চ সময়সীমা নিম্নরূপ-</p>
                                <ol>
                                    <li>i) সাধারণভাবে অভিযোগ নিষ্পত্তির সর্বোচ্চ সময়সীমা হবে ৩০ কার্যদিবস;</li>
                                    <li>ii) তদন্তের উদ্যোগ গৃহীত হলে অতিরিক্ত ১০ কার্যদিবস সময়ের মধ্যে অভিযোগ নিষ্পত্তি করতে হবে।</li>
                                </ol>
                                <p>(খ)&nbsp; আপিল নিষ্পত্তির সর্বোচ্চ সময়সীমা আপিল দাখিলের তারিখ থেকে অনধিক ২০ কার্যদিবস;</p>
                                <p>(গ)&nbsp; অভিযোগ ব্যবস্থাপনা সেল কর্তৃক অভিযোগ/আপিল নিষ্পত্তির সর্বোচ্চ সময়সীমা হবে অনধিক ৬০ কার্যদিবস।</p>
                                <p>(ঘ)&nbsp; অনুচ্ছেদ ৭.৩ (চ) অনুসারে সেল কর্তৃক সুপারিশ বা পরামর্শ প্রদানের ২০ কার্যদিবসের মধ্যে মন্ত্রণালয়/বিভাগ তা নিষ্পত্তির ব্যবস্থা নেবে।</p>

                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a class="accordion-toggle accordion-toggle-styled collapsed" data-toggle="collapse" data-parent="#accordion3" href="#collapse_4_5">
                                    <span>৮. অসত্য/হয়রানিমূলক অভিযোগের বিষয়ে করণীয়:</span>
                                </a>
                            </h4>
                        </div>
                        <div id="collapse_4_5" class="panel-collapse collapse">
                            <div class="panel-body">
                                <p>কোনো অভিযোগকারী অভ্যাসগতভাবে অসত্য এবং কাউকে হয়রানি করার জন্য কিংবা অন্য কোনো অসৎ উদ্দেশ্যে অভিযোগ দাখিল করেন মর্মে প্রমাণিত হলে অনিক-এর সুপারিশের ভিত্তিতে সংশ্লিষ্ট আপিল কর্মকর্তা উক্ত অভিযোগকারীকে কালো তালিকাভুক্ত করতে পারবেন। এরূপ কালো তালিকাভুক্ত ব্যক্তির নিকট থেকে পরবর্তী সময়ে প্রাপ্ত কোনো অভিযোগ কর্তৃপক্ষ বিনা পদক্ষেপে খারিজ করতে পারবেন। তাছাড়া তালিকাভূক্ত কোন অভিযোগকারী অনলাইনে কোন অভিযোগ দাখিলের অনুমতি পাবেন না।</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalFeedback" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" th:text="#{your.feedback}"></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label th:text="#{rating}"></label>
                            <div class="input-group">
                                <input id="rating" type="text" data-bind="value: isRated" class="form-control rating rating-loading" data-size="sm">
                            </div>
                        </div>
                        <div class="form-group">
                            <label th:text="#{your.comments}"></label>
                            <div class="input-group">
                                <textarea id="txtaFeedback" class="form-control" cols="100" rows="6" maxlength="500" style="resize:none;"></textarea>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" th:text="#{cancel}"></button>
                    <button type="button" data-bind="enable: isRated" id="btnFeedback" class="btn btn-primary btn-feedback-send" th:text="#{send}" data-dismiss="modal"></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade bs-modal-lg" id="modalServiceDetails" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" th:text="#{service.details}"></h4>
                </div>
                <div class="modal-body">
                    <table class="service-details table table-hover">
                        <tr class="row static-info">
                            <td class="col-md-5 name" th:text="#{service.name}"></td>
                            <td class="col-md-7 value service-name"></td>
                        </tr>
                        <tr class="row static-info">
                            <td class="col-md-5 name" th:text="#{service.grievance.count}"></td>
                            <td class="col-md-7 value grievance-count"></td>
                        </tr>
                        <tr class="row static-info">
                            <td class="col-md-5 name" th:text="#{service.procedure}"></td>
                            <td class="col-md-7 value service-procedure"></td>
                        </tr>
                        <tr class="row static-info">
                            <td class="col-md-5 name" th:text="#{necessary.x(#{document.and.location})}"></td>
                            <td class="col-md-7 value service-document-and-location"></td>
                        </tr>
                        <tr class="row static-info">
                            <td class="col-md-5 name" th:text="#{service.price.and.payment.method}"></td>
                            <td class="col-md-7 value service-payment-method"></td>
                        </tr>
                        <tr class="row static-info">
                            <td class="col-md-5 name" th:text="#{service.time}"></td>
                            <td class="col-md-7 value service-time"></td>
                        </tr>
                        <tr class="row static-info">
                            <td class="col-md-5 name" th:text="#{service.officer}"></td>
                            <td class="col-md-7 value service-officer"></td>
                        </tr>
                        <tr class="row static-info">
                            <td class="col-md-5 name" th:text="#{phone}"></td>
                            <td class="col-md-7 value service-officer-phone"></td>
                        </tr>
                        <tr class="row static-info">
                            <td class="col-md-5 name" th:text="#{email}"></td>
                            <td class="col-md-7 value service-officer-email"></td>
                        </tr>
                        <tr class="row static-info">
                            <td class="col-md-5 name" th:text="#{service.officer.designation}"></td>
                            <td class="col-md-7 value service-officer-designation"></td>
                        </tr>
                        <tr class="row static-info">
                            <td class="col-md-5 name" th:text="#{office.unit.name}"></td>
                            <td class="col-md-7 value office-unit-name"></td>
                        </tr>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal" th:text="#{close}"></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade bs-modal-lg" id="modalForwardToAnotherOffice" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" th:text="#{office.alternative}"><i class="icon-action-redo"></i></h4>
                </div>
                <div class="modal-body">
                    <div class="form-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="control-label" th:text="#{note.colon}"></label>
                                    <div class="summernote" id="anotherOfficeNote"></div>
                                    <form id="fileuploadForwardToAnotherOffice" action="api/file/upload" method="POST" enctype="multipart/form-data" class="">
                                        <div th:replace="fileUpload :: fileUploadHtml">
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix">&nbsp;</div>
                        <div class="row">
                            <div class="col-md-12" id="officeSelectionId">
                                <th:block th:replace="officeSelection :: officeSelection"></th:block>
                            </div>
                        </div>
                        <div class="clearfix">&nbsp;</div>
                        <label>সেবা প্রদান প্রতিশ্রুতি সিলেক্ট করুন(কোনো সেবা বাছাই না করলে অভিযোগটি অন্যান্য হিসেবে প্রেরণ করা হবে):</label><br>
                        <label>অন্যান্য সেবার নাম: <input type="text" id="anotherOfficeOtherServiceName" class="form-control input-large"> </label>
                        <div id="anotherOfficesCitizenCharters"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline btn-primary btn-action" onclick="forwardToAnotherOffice();">প্রেরণ করুন</button>
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal" th:text="#{cancel}"></button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    <div class="modal fade bs-modal-lg" id="modalForwardToSubordinateOffice" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" th:text="#{office.proper}"><i class="icon-action-redo"></i></h4>
                </div>
                <div class="modal-body">
                    <div class="form-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="control-label" th:text="#{note.colon}"></label>
                                    <div class="summernote" id="subordinateOfficeNote"></div>
                                    <form id="fileuploadForwardToSubordinateOffice" action="api/file/upload" method="POST" enctype="multipart/form-data" class="">
                                        <div th:replace="fileUpload :: fileUploadHtml">
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix">&nbsp;</div>
                        <div class="row">
                            <div class="col-md-6">
                                <div id="jstreeForwardToSubordinateOffice" class="tree-demo"></div>
                            </div>
                            <div class="col-md-6">
                                <label>সেবা প্রদান প্রতিশ্রুতি সিলেক্ট করুন(কোনো সেবা বাছাই না করলে অভিযোগটি অন্যান্য হিসেবে প্রেরণ করা হবে):</label>
                                <label>অন্যান্য সেবার নাম: <input type="text" id="otherServiceName"> </label>
                                <div id="officesCitizenCharters">

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline btn-primary btn-action" onclick="forwardToSubordinateOffice();"><span th:text="#{send}"></span></button>
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal" th:text="#{cancel}"></button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    <div class="modal fade bs-modal-lg" id="modalSendToOfficer" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" th:text="#{feedback.send}"><i class="icon-bubble"></i></h4>
                </div>
                <div class="modal-body">
                    <form class="horizontal-form">
                        <div class="form-body">
                            <!-- th:if="${isGRO==false}" -->
                            <label class="control-label" th:text="#{last.date.opinion.colon}"></label>
                            <div class="row">
                                <!-- th:if="${isGRO==false}" -->
                                <div class="col-md-4">
                                    <div class="input-group input-medium date date-picker" id='dateSendToOfficer' data-date-format="dd-mm-yyyy" data-date-start-date="+0d">
                                        <input type="text" class="form-control" readonly>
                                        <span class="input-group-btn">
                                            <button class="btn default" type="button">
                                                <i class="fa fa-calendar"></i>
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label" th:text="#{note.colon}">নোট:</label>
                                <div class="summernote" id="summernoteSendToOfficer"></div>
                            </div>
                            <div class="form-group">
                                <div class="row margin-auto-bottom-20">
                                    <label class="control-label" th:text="#{selected.officer.sendForOpinion}">Selected Officer:</label>
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="selectedOfficer">
                                            <thead>
                                            <tr>
                                                <th>পদ</th>
                                                <th>নাম</th>
                                                <th>প্রধান প্রাপক </th>
                                                <th>অনুলিপি প্রাপক </th>
                                            </tr>
                                            </thead>
                                            <tbody>

                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row scroll-bar-jstree">
                                    <div class="form-group">
                                        <label class="control-label" th:text="#{choose.post}"></label>
                                        <div id="jstreeSendToOfficer" class="tree-demo"></div>
                                        <div id="officersDetailSendToOfficer" class="officersDetail"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3">
                                <button type="button" class="btn red existingFiles">
                                    <i class="fa fa-files-o"></i>
                                    <span th:text="#{files.list}"> </span>
                                </button>
                            </div>
                            <div class="col-md-9 existingFilesBlock" style="display:none;">
                                <div class="form-group">
                                    <label>ইতঃপূর্বের সংযুক্তিসমূহ</label>
                                    <div class="input-group">
                                        <div class="icheck-list">

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <div class="row" id="sendToOfficerFileUp">
                        <div class="form-body">
                            <div class="col-md-12">
                                <form id="fileuploadSendToOfficer" action="api/file/upload" method="POST" enctype="multipart/form-data" class="">
                                    <div th:replace="fileUpload :: fileUploadHtml">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline btn-primary btn-action" id="opSendButton" onclick="sendForOpinion('SendToOfficer')"><span th:text="#{send}"></span></button>
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal" th:text="#{cancel}"></button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    <div class="modal fade bs-modal-lg" id="modalSendToSubOfficeGRO" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" th:text="#{feedback.send.suboffice}"><i class="icon-bubble"></i></h4>
                </div>
                <div class="modal-body">
                    <form class="horizontal-form">
                        <div class="form-body">
                            <!-- th:if="${isGRO==false}" -->
                            <label class="control-label" th:text="#{last.date.colon}"></label>
                            <div class="row">
                                <!-- th:if="${isGRO==false}" -->
                                <div class="col-md-4">
                                    <div class="input-group input-medium date date-picker" id='dateSendToSubOfficeGRO' data-date-format="dd-mm-yyyy" data-date-start-date="+0d">
                                        <input type="text" class="form-control" readonly>
                                        <span class="input-group-btn">
									<button class="btn default" type="button">
										<i class="fa fa-calendar"></i>
									</button>
								</span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label" th:text="#{note.colon}">নোট:</label>
                                <div class="summernote" id="summernoteSendToSubOfficeGRO"></div>
                            </div>
                            <div class="form-group">
                                <div class="row margin-auto-bottom-20">
                                    <label class="control-label" th:text="#{selected.officer.sendForOpinion}">Selected Officer:</label>
                                    <div class="table-responsive">
                                        <table class="table table-hover" id="selectedOfficerSendToSubOfficeGRO">
                                            <thead>
                                            <tr>
                                                <th>পদ</th>
                                                <th>নাম</th>
                                                <th>প্রধান প্রাপক </th>
                                                <th>অনুলিপি প্রাপক </th>
                                            </tr>
                                            </thead>
                                            <tbody>

                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row scroll-bar-jstree">
                                    <div class="form-group">
                                        <label class="control-label" th:text="#{choose.post}"></label>
                                        <div id="jstreeSendToSubOfficeGRO" class="tree-demo"></div>
                                        <div id="officersDetailSendToSubOfficeGRO" class="officersDetail"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-3">
                                    <button type="button" class="btn red existingFiles">
                                        <i class="fa fa-files-o"></i>
                                        <span th:text="#{files.list}"> </span>
                                    </button>
                                </div>
                                <div class="col-md-9 existingFilesBlock" style="display:none;">
                                    <div class="form-group">
                                        <label>ইতঃপূর্বের সংযুক্তিসমূহ</label>
                                        <div class="input-group">
                                            <div class="icheck-list">

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <div class="row" id="sendToSubOfficeFileUp">
                        <div class="form-body">
                            <div class="col-md-12">
                                <form id="fileuploadSendToSubOfficeGRO" action="api/file/upload" method="POST" enctype="multipart/form-data" class="">
                                    <div th:replace="fileUpload :: fileUploadHtml">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline btn-primary btn-action" id="sentForOpinionAppeal" onclick="sendToSubOfficeGRO('SendToSubOfficeGRO')"><span th:text="#{send}"></span></button>
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal" th:text="#{cancel}"></button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
    </div>

    <div id="rejectConfirmation" class="modal fade bs-modal-lg" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" th:text="#{garbage}"><i class="icon-close"></i></h4>
                </div>
                <div class="modal-body">

                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="control-label" th:text="#{reason.to.reject}">নথিজাত এর কারণ</label>
                                <div class="summernote" id="rejectionNote"></div>
                            </div>
                        </div>
                    </div>

                    <div class="row" id="rejectFileUp">
                        <div class="form-body">
                            <div class="col-md-12">
                                <form id="fileuploadReject" action="api/file/upload" method="POST" enctype="multipart/form-data" class="">
                                    <div th:replace="fileUpload :: fileUploadHtml">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn green btn-primary btn-action" onclick="rejectComplaint();" th:text="#{reject.complaint}">নথিজাত</button>
                    <button type="button" data-dismiss="modal" class="btn btn-outline dark" th:text="#{cancel}">Back</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade bs-modal-lg" id="closeComplaint" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" th:text="#{closed}"><i class="icon-like"></i></h4>
                </div>
                <div class="modal-body">
                    <div class="form-group" id="closeOptions"></div>
                    <div>&nbsp</div>
                    <div class="form-group" id="departmentalActionDiv"></div>
                    <div>&nbsp</div>
                    <div class="form-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="control-label">অভিযোগ নিষ্পত্তি কর্মকর্তা-এর সিদ্ধান্ত<span class="required">*</span>  </label>
                                    <div class="summernote" id="closingNoteGRODecision"></div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label">অভিযোগ উৎপত্তির মূল কারণ<span class="required">*</span> </label>
                                    <div class="summernote" id="closingNoteMainReason"></div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label">অভিযোগের পুনরাবৃত্তি রোধে পরামর্শ </label>
                                    <div class="summernote" id="closingNoteSuggestion"></div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-3">
                            <button type="button" class="btn red existingFiles">
                                <i class="fa fa-files-o"></i>
                                <span th:text="#{files.list}"> </span>
                            </button>
                        </div>
                        <div class="col-md-9 existingFilesBlock" style="display:none;">
                            <div class="form-group">
                                <label>ইতঃপূর্বের সংযুক্তিসমূহ</label>
                                <div class="input-group">
                                    <div class="icheck-list">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" id="closeFileUp">
                        <div class="form-body">
                            <div class="col-md-12">
                                <form id="fileuploadClose" action="api/file/upload" method="POST" enctype="multipart/form-data" class="">
                                    <div th:replace="fileUpload :: fileUploadHtml">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn green" onclick="closeComplaint();" th:text="#{close.case}"></button>
                    <button type="button" data-dismiss="modal" class="btn btn-outline dark" th:text="#{cancel}"></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade bs-modal-full" id="modalInvestigation" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-dialog modal-full">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title" th:text="#{investigation}"><i class="icon-bubble"></i></h4>
                </div>
                <div class="modal-body">
                    <form class="horizontal-form">
                        <div class="form-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="control-label"><span th:text="#{note.colon}"></span></label>
                                        <div class="summernote" id="investigationNote"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <form class="horizontal-form">
                        <div class="form-body">
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-5">
                                        <label class="control-label" th:text="#{choose.post}"></label>
                                        <div id="investigationCommitteeSelection" class="tree-demo"></div>
                                    </div>
                                    <div class="col-md-7">
                                        <label class="control-label" th:text="#{committee}">Committee:</label>
                                        <div class="table-responsive">
                                            <table class="table table-hover" id="investigationCommittee">
                                                <thead>
                                                <tr>
                                                    <th>পদ</th>
                                                    <th>নাম</th>
                                                    <th>কমিটি প্রধান</th>
                                                </tr>
                                                </thead>
                                                <tbody>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <!--add tree view of office-->
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn green btn-primary btn-action" th:text="#{investigation.start}" onclick="initiateInvestigation()"></button>
                    <button type="button" data-dismiss="modal" class="btn btn-outline dark" th:text="#{cancel}"></button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    <div class="modal fade bs-modal-lg" id="modalInvestigationReport" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title"><i class="icon-bubble"></i> <span th:text="#{investigation.report}"></span>
                    </h4>
                </div>
                <div class="modal-body">
                    <form class="horizontal-form">
                        <div class="form-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label class="control-label"><span th:text="#{report.colon}"></span></label>
                                        <div class="summernote" id="sendingReport"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>



                    <div class="row">
                        <div class="col-lg-3">
                            <button type="button" class="btn red existingFiles">
                                <i class="fa fa-files-o"></i>
                                <span th:text="#{files.list}"> </span>
                            </button>
                        </div>
                        <div class="col-md-9 existingFilesBlock" style="display:none;">
                            <div class="form-group">
                                <label>ইতঃপূর্বের সংযুক্তিসমূহ</label>
                                <div class="input-group">
                                    <div class="icheck-list">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" id="investigationReportFileUp">
                        <div class="form-body">
                            <div class="col-md-12">
                                <span style="color: crimson;"><br>তদন্ত প্রতিবেদন জমা দেওয়ার আগে অনুগ্রহ পূর্বক আপনার স্বাক্ষর আপলোড করুন। বি.দ্র. আপনার যুক্ত করা সমস্ত সংযুক্তির মধ্যে আপনার স্বাক্ষরটি অবশ্যই প্রথম সংযুক্তি হতে হবে। </span>
                                <form id="fileuploadReport" action="api/file/upload" method="POST" enctype="multipart/form-data" class="">
                                    <div th:replace="fileUpload :: fileUploadHtml">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline btn-primary btn-action" data-dismiss="modal" id="sendReport" onclick="sendReport()"><span th:text="#{report.submission}"></span></button>
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal"><span
                            th:text="#{cancel}"></span></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade bs-modal-lg" id="signatureUpload" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-doalog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                </div>
                <div class="modal-body">
                    <div class="row" id="investigationReportSignatureUp">
                        <div class="form-body">
                            <div class="col-md-12">
                                <form id="fileUpSigReport" action="api/file/upload" method="POST" enctype="multipart/form-data" class="">
                                    <div th:replace="fileUpload :: fileUploadHtml">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline btn-primary btn-action" onclick="submitReportWithSignature()"><span th:text="#{send}"></span></button>
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal"><span
                            th:text="#{cancel}"></span></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade bs-modal-lg" id="modalRequestDocument" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title"><i class="icon-bubble"></i> <span th:text="#{investigation.element.request}"></span>
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="form-body">
                        <div class="form-group">
                            <label class="control-label col-md-12">সাক্ষ্য-প্রমাণ প্রদানকারী বাছাই করুন</label>
                            <div class="row">
                                <div class="col-md-12">
                                    <select id="evidenceProviderSelect" class="bs-select form-control" multiple>
                                        <option value="SO"  th:if="${serviceIsNull == false}">সেবাদানকারী কর্মকর্তা </option>
                                        <option value="COMPLAINANT" selected="selected">অভিযোগকারী </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="progress-extended"> &nbsp;</div>
                        <div class="form-group">
                            <label class="control-label"><span th:text="#{note.colon}"></span></label>
                            <div class="summernote" id="requestMaterialNote"></div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline btn-primary btn-action" id="reqSendButton" onclick="requestForMaterial()"><span th:text="#{send}"></span></button>
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal"><span
                            th:text="#{cancel}"></span></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade bs-modal-lg" id="modalAskForHearing" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title"><i class="icon-bubble"></i> <span th:text="#{evidence.proof}"></span>
                    </h4>
                </div>
                <div class="modal-body">
                    <label class="control-label"> <span th:text="#{hearing.date}"></span></label>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="input-group input-medium date datetimepicker" id='hearingDate' data-date-format="dd-mm-yyyy" data-date-start-date="+0d">
                                <input type="text" class="form-control" readonly>
                                <span class="input-group-btn">
                                    <button class="btn default" type="button">
                                        <i class="fa fa-calendar"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-12">সাক্ষী বাছাই করুন</label>
                        <div class="col-md-12">
                            <select id="noticeReceiver" class="bs-select form-control" multiple>
                                <option value="SO" selected="selected" th:if="${serviceIsNull == false}">সেবাদানকারী কর্মকর্তা </option>
                                <option value="COMPLAINANT" selected="selected">অভিযোগকারী </option>
                            </select>
                        </div>
                        <label class="control-label"><span th:text="#{note.colon}"></span></label>
                        <div class="summernote" id="hearingNote"></div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline btn-primary btn-action" id="makeHearingButton" onclick="makeHearingNotice()"><span th:text="#{send}"></span>
                    </button>
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal"><span
                            th:text="#{cancel}"></span></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade bs-modal-lg" id="modalTakeHearing" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title"><i class="icon-bubble"></i> <span th:text="#{hearing}"></span>
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="control-label"><span th:text="#{note.colon}"></span></label>
                        <div class="summernote" id="hearingSpeech"></div>
                    </div>
                    <div class="row">
                        <div class="col-lg-3">
                            <button type="button" class="btn red existingFiles">
                                <i class="fa fa-files-o"></i>
                                <span th:text="#{files.list}"> </span>
                            </button>
                        </div>
                        <div class="col-md-9 existingFilesBlock" style="display:none;">
                            <div class="form-group">
                                <label>ইতঃপূর্বের সংযুক্তিসমূহ</label>
                                <div class="input-group">
                                    <div class="icheck-list">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row" id="takeHearingFileUp">
                        <div class="form-body">
                            <div class="col-md-12">
                                <form id="fileuploadHearing" action="api/file/upload" method="POST" enctype="multipart/form-data" class="">
                                    <div th:replace="fileUpload :: fileUploadHtml">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline btn-primary btn-action" id="noteHearings" onclick="takeHearingNote()"><span th:text="#{save}"></span></button>
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal"><span
                            th:text="#{cancel}"></span></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade bs-modal-lg" id="modalProvideEvidence" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title"><i class="icon-bubble"></i> <span th:text="#{investigation.element.receipt}"></span>
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="summernote" id="fileSendNote"></div>

                    <div class="row">
                        <div class="col-lg-3">
                            <button type="button" class="btn red existingFiles">
                                <i class="fa fa-files-o"></i>
                                <span th:text="#{files.list}"> </span>
                            </button>
                        </div>
                        <div class="col-md-9 existingFilesBlock" style="display:none;">
                            <div class="form-group">
                                <label>ইতঃপূর্বের সংযুক্তিসমূহ</label>
                                <div class="input-group">
                                    <div class="icheck-list">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row" id="provideEvidenceFileUp">
                        <div class="form-body">
                            <div class="col-md-12">
                                <form id="fileuploadEvidence" action="api/file/upload" method="POST" enctype="multipart/form-data" class="">
                                    <div th:replace="fileUpload :: fileUploadHtml">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline btn-primary btn-action" id="provideEvidence" onclick="provideEvidence()"><span th:text="#{send}"></span></button>
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal"><span
                            th:text="#{cancel}"></span></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade bs-modal-lg" id="modalSeeHearingDate" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title"><i class="icon-bubble"></i> <span th:text="#{hearing.date.see}"></span>
                    </h4>
                </div>
                <div class="modal-body">
                    <label class="control-label">নোট:</label>
                    <div class="summernote" id="optionalNote"></div>

                    <div class="row">
                        <div class="col-lg-3">
                            <button type="button" class="btn red existingFiles">
                                <i class="fa fa-files-o"></i>
                                <span th:text="#{files.list}"> </span>
                            </button>
                        </div>
                        <div class="col-md-9 existingFilesBlock" style="display:none;">
                            <div class="form-group">
                                <label>ইতঃপূর্বের সংযুক্তিসমূহ</label>
                                <div class="input-group">
                                    <div class="icheck-list">

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" id="seeHearingFileUp">
                        <div class="form-body">
                            <div class="col-md-12">
                                <form id="fileuploadSeeHearing" action="api/file/upload" method="POST" enctype="multipart/form-data" class="">
                                    <div th:replace="fileUpload :: fileUploadHtml">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline btn-primary btn-action" id="seeHearingDate" onclick="seeHearingDate()"><span th:text="#{accept}"></span></button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalAppeal" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title"><i class="icon-bubble"></i> আপনি কি নিশ্চিত যে আপনি আপিল করতে চান?</h4>
                </div>
                <div class="modal-body">
                    <div class="form-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="control-label">নোট:</label>
                                    <div class="summernote" id="appealNote" style="display: none;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix">&nbsp;</div>
                    </div>
                    <!--</form>-->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn dark btn-outline btn-primary btn-action" onclick="appealToOfficer()">আপিল করুন</button>
                    <button type="button" class="btn dark btn-outline" data-dismiss="modal">বন্ধ করুন</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    <div id="modalSendForPermission" class="modal fade bs-modal-lg" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title"><i class="icon-bubble"></i> অনুমতির জন্য প্রেরণ  </h4>
                </div>
                <div class="modal-body">
                    <div class="form-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <div class="summernote" id="SendForPermissionNote"></div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn green btn-primary btn-action" onclick="SendForPermission();">
                        প্রেরণ করুন
                    </button>
                    <button type="button" data-dismiss="modal" class="btn btn-outline dark">বন্ধ করুন</button>
                </div>
            </div>
        </div>
    </div>

    <div id="modalGivePermission" class="modal fade bs-modal-lg" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title"><i class="icon-bubble"></i> অনুমতি দিন </h4>
                </div>
                <div class="modal-body">
                    <div class="form-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="control-label"><span th:text="#{note.colon}"></span></label>
                                    <div class="summernote" id="givePermissionNote"></div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn green btn-primary btn-action" onclick="givePermission();">
                        প্রেরণ করুন
                    </button>
                    <button type="button" data-dismiss="modal" class="btn btn-outline dark">বন্ধ করুন</button>
                </div>
            </div>
        </div>
    </div>

    <div id="modalGiveOpinion" class="modal fade bs-modal-lg" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title"><i class="icon-bubble"></i> মতামত দিন </h4>
                </div>
                <div class="modal-body">
                    <div class="form-body">

                        <div class="progress-extended"> &nbsp;</div>
                        <div class="form-group">
                            <label class="control-label">সেবা প্রদান করা হয়েছে/হয়নি/অসদাচরণের উপাদান আছে কি-না ইত্যাদি বিষয়ে বিস্তারিত উল্লেখ করুন</label>
                            <div class="summernote" id="giveOpinionNote"></div>
                            <div class="progress-extended"> &nbsp;</div>

                            <div class="form-group">
                                <label class="control-label">অসদাচরণ/দায়িত্বে অবহেলার উপাদান থাকলে সংশ্লিষ্ট কর্মকর্তা-কর্মচারিগণের নাম সিলেক্ট</label>
                                <div id="jstreegiveOpinion" class="tree-demo"></div>
                            </div>

                            <div class="progress-extended"> &nbsp;</div>

                            <div class="row">
                                <div class="col-lg-3">
                                    <button type="button" class="btn red existingFiles">
                                        <i class="fa fa-files-o"></i>
                                        <span th:text="#{files.list}"> </span>
                                    </button>
                                </div>
                                <div class="col-md-9 existingFilesBlock" style="display:none;">
                                    <div class="form-group">
                                        <label>ইতঃপূর্বের সংযুক্তিসমূহ</label>
                                        <div class="input-group">
                                            <div class="icheck-list">

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <form id="fileuploadGiveOpinion" action="api/file/upload" method="POST" enctype="multipart/form-data" class="">
                                <div th:replace="fileUpload :: fileUploadHtml">
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn green btn-primary btn-action" onclick="giveOpinionWithAttachment();">প্রেরণ করুন</button>
                    <button type="button" data-dismiss="modal" class="btn btn-outline dark">বন্ধ করুন</button>
                </div>
            </div>
        </div>
    </div>

    <div id="modalGuidanceForService" class="modal fade bs-modal-lg" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title"><i class="icon-bubble"></i> সেবা প্রদানের নির্দেশনা </h4>
                </div>
                <div class="modal-body">
                    <div class="form-body">
                        <label class="control-label">সেবা প্রদানের নির্দিষ্ট তারিখ বাছাই করুন</label>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="input-group input-medium date date-picker" id='dateServiceGuidance' data-date-format="dd-mm-yyyy" data-date-start-date="+0d">
                                    <input type="text" class="form-control" readonly>
                                    <span class="input-group-btn">
                                        <button class="btn default" type="button">
                                            <i class="fa fa-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <div class="progress-extended"> &nbsp;</div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <div class="summernote" id="guidanceForServiceNote"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div th:if="${serviceIsNull == true}" class="form-group">
                        <div class="row">
                            <div class="col-md-6">
                                <label class="control-label"> Select The person to give guidance</label>
                                <div id="jstreeGuidanceForService" class="tree-demo"></div>
                            </div>
                            <div class="col-md-6">
                                <label><span th:text="#{guidanceReceiver}"></span></label>
                                <div class="form-group">
                                    <div class="input-group">
                                        <div id="guidanceReceiver"></div>
                                    </div>
                                </div>
                            </div>
                            <!--add tree view of office-->
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" data-dismiss="modal" class="btn green btn-primary btn-action" onclick="GuidanceForService();">
                        প্রেরণ করুন
                    </button>
                    <button type="button" data-dismiss="modal" class="btn btn-outline dark">বন্ধ করুন</button>
                </div>
            </div>
        </div>
    </div>

    <div aria-hidden="true" class="modal fade bs-modal-lg" id="modalSendToAppealOfficer" role="basic" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button aria-hidden="true" class="close" data-dismiss="modal" type="button"></button>
                    <h4 class="modal-title">আপীল কর্মকর্তা এর নিকট প্রেরণ </h4>
                </div>
                <div class="modal-body">
                    <div class="form-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label class="control-label">আপিল কর্মকর্তার নিকট প্রেরণের কারণ লিপিবদ্ধ করুন:</label>
                                    <div class="summernote" id="sentToAppealOfficerNote" style="display: none;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix">&nbsp;</div>
                    </div>
                    <!--</form>-->
                </div>
                <div class="modal-footer">
                    <button class="btn dark btn-outline btn-primary btn-action" onclick="sendToAppealOfficer();" type="button">প্রেরণ করুন</button>
                    <button class="btn dark btn-outline" data-dismiss="modal" type="button">বাতিল</button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>

    <div class="modal fade bs-modal-lg" id="modalConfirmReport" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title"><i class="icon-bubble"></i> তদন্ত রিপোর্ট সম্পর্কে সহমত/দ্বিমত প্রকাশ করুন  </h4>
                </div>

                <div class="modal-body">
                    <span><br>তদন্ত প্রতিবেদন জমা দেওয়ার আগে অনুগ্রহ পূর্বক আপনার স্বাক্ষর আপলোড করুন। বি.দ্র. আপনার যুক্ত করা সমস্ত সংযুক্তির মধ্যে আপনার স্বাক্ষরটি অবশ্যই প্রথম সংযুক্তি হতে হবে। </span>
                    <div class="row" id="committeeMemberSignatureUp">
                        <div class="form-body">
                            <div class="col-md-12">
                                <form id="fileuploadCommitteeMember" action="api/file/upload" method="POST" enctype="multipart/form-data" class="">
                                    <div th:replace="fileUpload :: fileUploadHtml">
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" data-dismiss="modal" class="btn green " onclick="confirmReport('AGREED');">
                        সহমত প্রকাশ করুন
                    </button>
                    <button type="button" data-dismiss="modal" class="btn btn-outline dark" onclick="confirmReport('DISAGREED');">দ্বিমত প্রকাশ করুন</button>
                </div>

            </div>
        </div>
    </div>

    <div class="modal fade bs-modal-lg" id="modalGrievanceListOfCitizen" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title"><span><th:block th:text="#{grievance.list.of.citizen}"></th:block></span>  </h4>
                </div>
                <div class="modal-body">
                    <div class="form-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <div class="full-height-content-body">
                                        <table class="table table-striped table-bordered" id="tblGrievanceListOfCitizen">
                                            <thead>
                                            <tr>
                                                <th th:text="#{casenumber}"></th>
                                                <th th:text="#{track.num}"></th>
                                                <th th:text="#{grievance.date.table.header}"></th>
                                                <th th:text="#{grievances.subject.table.header}"></th>
                                                <th th:text="#{grievances.current.status.table.header}"></th>
                                                <!--<th> &nbsp;</th>-->
                                            </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix">&nbsp;</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button th:if="${!isComplainantBlacklisted}" class="btn btn-danger btn-md" type="button" id="btnBlacklist" th:disabled="${isBlacklisted==true}"><i class="icon-ban"></i> <span th:text="#{add.to.blacklist}"></span></button>
                    <button type="button" data-dismiss="modal" class="btn btn-outline dark"> <th:block th:text="#{cancel}"></th:block> </button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade bs-modal-lg" id="modalBlacklistCItizen" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                    <h4 class="modal-title"><span><th:block th:text="#{add.to.blacklist}"></th:block></span>  </h4>
                </div>
                <div class="modal-body">
                    <label th:text="#{reason.blacklist}"></label>
                    <div class="summernote" id="blacklistReason"></div>
                </div>

                <div class="modal-footer">
                    <button th:if="${!isComplainantBlacklisted}" class="btn btn-danger btn-md" type="button" onclick="blacklistCitizen()" th:disabled="${isBlacklisted==true}"><i class="icon-ban"></i> <span th:text="#{add.to.blacklist}"></span></button>
                    <button type="button" data-dismiss="modal" class="btn btn-outline dark"> <th:block th:text="#{cancel}"></th:block> </button>
                </div>
            </div>
        </div>

    </div>

    <div class="modal fade bs-modal-lg" id="attachedFileModal" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                </div>
                <div class="modal-body">
                    <div class="mt-element-list">
                        <div class="mt-list-head list-simple">
                            <div class="list-head-title-container">
                                <div class="list-date">&nbsp;</div>
                                <h3 class="list-title"> <span th:text="#{attach.colon}"></span> </h3>
                            </div>
                        </div>
                        <div class="mt-list-container list-simple">
                            <table id="attachedFilesList" class="table table-striped">
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="ajaxProcessingModal" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <img src="../assets/global/img/loading-spinner-grey.gif" alt="" class="loading">
                    <span th:text="#{processing}"> &nbsp;&nbsp;</span>
                </div>
            </div>
        </div>
    </div>

    <input type="hidden" id="sendToAnotherOfficeNote" name="sendToAnotherOfficeNote" th:value="#{send.another.office.note}"/>

    <div class="modal fade" id="fileViewerModal" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                </div>
                <div class="modal-body"></div>
                <div class="modal-footer">
                    <button class="btn dark btn-outline" data-dismiss="modal" type="button">বন্ধ করুন</button>
                </div>
            </div>
        </div>
    </div>
    <div th:replace="fileUpload :: fileUploadTemplateScriptGrievanceDetails"></div>
    <div th:replace="fileSettingsInputTemplate :: fileSettingsInputTemplate"></div>
</div>

<div th:fragment="viewGrievancesDetailsIncludeScript" th:remove="tag">
    <script src="/assets/global/plugins/bootstrap-selectsplitter/bootstrap-selectsplitter.min.js" type="text/javascript"></script>
    <script src="/assets/global/scripts/app.min.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js" type="text/javascript"></script>
    <script src="/assets/pages/scripts/components-bootstrap-select-splitter.min.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/jstree/dist/jstree.min.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/bootstrap-select/js/bootstrap-select.min.js" type="text/javascript"></script>
    <script src="/assets/pages/scripts/components-bootstrap-select.min.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/select2/js/select2.full.min.js" type="text/javascript"></script>
    <script src="/assets/global/scripts/datatable.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
    <script src="/assets/global/plugins/bootstrap-table/bootstrap-table.min.js" type="text/javascript"></script>
    <script src="/assets/global/scripts/star-rating.min.js" type="text/javascript"></script>
    <script src="/assets/global/scripts/knockout-3.4.2.js" type="text/javascript"></script>
    <div th:replace="fileUpload :: fileUploadIncludeScript"></div>
    <div th:replace="fileSettingsInputTemplate :: fileSettingsInputTemplateScript"></div>
    <th:block th:replace="officeSelection :: officeSelectionScript"></th:block>
    <script src="assets/global/scripts/printThis.js"></script>
    <script src="/assets/global/plugins/easy-autocomplete/jquery.easy-autocomplete.min.js" type="text/javascript"></script>
</div>




<script th:inline="javascript" th:fragment="viewGrievancesDetailsScript">
    $("#header_notification_bar a").addClass("active");
    var serviceNameGlobal =null;
    var soOrgGlobal = null;
    var soSelectFlag = false;
    var receiverArray = new Array();
    var receiverArraySub = new Array();
    var committeeArray = new Array();
    var ccArray = new Array();
    var groPOST = null;
    var soPOST = null;
    var complainantId = null;
    var complaintStatus = "NEW";
    var isOtherService = false;

    function checkNotAllowedFiles(obj, buttonId){
        var numberOfDisallowedFiles = $(obj).find("strong.error.label.label-danger").length;
        if (numberOfDisallowedFiles == 1){
            $(buttonId).removeAttr('disabled');
        } else {
            $(buttonId).attr('disabled','disabled');
        }
    }

    function getFileDTO(fileUploadDom){
        var files = new Array();
        $.each(fileUploadDom, function() {
            files.push({
                name: $(this).find("input[name='fileNameByUser']").val(),
                url: $(this).find("a").attr("href")
             });
        });
        return files;
    }

    function checkEmptyFileNameField(files) {
        var boolvalue = false;

        $.each(files, function(index, value) {
            var text = value.name;
            if (text == "") {
                boolvalue = true;
            }
        });
        return boolvalue;
      }

    function CallAjax(url, onSuccess) {
        $.ajax({
            type: "GET",
            url: url,
            dataType: "json",
            success: onSuccess,
        });
    }

    String.prototype.toBanglaNumber = function () {
        var engNum = this;
        var bngNum = '';
        var bngDigits = ['০', '১', '২', '৩', '৪', '৫', '৬', '৭', '৮', '৯'];
        engNum.split('').forEach(function (digit) {
            var index = parseInt(digit);
            bngNum += isNaN(index) ? digit : bngDigits[index];
        });
        return bngNum;
    };

    String.prototype.toEnglishNumber = function () {
        var bngNum = this;
        var engNum = '';
        var bngDigits = ['০', '১', '২', '৩', '৪', '৫', '৬', '৭', '৮', '৯'];
        bngNum.split('').forEach(function (digit) {
            var index = bngDigits.indexOf(digit);
            engNum += index >= 0 ? index : digit;
        });
        return engNum;
    };

    $('#tblGrievanceListOfCitizen').dataTable({
        "language": {
            "aria": {
                "sortAscending": ": activate to sort column ascending",
                "sortDescending": ": activate to sort column descending"
            },
            "emptyTable": "দুঃখিত, কোনো তথ্য পাওয়া যায়নি ",
            "info": "Showing _START_ to _END_ of _TOTAL_ records",
            "infoEmpty": "No records found",
            "infoFiltered": "(filtered1 from _MAX_ total records)",
            "lengthMenu": "Show _MENU_",
            "search": "ফিল্টার:",
            "zeroRecords": "No matching records found",
            "paginate": {
                "previous": "Prev",
                "next": "Next",
                "last": "Last",
                "first": "First"
            }
        },
        "bPaginate": false,
        "bFilter": false,
        "bInfo": false,
        "bAutoWidth": false,
        "columnDefs": [{
                'orderable': false,
                'targets': [0,1,2,3,4]
            },
            {
                "searchable": false,
                "targets": [0,1,2,3,4]
            },
            {
                "width": "15%",
                "targets": 0
            }
        ],
        columns: [{
                data: "caseNumberBangla"
            },
            {
                data: "trackingNumberBangla"
            },
            {
                data: "dateBangla"
            },
            {
                data: "subject"
            },
            {
                data: "statusBangla"
            }
        ],
        "order": [],
        "fnRowCallback": function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
            $(nRow).addClass('text-center');
        }
    });

    function previewGrsUserManual(clickedLink, e){
        if (e) {
            e.preventDefault();
        }
        $("#grsUserManualModal").modal("show");
    }

    function constructFilePage(data, divId) {
        $select = $("#" + divId);
        $select.html("");

        if (data == null || data.length == 0) {
            $select.append("কোন ফাইল সংযুক্তি নেই");
        } else {
            $select.html('<thead><tr><th data-field=\"name\">ফাইলের নাম</th><th data-field=\"type\">ফাইলের ধরন</th><th data-field=\"url\" style=\"text-align: center;\">ফাইলের প্রিভিউ লিংক</th><th data-field=\"url\" style=\"text-align: center;\">ফাইলের ডাউনলোড লিংক</th></tr></thead><tbody></tbody>');
            if (data.length > 0) {
                var attrib = "";
                var type = "";
                $.each(data, function(key, val) {
                    if (val.url.toLowerCase().endsWith('.png/') || val.url.toLowerCase().endsWith('.jpeg/') || val.url.toLowerCase().endsWith('.jpg/') || val.url.toLowerCase().endsWith('.bmp/') || val.url.toLowerCase().endsWith('.gif/')) {
                        attrib = 'data-lightbox=\"' + val.name + '\"';
                        type = "Image";
                    } else if (val.url.toLowerCase().endsWith('.pdf/') || val.url.toLowerCase().endsWith('.txt/') || val.url.toLowerCase().endsWith('.xls/') || val.url.toLowerCase().endsWith('.xlsx/') || val.url.toLowerCase().endsWith('.doc/') || val.url.toLowerCase().endsWith('.docx/')) {
                        attrib = 'class=\"media-embed\" onclick=\"javascript:previewFile(this, event)\"';
                        type = "Document";
                    } else if (val.url.toLowerCase().endsWith('.mp3/')) {
                        attrib = 'class=\"media-audio\" onclick=\"javascript:previewFile(this, event)\"';
                        type = "Audio/Video";
                    } else if (val.url.toLowerCase().endsWith('.mp4/')) {
                        attrib = 'class=\"media-video\" onclick=\"javascript:previewFile(this, event)\"';
                        type = "Audio/Video";
                    }

                    $select.append('<tr><td><span class=\"uppercase\"><a ' + attrib + ' href=\"http://' + document.location.host + val.url + '\\" data-asset=\"false\">' +
                        val.name + '</a></span></td><td>' + type + '</td><td style=\"text-align: center;\"><a ' + attrib + ' href=\"http://' + document.location.host + val.url + '\\"><i class=\"fa fa-television\"></i></a></td>' +
                        '<td style=\"text-align: center;\"><a href=\"http://' + document.location.host + val.url + '\\" target=\"_blank\"><i class=\"fa fa-download\"></i></a></td></tr>');
                });
            }
        }
    }

    function constructAppealButton(data) {
        /*<![CDATA[*/
        var isGrsUser = /*[[${grsUser}]]*/ true;
        var appealButtonFlag = /*[[${appealButtonFlag}]]*/ true;
        var isOISFComplainant = /*[[${isOISFComplainant}]]*/ true;
        var soAppeal = /*[[${soAppealOption}]]*/ false;
        /*]]>*/

        if ((isGrsUser || isOISFComplainant || soAppeal) && appealButtonFlag) {
            $("#appealButton").removeClass("hidden");
        } else {
            $("#appealButton").remove();
        }

    }

    function constructReviveButton() {
        /*<![CDATA[*/
        var reviveFlag = /*[[${reviveFlag}]]*/ false;
        /*]]>*/

        if (reviveFlag) {
            $("#reviveComplaint").removeClass("hidden");
        }
    }

    function isNullOrEmpty(object) {
        if (object == null)
            return true;
        if ($.isEmptyObject(object))
            return true;
        return false;
    }

    function constructActionButton(data) {
        complaintStatus = data.grievance.statusEnglish;
        if (!isNullOrEmpty(data.menuOptions) && !isNullOrEmpty(data.menuOptions.grievanceMenus)) {
            $("#actionButton").removeClass("hidden");
            $select = $("#actionButtonMenus");
            $select.html("");
            $.each(data.menuOptions.grievanceMenus, function(key, val) {
                var languageCode = $.cookie("lang");
                var text;
                if (languageCode == null || languageCode == "fr") {
                    text = val.nameBangla;
                } else if (languageCode == "en") {
                    text = val.nameEnglish;
                }
                $select.append("<li><a data-toggle=\"modal\" href=\"" + val.link + "\"><i class=\"" + val.iconLink + "\"></i> " + text + "</a></li>");
            });
        }
        /*<![CDATA[*/
        var isGrsUser = /*[[${grsUser}]]*/ false;
        /*]]>*/
        if (!isGrsUser) {
            initializeJstree(data.menuOptions);
        }
    }

    function constructDetails(data) {
        var submittedDate = data.grievance.submissionDateBangla.split(" ")[0];
        var complaintDate = data.grievance.dateBangla.split(" ")[0];
        var service = data.service;
        var serviceTime = service.serviceTime;

        $("#viewServiceDetails").attr("data-id", service.id);
        $("#serviceDate").html(submittedDate);
        $("#dateCreated").html(complaintDate);
        $("#officeName").html(data.officeNameBangla);
        $("#serviceName").html(service.serviceNameBangla);
        $("#officeUnitName").text(data.grievance.officeUnitNameBangla);
        $("#serviceOfficerDesignation").text(data.grievance.serviceOfficerPostBangla);
        $("#serviceNameInModal").val(service.serviceNameBangla);
        $("#title").html(data.grievance.subject);
        $("#description").html(data.details);
        $(".trackingNumber").html(data.grievance.trackingNumberBangla);
        $("#status").html(data.grievance.statusBangla);
        $("#serviceProcedure").text(service.serviceProcedureBangla);
        $("#serviceDocumentsAndLocation").text(service.documentAndLocationBangla);
        $("#servicePayment").text(service.paymentMethodBangla);
        $("#serviceDeadlineDays").text(serviceTime ? ("" + serviceTime).toBanglaNumber() : "");
        initializeResponsible(service.responsible);
        initializeComplainant(data.complainant);
        constructActionButton(data);
        constructCloseModal(data);
        serviceNameGlobal = service.serviceNameBangla;
        populateSendForOpinionSummerNote(null, 'SendToOfficer', service.serviceNameBangla);
        populateSendForOpinionSummerNote(null, 'SendToSubOfficeGRO', service.serviceNameBangla);
        populateAendToAppealOfficerSummerNote(service.serviceNameBangla, data.officeNameBangla);
        groPOST = data.groPost;
        soPOST = data.soPost;
        if (data.userType == "OISF_USER") {
            var entry = "কেস নম্বর: ";
            if (data.grievance.caseNumberBangla != null) {
               $(".trackingNumber").next().after("<span>" + entry + data.grievance.caseNumberBangla + "</span><br />");
            }
            $(".caption-helper.complaintType").text("ধরন: " + data.grievance.typeBangla);
            //getComplaintMovement();
        } else {
            var entry = "ট্র্যাকিং নম্বর: ";
            $(".caption-helper.caseNumber").text(entry + data.grievance.trackingNumberBangla);
            //getComplainantComplaintMovements();
        }
        constructAppealButton(data);
        constructReviveButton();
        //emptyAllTree();
        unblockUI();
        bindViewServiceDetailsAction();
    }

    function bindViewServiceDetailsAction() {
        $("#viewServiceDetails").on("click", function () {
            var grievanceId = getUrlParameter('id');
            var citizensCharterId = $(this).attr("data-id");
            var uri = "/api/grievances/" + grievanceId + "/citizens-charter/" + citizensCharterId;
            App.blockUI();
            $.ajax({
                url: uri,
                type: "GET",
                dataType: "json",
                success: function (citizensCharter) {
                    var isEnglish = (languageCode == "en"),
                        nameSuffix = isEnglish ? "English" : "Bangla",
                        serviceTime = citizensCharter.serviceTime ? citizensCharter.serviceTime : 0,
                        modal = $("#modalServiceDetails");
                    modal.find(".service-name").text(citizensCharter["serviceName" + nameSuffix]);
                    modal.find(".service-procedure").text(citizensCharter["serviceProcedure" + nameSuffix]);
                    modal.find(".service-document-and-location").text(citizensCharter["documentAndLocation" + nameSuffix]);
                    modal.find(".service-payment-method").text(citizensCharter["paymentMethod" + nameSuffix]);
                    modal.find(".service-time").text(isEnglish ? serviceTime : ("" + serviceTime).toBanglaNumber());

                    var responsible = citizensCharter.responsible[0],
                        officeUnitInfo = responsible ? responsible.officeUnitWithDesignations[0] : "",
                        phoneNumber = responsible ? responsible["phoneNumber"] : "";
                    modal.find(".service-officer").text(responsible["name"]);
                    modal.find(".service-officer-phone").text(isEnglish ? phoneNumber.toEnglishNumber() : phoneNumber.toBanglaNumber());
                    modal.find(".service-officer-email").text(responsible["email"]);
                    modal.find(".service-officer-designation").text(officeUnitInfo["designation"]);
                    modal.find(".service-officer-unit-name").text(officeUnitInfo["officeUnitName" + nameSuffix]);
                    modal.find(".grievance-count").text((citizensCharter["countGrievanceByOffice"] ? ("" + citizensCharter["countGrievanceByOffice"]) : "0").toBanglaNumber());

                    modal.modal("show");
                },
                complete: function (response) {
                    App.unblockUI();
                }
            });
        });
    }

    function getAppealClosedOptionsAfterOpinionOK() {
        return '<select class=\"form-control\" id=\"closeState\">' +
            '<option selected=\"\" style=\"display: none;\" value=\"\">--বন্ধ করার কারণ নির্বাচন করুন--</option>' +
            '<option value=\"APPEAL_CLOSED_SERVICE_GIVEN\">সেবা প্রদত্ত </option>' +
            '<option value=\"APPEAL_CLOSED_ANSWER_OK\">উত্তর সন্তোষজনক</option>' +
            '<option value=\"APPEAL_CLOSED_INSTRUCTION_EXECUTED\">নির্দেশনা প্রতিপালিত</option>' +
            '<option value=\"APPEAL_CLOSED_OTHERS\">অন্যান্য </option>' +
            '</select>';
    }

    function getAppealClosedOptionsAfterOpinionNotOK() {
        return '<select class=\"form-control\" id=\"closeState\">' +
            '<option selected=\"\" style=\"display: none;\" value=\"\">--বন্ধ করার কারণ নির্বাচন করুন--</option>' +
            '<option value=\"APPEAL_CLOSED_ACCUSATION_PROVED\">অভিযোগের সত্যতা পাওয়া গিয়েছে</option>' +
            '<option value=\"APPEAL_CLOSED_ACCUSATION_INCORRECT\">অভিযোগের সত্যতা পাওয়া যায়নি </option>' +
            '<option value=\"APPEAL_CLOSED_OTHERS\">অন্যান্য </option>' +
            '</select>';
    }

    function constructCloseModal(data) {
        /*if (data.grievance.statusEnglish.startsWith("APPEAL")) {
            switch (data.grievance.statusEnglish) {
                case "APPEAL_STATEMENT_ANSWERED":
                    document.getElementById("closeOptions").innerHTML = getAppealClosedOptionsAfterOpinionOK();
                    break;
                default:
                    document.getElementById("closeOptions").innerHTML = getAppealClosedOptionsAfterOpinionNotOK();
                    break;
            }
            return;
        }
        if (data.grievance.statusEnglish == "ACCEPTED") {
            document.getElementById("closeOptions").innerHTML = '<select class=\"form-control\" id=\"closeState\">' +
                '<option selected=\"\" style=\"display: none;\" value=\"\">নিষ্পত্তি করার কারণ নির্বাচন করুন</option>' +
                '<option value=\"CLOSED_SERVICE_GIVEN\">সেবা প্রদত্ত </option>' +
                '<option value=\"CLOSED_ANSWER_OK\">উত্তর সন্তোষজনক</option>' +
                '<option value=\"CLOSED_INSTRUCTION_EXECUTED\">নির্দেশনা প্রতিপালিত</option>' +
                '<option value=\"CLOSED_OTHERS\">অন্যান্য </option>' +
                '</select>';
        } else {*/
            document.getElementById("closeOptions").innerHTML = '<select class=\"form-control\" id=\"closeState\">' +
                '<option selected=\"\" style=\"display: none;\" value=\"\">নিষ্পত্তি করার কারণ নির্বাচন করুন</option>' +
                '<option value=\"CLOSED_ACCUSATION_PROVED\" >অভিযোগের সত্যতা পাওয়া গিয়েছে</option>' +
                '<option value=\"CLOSED_ACCUSATION_INCORRECT\">অভিযোগের সত্যতা পাওয়া যায়নি  </option>' +
                '<option value=\"CLOSED_OTHERS\">অন্যান্য </option>' +
                '</select>';
//        }

        $("#closeState").change(function(){
            if($(this).val() == "CLOSED_ACCUSATION_PROVED"){
                document.getElementById("departmentalActionDiv").innerHTML = '<label class=\"control-label\">' +
                                                '<input type=\"checkbox\" id=\"actionChoose\" name=\"actionChoose\" onclick=\"takeAction()\">বিভাগীয় ব্যবস্থা গ্রহণ' +
                                            '</label>' +
                                            '<div class="form-group hidden" id="departmentalAction">' +
                                                '<div>&nbsp</div>' +
                                                '<label class=\"control-label\">যাদের বিরুদ্ধে বিভাগীয় ব্যবস্থা গ্রহণ করা হবে তাদের বাছাই করুন : </label>' +
                                                '<div id=\"potentialVictims\"></div>' +
                                                '<div>&nbsp</div>' +
                                                '<label class=\"control-label\">বিভাগীয় ব্যবস্থা-এর কারণ<span class=\"required\">*</span> </label>' +
                                                '<div class=\"summernote\" id=\"departmentalActionReason\"></div>' +
                                            '</div>';
                $('#departmentalActionReason').summernote();
            } else {
                document.getElementById("departmentalActionDiv").innerHTML = "";
            }
        });
    }

    function initializeComplainant(complainant) {
        complainantId = complainant.id;
        if (complainantId != null && complainantId != 0) {
            $("#btnGrievances").css("display", "block");
        }
        $.each(complainant, function(name, value) {
            if (name == 'dateOfBirth' && value != null) {
                var date = value.split(" ");
                $('#' + name).html(date[0]);
            } else {
                if(value == null){
                    if(name == 'name'){
                        $('#' + name).html("নাম প্রকাশে অনিচ্ছুক");
                    }else{
                        $('#' + name).html("-");
                    }
                } else{
                    $('#' + name).html(value);
                }
            }

            if (name=='name' && value!=null) {
                $("#fullname").html(value);
                var isEnglish = (languageCode == 'en');
                var oldText = $("#modalGrievanceListOfCitizen h4 span").text();
                var newText = (isEnglish ? oldText + " by " + "<strong>"+value+"</strong>" : "<strong>"+value+"</strong>" + " কর্তৃক "   +  oldText);
                $("#modalGrievanceListOfCitizen h4 span").html(newText);
            }
        });
    }

    function initializeResponsible(responsible) {
        $select = $("#serviceResponsible");
        $select.html("");
        $.each(responsible, function(key, val) {
            $select.append(val.name + "</br>" + val.designation + "</br>" + val.phoneNumber + "</br>" + val.email + "</br>");
        });
    }

    function initializePage() {
        var id = (document.location.href).split("=")[1];
        var url = '/api/grievance/' + id;
        blockUI();
        CallAjax(url, constructDetails);
    }


    function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');
            if (sParameterName[0] === sParam) {
                return sParameterName[1];
            }
        }
    }

    function getJson(url, onGettingJson) {
        $.getJSON(url, onGettingJson);
    }

    function forwardToAnotherOffice() {
        var complaintId = getUrlParameter('id');
        var officeId = getSelectedOfficeId('');
        var citizenCharterId = null;
        $('input[name="citizenCharter"]:checked').each(function(){ citizenCharterId = this.value; });
        var otherService = $('#anotherOfficeOtherServiceName').val();
        var cleanText = $("#anotherOfficeNote").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        if (cleanText == "") {
            toastr.error("অনুগ্রহ করে অন্য দপ্তরে প্রেরণের কারণ উল্লেখ করুন।");
            return;
        }

        if(officeId == null || officeId == ""){
            toastr.error("অনুগ্রহ করে একটি দপ্তর বাছাই করুন।");
            return;
        } else if (citizenCharterId == null && otherService == ""){
            toastr.error('অনুগ্রহ করে যে কোন একটি সেবা সিলেক্ট করুন অথবা অন্যান্য সেবার নাম লিখুন ');
            return;
        }
        var postObj = JSON.stringify({
            grievanceId: complaintId,
            officeId: officeId,
            citizenCharterId: citizenCharterId,
            note: $("#anotherOfficeNote").summernote('code'),
            otherServiceName: otherService,
            currentStatus: "FORWARDED_OUT"
        });

        ajaxPost("/api/grievance/forward", "json", "application/json", postObj, genericResponseOnSuccess);
    }

    function forwardToSubordinateOffice() {
        var complaintId = getUrlParameter('id');
        var officeId = $('#jstreeForwardToSubordinateOffice').jstree('get_selected')[0];
        var citizenCharterId = null;
        var otherService = $('#otherServiceName').val();
        var cleanText = $("#subordinateOfficeNote").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        $('input[name="citizenCharter"]:checked').each(function(){ citizenCharterId = this.value; });
        if (officeId == null) {
            toastr.error('অনুগ্রহ করে যে কোন একটি অফিস সিলেক্ট করুন');
            return;
        } else if (cleanText == "") {
            toastr.error("অনুগ্রহ করে অধস্তন অফিসে অভিযোগ পাঠানোর বিষয়ে একটি মন্তব্য লিখুন");
            return;
        } else if (citizenCharterId == null && otherService == ""){
            toastr.error('অনুগ্রহ করে যে কোন একটি সেবা সিলেক্ট করুন অথবা অন্যান্য সেবার নাম লিখুন ');
            return;
        } else {
            officeId = officeId.split("_")[2];
            $("#ajaxProcessingModal").modal('show');

            var postObj = JSON.stringify({
                grievanceId: complaintId,
                officeId: officeId,
                citizenCharterId: citizenCharterId,
                note: $("#subordinateOfficeNote").summernote('code'),
                otherServiceName: otherService,
                currentStatus: "FORWARDED_IN"
            });

            ajaxPost("/api/grievance/forward", "json", "application/json", postObj, genericResponseOnSuccess);
        }
    }

    function getComplaintMovement() {
        if($("#grievanceHistory").html().trim().length <= 0){
            getJson("/api/grievance/forward/" + getUrlParameter('id'), setGrievanceHistory);
        }
    }

    function getComplainantComplaintMovements(){
        if($("#grievanceHistory").html().trim().length <= 0){
            getJson("/api/grievance/forward/complainant/" + getUrlParameter('id'), setGrievanceHistory);
        }
    }

    function setGrievanceHistory(data){
        setComplaintMovements(data, 'grievanceHistory')
    }

    function ajaxPost(url, accept, send, postData, onSuccess) {
        $(".btn-action").hide();
        $.ajax({
            type: "POST",
            url: url,
            dataType: accept,
            contentType: send,
            data: postData,
            success: onSuccess
        });
    }

    function ajaxPut(url, accept, send, postData, onSuccess) {
        $.ajax({
            type: "PUT",
            url: url,
            dataType: accept,
            contentType: send,
            data: postData,
            success: onSuccess
        });
    }

    function createInlineLabeling(labelName, labelValue) {
        return "" + labelName + ": " + labelValue + "<br />";
    }

    function setComplaintMovements(data, modalName) {
        //console.log(data);
        /*<![CDATA[*/
        var isGrsUser = /*[[${grsUser}]]*/ true;
        var lang = $.cookie('lang');
        $("#" + modalName).empty();
        var ccId = 1;
        var ccCount = 0;
        var invCount = 0;
        var existingCC = 0;
        var invAppointCount = 0;
        var invFlag = false;
        $.each(data, function(i, field) {
            if(field.isCC){
                existingCC ++;
            }
            if(field.action == "INVESTIGATION"){
                invFlag = true;
                invAppointCount ++;
            }
        });
        if (invFlag) {
            invAppointCount--;
        }
        var count = data.length - existingCC - invAppointCount;
        var index = 0;

        var alreadyEnteredCount = 0;
        $.each(data, function(i, field) {
            var item = document.createElement('div');
            item.setAttribute('class', 'timeline-item');
            var badge = document.createElement('div');
            badge.setAttribute('class', 'timeline-badge');

            var img = document.createElement('img');
            img.alt = "ছবি পাওয়া যায়নি";
            img.src = "../assets/global/img/anonymous.jpg";
            /*$.ajax({
                url:"http://training.nothi.gov.bd/content/Personal/profile/" + field.fromGroUsername + ".png",
                type:"HEAD",
                statusCode: {
                    404: function() {
                        img.src = "../assets/global/img/anonymous.jpg";
                    },
                    200: function() {
                        img.src = "http://training.nothi.gov.bd/content/Personal/profile/" + field.fromGroUsername + ".png";
                    },
                    400: function() {
                        img.src = "../assets/global/img/anonymous.jpg";
                    },
                    403: function() {
                        img.src = "../assets/global/img/anonymous.jpg";
                    },
                }
            });*/
            img.title = field.fromGroNameBangla;
            img.setAttribute('class', 'timeline-badge-userpic');
            badge.append(img);
            item.append(badge);
            var body = document.createElement('div');
            body.setAttribute('class', 'timeline-body');

            var arrow = document.createElement('div');
            arrow.setAttribute('class', 'timeline-body-arrow');
            body.append(arrow);
            var body_head = document.createElement('div');
            body_head.setAttribute('class', 'timeline-body-head');
            var body_head_caption = document.createElement('div');
            body_head_caption.setAttribute('class', 'timeline-body-head-caption');

            var actionBng, actionEng, toHearing;
            if(isGrsUser){
                toHearing = "অভিযোগকারী";
            }else{
                toHearing = "সেবা প্রদানকারী কর্মকর্তা ";
            }

            switch (field.action) {
                case "NEW":
                    if (field.fromGroNameBangla == field.toGroNameBangla) {
                        actionBng = ' নতুন অভিযোগ প্রাপ্তি ' + '<hr class="blackLine"><br>' + 'অভিযোগকারী ' + ' কর্তৃক <span class="officerName" style="color:#00a887;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span> এর নিকট প্রেরিত।<br>';
                        actionEng = ' New Grievance Received ' + '<hr class="blackLine"><br>' + 'Complainant has forwarded grievance to ' + field.toGroNameEnglish + '.';
                    }
                    else {
                        actionBng = ' নতুন অভিযোগ প্রাপ্তি ' + '<hr class="blackLine"><br>' + ' <span class="officerName" style="color:#00a887;">  ' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> ' + ' কর্তৃক <span class="officerName" style="color:#00a887;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span> এর নিকট প্রেরিত।<br>';
                        actionEng = ' New Grievance Received ' + '<hr class="blackLine"><br>' + 'Complainant has forwarded grievance to ' + field.toGroNameEnglish + '.';
                    }
                    break;
                case "RETRIEVE":

                    actionBng = ' অভিযোগ পুনরুদ্ধার' + '<hr class="blackLine"><br>' + ' <span class="officerName" style="color:#00a887;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span> কর্তৃক অভিযোগ পুনরুদ্ধার।<br>';
                    actionEng = ' Complaint Retrieved' + '<hr class="blackLine"><br>' + 'Complainant has forwarded grievance to ' + field.toGroNameEnglish + '.';
                    break;
                case "RETAKE":

                    actionBng = ' অভিযোগ পুনরুদ্ধার' + '<hr class="blackLine"><br>' + ' <span class="officerName" style="color:#00a887;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span> কর্তৃক অভিযোগ পুনরুদ্ধার।<br>';
                    actionEng = ' Complaint Retaken' + '<hr class="blackLine"><br>' + 'Complainant has forwarded grievance to ' + field.toGroNameEnglish + '.';
                    break;
                case "NUDGE":
                    actionBng = ' তাগিদ প্রাপ্তি' + '<hr class="blackLine"><br><span class="officerName" style="color:#00a887;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> কর্তৃক <span class="officerName">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>-এর নিকট তাগিদ প্রদানকৃত।<br>';
                    actionEng = ' Nudge Received ' + '<br>' + field.fromGroNameEnglish + ' Resume further progress ' + field.toGroNameEnglish + '.';
                    break;
                case "ACCEPTED":
                    actionBng = ' অভিযোগ গৃহীত ' + '<hr class="blackLine"><br><span class="officerName" style="color:#00a887;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> কর্তৃক অভিযোগটি গৃহীত হয়েছে।<br>';
                    actionEng = ' Grievance Accepted ' + '<br>' + field.fromGroNameEnglish + ' accepted the grievance.';
                    break;
                case "GRO_CHANGED":
                    actionBng = ' অভিযোগ নিষ্পত্তি কর্মকর্তা পরিবর্তন ' + '<hr class="blackLine"><br> বর্তমান অনিক: <span class="officerName" style="color:#00a887;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '<br>';
                    actionEng = ' GRO Changed ' + '<br>' + field.fromGroNameEnglish + ' accepted the grievance.';
                    break;
                case "STATEMENT_ASKED":
                case "APPEAL_STATEMENT_ASKED":
                case "SEND_FOR_OPINION":

                    if(field.isCC){
                        if(ccCount == 0){
                            actionBng = ' মতামতের জন্য প্রেরণ করা হয়েছে ' + '<hr class="blackLine"><br><span class="officerName" style="color:#00a887;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> অভিযোগটি মতামতের জন্য প্রেরণ করেছেন।<br>' +
                                                '<br><div class="toOfficer" id="to_' + ccId + '">প্রধান প্রাপক: </div>' +
                                                '<br><div class="ccOfficer" id="cc_' + ccId + '">অনুলিপি প্রাপক: ' +
                                                '<span class="officerName" style="color:#808000;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla
                                + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>' + '</div>';

                            actionEng = ' Grievance sent for opinion ' + '<br>' + field.fromGroNameEnglish + ' sent the grievance for opinion to ' + field.toGroNameEnglish + '.';
                            ccCount = ccCount + 1;
                        } else {
                            index --;
                            ccCount = ccCount + 1;
                            var names = '; <span class="officerName" style="color:#808000;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>';

                            $("#cc_" + ccId).append(names);
                            $("#cc_" + ccId).removeClass('hidden');
                        }

                    }else{
                        if(ccCount == 0){
                            actionBng = ' মতামতের জন্য প্রেরণ করা হয়েছে ' + '<hr class="blackLine"><br><span class="officerName" style="color:#00a887;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> অভিযোগটি মতামতের জন্য প্রেরণ করেছেন।<br>' +
                                                '<br><div class="toOfficer" id="to_' + ccId + '">প্রধান প্রাপক:' +
                                                '<span class="officerName" style="color:#8a2be2;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span></div>';
                            actionEng = ' Grievance sent for opinion ' + '<br>' + field.fromGroNameEnglish + ' sent the grievance for opinion to ' + field.toGroNameEnglish + '.';

                        } else {
                            var toName = '<span class="officerName" style="color:#8a2be2;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>';
                            $("#to_" + ccId).append(toName);
                            ccId = ccId + 1;
                            ccCount = ccCount + 1;
                            if (ccCount > 1){
                                index --;
                            }
                        }
                    }
                    break;
                case "INVESTIGATION":
                    if(field.isCommitteeMember){
                        if(invCount == 0){

                            actionBng = ' তদন্তকারী নিয়োগ ' + '<hr class="blackLine"><br><span class="officerName" style="color:#00a887;">' + field.fromGroNameBangla + ', '
                                + field.fromDesignationNameBangla + ' ,' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla +
                                '</span> কর্তৃক <span class="toOfficer" id="inv_to_' + ccId + '"></span> <span>তদন্ত কমিটির প্রধান এবং </span>'
                                + '<span class="committeeMember" id="memberAddId' + ccId + '">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', '
                                + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span> তদন্ত কমিটির সদস্য হিসেবে নিয়োজিত হয়েছেন।';
                            actionEng = ' Investigator assignment ' + '<br>' + field.fromGroNameEnglish + ' assigned ' + field.toGroNameEnglish + ' as investigation committee head.';
                            invCount ++;
                        } else {
                            var names = "";
                            names += ' ও <span class="officerName" style="color:#f06fbb;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', '
                                + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>';
                            index --;
                            invCount ++;
                            $("#memberAddId" + ccId).append(names);
                            $("#memberAddId" + ccId).removeClass('hidden');
                        }
                    } else {
                        if(invCount == 0){
                            actionBng = ' তদন্তকারী নিয়োগ ' + '<hr class="blackLine"><br><span class="officerName" style="color:#00a887;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', '
                                + field.fromOfficeNameBangla + '</span> কর্তৃক<br>' + '<span class="officerName" style="color:#8a2be2;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>'
                                + '<span>তদন্ত কমিটির প্রধান হিসেবে নিয়োজিত হয়েছেন।</span>';

                        } else {
                            var toName = '<span class="officerName" style="color:#8a2be2;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>';
                            $("#inv_to_" + ccId).append(toName);
                            ccId ++;
                            invCount ++;
                            if (invCount > 1){
                                index --;
                            }
                        }
                        actionEng = ' Investigator assignment ' + '<br>' + field.fromGroNameEnglish + ' assigned ' + field.toGroNameEnglish + ' as investigation committee member.';
                    }
                    break;
                case "REQUEST_EVIDENCES_APPEAL":
                case "REQUEST_EVIDENCES":
                    if (field.fromGroNameBangla == field.toGroNameBangla) {
                        actionBng = ' প্রমাণ দাখিলের অনুরোধ ' + '<hr class="blackLine"><br><span class="officerName" style="color:#f06fbb;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> অভিযোগকারীর নিকট থেকে নতুন প্রমাণ দাখিলের অনুরোধ করেছেন।<br>';
                        actionEng = ' Request For Evidence ' + '<br>' + field.fromGroNameEnglish + ' requested for new evidence from the complainant.';
                    } else {
                        actionBng = ' প্রমাণ দাখিলের অনুরোধ ' + '<hr class="blackLine"><br><span class="officerName" style="color:#783cbd;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span> এর নিকট নতুন প্রমাণ দাখিলের অনুরোধ করেছেন <span class="officerName" style="color:#c4a11c;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span>।<br>';
                        actionEng = ' Request For Evidence ' + '<br>' + field.fromGroNameEnglish + ' requested for new evidence from the complainant.';
                    }
                    break;
                case "TAKE_HEARING":
                case "TAKE_HEARING_APPEAL":
                    actionBng = ' শুনানি গ্রহণ ' + '<hr class="blackLine"><br><span class="officerName" style="color:#f06fbb;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> শুনানি গ্রহণ করেছেন।<br>';
                    actionEng = ' Take Hearing ' + '<br>' + field.fromGroNameEnglish + ' took the hearing from the complainant.';
                    break;
                case "FORWARD_TO_ANOTHER_OFFICE":
                    actionBng = ' অভিযোগ অন্য দপ্তরে প্রেরিত ' + '<hr class="blackLine"><br><span class="officerName" style="color:#00a887;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> কর্তৃক অভিযোগটি <span class="officerName" style="color:#c4a11c;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>  -এর দপ্তরে প্রেরিত হয়েছে।<br>';
                    actionEng = ' Grievance Accepted ' + '<br>' + field.fromGroNameEnglish + ' accepted the grievance.';
                    break;
                case "FORWARDED_TO_AO":
                    actionBng = ' অভিযোগ আপিল অফিসার এর নিকট প্রেরিত ' + '<hr class="blackLine"><br><span class="officerName" style="color:#00a887;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> কর্তৃক অভিযোগটি <span class="officerName" style="color:#c4a11c;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span> -এর দপ্তরে প্রেরিত হয়েছে।<br>';
                    actionEng = ' Grievance Accepted ' + '<br>' + field.fromGroNameEnglish + ' accepted the grievance.';
                    break;
                case "REQUEST_FOR_HEARING_APPEAL":
                case "REQUEST_FOR_HEARING":
                    if (field.fromGroNameBangla == field.toGroNameBangla) {
                        actionBng = ' শুনানির অনুরোধ ' + '<hr class="blackLine"><br><span class="officerName" style="color:#f06fbb;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla
                            + '</span> কর্তৃক অভিযোগটি শুনানির জন্য অভিযোগকারীকে অনুরোধ করেছেন।<br>';
                        actionEng = 'Request For Hearing' + '<br>' + field.fromGroNameEnglish + ' requested the complainant for the hearing.';
                    } else {
                        actionBng = ' শুনানির অনুরোধ ' + '<hr class="blackLine"><br><span class="officerName" style="color:#f06fbb;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla
                            + '</span> কর্তৃক অভিযোগটি  শুনানির জন্য   <span class="officerName" style="color:#c4a11c;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', '
                            + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span> কে অনুরোধ করেছেন।<br>';
                        actionEng = ' Request For Evidence ' + '<br>' + field.fromGroNameEnglish + ' requested for new evidence from the complainant.';
                    }

                    break;
                case "COMPLAINANT_JOIN_HEARING_APPEAL":
                case "COMPLAINANT_JOIN_HEARING":
                    if (field.fromGroNameBangla == field.toGroNameBangla) {
                        actionBng = ' শুনানির বিষয়ে মতামত ' + '<hr class="blackLine"><br>' + 'অভিযোগকারী শুনানিতে আসার বিষয়ে মত দিয়েছেন। <br>';
                        actionEng = ' Compliance with the hearing ' + '<br>' + ' The complainant agreed to come to the hearing.';
                    } else {
                        actionBng = ' শুনানির বিষয়ে মতামত ' + '<hr class="blackLine"><br><span class="officerName" style="color:#c4a11c;">'  + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span>, শুনানিতে আসার বিষয়ে মতামত দিয়েছেন। <br>';
                        actionEng = ' Request For Evidence ' + '<br>' + field.fromGroNameEnglish + ' requested for new evidence from the complainant.';
                    }
                    break;
                case "SUBMIT_NEW_EVIDENCE_APPEAL":
                case "SUBMIT_NEW_EVIDENCE":
                    if (field.fromGroNameBangla == field.toGroNameBangla) {
                        actionBng = ' নতুন প্রমাণ দাখিল' + '<hr class="blackLine"><br>' + '   অভিযোগকারী নতুন প্রমাণ দাখিল করেছেন।<br>';
                        actionEng = ' New Evidence Submission ' + '<br>' + ' Complainant submitted new evidence.';
                    } else {
                        actionBng = ' নতুন প্রমাণ দাখিল' + '<hr class="blackLine"><br><span class="officerName" style="color:#c4a11c;">'  + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span>, নতুন প্রমাণ দাখিল করেছেন। <br>';
                        actionEng = ' New Evidence Submission ' + '<br>' + field.fromGroNameEnglish + ' requested for new evidence from the complainant.';
                    }
                    break;
                case "SUBMIT_INVESTIGATION_REPORT":
                    actionBng = ' তদন্ত প্রতিবেদন জমাদান ' + '<hr class="blackLine"><br><span class="officerName" style="color:#f06fbb;">' + field.fromGroNameBangla + ', '
                        + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla
                        + '</span> তদন্ত প্রতিবেদন <span class="officerName">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', '
                        + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span> এর নিকট প্রেরণ করেছেন।<br>';
                    actionEng = ' Investigation Report Submission ' + '<br>' + field.fromGroNameEnglish + ' submitted investigation report and forwarded the grievance to ' + field.toGroNameEnglish + '.';
                    break;
                case "CLOSED_ACCUSATION_INCORRECT":
                case "CLOSED_ACCUSATION_PROVED":
                case "CLOSED_INSTRUCTION_EXECUTED":
                case "CLOSED_ANSWER_OK":
                case "CLOSED_SERVICE_GIVEN":
                case "CLOSED_OTHERS":
                case "APPEAL_CLOSED_OTHERS":
                case "APPEAL_CLOSED_ACCUSATION_INCORRECT":
                case "APPEAL_CLOSED_ACCUSATION_PROVED":
                case "APPEAL_CLOSED_INSTRUCTION_EXECUTED":
                case "APPEAL_CLOSED_ANSWER_OK":
                case "APPEAL_CLOSED_SERVICE_GIVEN":
                    actionBng = ' অভিযোগ নিষ্পত্তি ' + '<hr class="blackLine"><br><span class="officerName" style="color:#00a887;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> অভিযোগটি নিষ্পত্তি করেছেন। <br>';
                    actionEng = ' Grievance Closed ' + '<br>' + field.fromGroNameEnglish + ' closed the grievance.';
                    break;
                case "REJECTED":
                case "APPEAL_REJECTED":
                    actionBng = ' অভিযোগ নথিজাতকৃত ' + '<hr class="blackLine"><br><span class="officerName">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> অভিযোগটি নথিজাত করে দিয়েছেন।<br>';
                    actionEng = ' Grievance Rejected ' + '<br>' + field.fromGroNameEnglish + ' rejected the grievance.';
                    break;
                case "APPEAL":
                    if (field.fromGroNameBangla == field.toGroNameBangla) {
                        actionBng = ' আপিলকৃত ' + '<hr class="blackLine"><br>' + ' অভিযোগকারী আপিল করেছেন।<br>';
                        actionEng = ' Appeal ' + '<br>' + ' The complainant has appealed.';
                    } else {
                        actionBng = ' আপিলকৃত ' + '<hr class="blackLine"><br><span class="officerName">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> কর্তৃক <span class="officerName">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>-এর নিকট আপিলকৃত।<br>';
                        actionEng = ' Appeal ' + '<br>' + field.fromGroNameEnglish + ' has appealed to ' + field.toGroNameEnglish + '.';
                    }
                    break;
                case "FORWARDED_TO_AO":
                    actionBng = ' আপিল কর্মকর্তা নিকট প্রেরণ ' + '<hr class="blackLine"><br><span class="officerName">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> অভিযোগটিকে আপিল অফিসার, <span class="officerName">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>-এর নিকট প্রেরণ করেছেন।<br>';
                    actionEng = ' Forwarded To Appeal Officer ' + '<br>' + field.fromGroNameEnglish + ' forwarded the grievance to the appeal officer ' + field.toGroNameEnglish;
                    break;
                case "PERMISSION_ASKED":
                    actionBng = ' অনুমতির জন্য প্রেরণ ' + '<hr class="blackLine"><br><span class="officerName">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> কর্তৃক <span class="officerName">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>-এর নিকট অনুমতির জন্য প্রেরিত।<br>';
                    actionEng = ' Ask for permission ' + '<br>' + field.fromGroNameEnglish + ' asked for opinion from ' + field.toGroNameEnglish + '.';
                    break;
                case "PERMISSION_REPLIED":
                    actionBng = ' অনুমতি উত্তর প্রাপ্ত' + '<hr class="blackLine"><br><span class="officerName">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> কর্তৃক <span class="officerName">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>-এর নিকট অনুমতি উত্তর প্রদত্ত <br>';
                    actionEng = ' Reply of Permission ' + '<br>' + field.fromGroNameEnglish + ' asked for opinion from ' + field.toGroNameEnglish + '.';
                    break;
                case "APPEAL_GIVE_GUIDANCE":
                case "GIVE_GUIDANCE":
                    actionBng = ' সেবা প্রদানের জন্য নির্দেশ' + '<hr class="blackLine"><br><span class="officerName" style="color:#00a887;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> কর্তৃক <span class="officerName" style="color:#c4a11c;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>-এর নিকট সেবা প্রদানের জন্য নির্দেশকৃত।<br>';
                    actionEng = ' Give guidance to service officer ' + '<br>' + field.fromGroNameEnglish + ' asked for opinion from ' + field.toGroNameEnglish + '.';
                    break;
                case "REQUEST_TESTIMONY":
                    actionBng = ' সাক্ষ্য-প্রমাণের নির্দেশ ' + '<hr class="blackLine"><br><span class="officerName" style="color:#00a887;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> কর্তৃক <span class="officerName" style="color:#c4a11c;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>-এর নিকট সাক্ষ্য-প্রমাণের নির্দেশকৃত।<br>';
                    actionEng = ' Give guidance to service officer ' + '<br>' + field.fromGroNameEnglish + ' asked for opinion from ' + field.toGroNameEnglish + '.';
                    break;
                case "TESTIMONY_GIVEN":
                    if (field.fromGroNameBangla == field.toGroNameBangla) {
                        actionBng = ' সাক্ষ্য-প্রমাণ প্রাপ্ত ' + '<hr class="blackLine"><br> অভিযোগকারী কর্তৃক নতুন সাক্ষ্য-প্রমাণ প্রদত্ত।<br>'   ;
                        actionEng = ' Request For Evidence ' + '<br>' + field.fromGroNameEnglish + ' requested for new evidence from the complainant.';
                    } else {
                        actionBng = ' সাক্ষ্য-প্রমাণ প্রাপ্ত ' + '<hr class="blackLine"><br><span class="officerName" style="color:#c4a11c;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> কর্তৃক <span class="officerName" style="color:#00a887;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>-এর সাক্ষ্য-প্রমাণ প্রদত্ত।<br>';
                        actionEng = ' Give guidance to service officer ' + '<br>' + field.fromGroNameEnglish + ' asked for opinion from ' + field.toGroNameEnglish + '.';
                    }
                    break;
                case "RECOMMEND_DEPARTMENTAL_ACTION_APPEAL":
                case "RECOMMEND_DEPARTMENTAL_ACTION":
                    actionBng = ' বিভাগীয় ব্যবস্থা গ্রহণের সুপারিশ' + '<hr class="blackLine"><br><span class="officerName" style="color:#00a887;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> কর্তৃক <span class="officerName">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>-এর নিকট বিভাগীয় ব্যবস্থা গ্রহণের সুপারিশকৃত।<br>';
                    actionEng = ' Give guidance to service officer ' + '<br>' + field.fromGroNameEnglish + ' asked for opinion from ' + field.toGroNameEnglish + '.';
                    break;
                case "CELL_NEW":
                    actionBng = ' মিটিং এর জন্য নির্বাচন' + '<hr class="blackLine"><br><span class="officerName" style="color:#00a887;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> কর্তৃক <span class="officerName">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>-এর নিকট মিটিং এর জন্য নির্বাচিত ।<br>';
                    actionEng = ' Selected for meeting ' + '<br>' + field.fromGroNameEnglish + ' selected by meeting ' + field.toGroNameEnglish + '.';
                    break;
                case "CELL_MEETING_PRESENTED":
                    actionBng = ' মিটিং এর সমাপ্তিকরন' + '<hr class="blackLine"><br><span class="officerName" style="color:#00a887;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> কর্তৃক <span class="officerName">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>-এর নিকট মিটিং এর সমাপ্তিকরন ।<br>';
                    actionEng = ' Resolution of meeting ' + '<br>' + field.fromGroNameEnglish + ' resolved the meeting ' + field.toGroNameEnglish + '.';
                    break;
                default:
                    if(field.assignedRole == "INV_HEAD"){
                        actionBng = ' মতামত প্রাপ্তি ' + '<hr class="blackLine"><br><span class="officerName" style="color:#c4a11c;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', '
                            + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> তদন্ত প্রতিবেদনে মতামত প্রদান করেছেন যা <span class="officerName" style="color:#00a887;">'
                            + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>-এর নিকট প্রেরণ করা হয়েছে।<br>';
                    } else {
                        actionBng = ' মতামত প্রাপ্তি ' + '<hr class="blackLine"><br><span class="officerName" style="color:#c4a11c;">' + field.fromGroNameBangla + ', ' + field.fromDesignationNameBangla + ', ' + field.fromOfficeUnitNameBangla + ', ' + field.fromOfficeNameBangla + '</span> মতামত প্রদান করেছেন যা <span class="officerName" style="color:#00a887;">' + field.toGroNameBangla + ', ' + field.toDesignationNameBangla + ', ' + field.toOfficeUnitNameBangla + ', ' + field.toOfficeNameBangla + '</span>-এর নিকট প্রেরণ করা হয়েছে।<br>';
                    }
                    actionEng = ' Opinion Received ' + '<br>' + field.fromGroNameEnglish + ' received opinion from ' + field.toGroNameEnglish + '.';
            }
            if(!(field.action == "SEND_FOR_OPINION" || field.action == "APPEAL_STATEMENT_ASKED" || field.action == "STATEMENT_ASKED")){
                ccCount = 0;
            }

            if(! (field.action == "INVESTIGATION")){
                invCount = 0;
            }

            if(ccCount > 1 || invCount > 1){
                index++;
                return;
            }

            body_head_caption.innerHTML += "(";
            body_head_caption.innerHTML += (lang == "en" ? (count-index) : ((count-index)+"").toBanglaNumber());
            body_head_caption.innerHTML += ") ";
            body_head_caption.innerHTML += createInlineLabeling(/*[[#{action}]]*/ , (lang == "en" ? actionEng : actionBng));
            body_head_caption.innerHTML += createInlineLabeling(/*[[#{date}]]*/ + '<br />' , (lang == "en" ? field.createdAtFullEng : field.createdAtFullBng));

            body_head.append(body_head_caption);
            body.append(body_head);
            index ++;

            var body_content = document.createElement('div');
            body_content.setAttribute('class', 'timeline-body-content');
            body_content.innerHTML += '<br />' + /*[[#{details}]]*/ +': <br />';
            body_content.innerHTML += '<p>' +field.comment + '</p>';
            var body_file = document.createElement('div');
            body_file.setAttribute('class', 'mt-list-container list-simple col-md-12');
            var file_ul = document.createElement('ul');
            file_ul.setAttribute('id', 'attachedFiles');

            if (field.files != null && field.files.length > 0) {
                $.each(field.files, function(key, val) {
                    var li = document.createElement('li');
                    li.setAttribute('class', 'mt-list-item');
                    var item_content = document.createElement('div');
                    item_content.setAttribute('class', 'list-item-content');
                    var h3 = document.createElement('h3');
                    h3.setAttribute('class', 'uppercase');
                    var a_file = document.createElement('a');
                    if (val.url.toLowerCase().endsWith('.png/') || val.url.toLowerCase().endsWith('.jpeg/') || val.url.toLowerCase().endsWith('.jpg/') || val.url.toLowerCase().endsWith('.bmp/') || val.url.toLowerCase().endsWith('.gif/')) {
                        a_file.setAttribute('data-lightbox', val.name);
                    } else {
                        if (val.url.toLowerCase().endsWith('.pdf/') || val.url.toLowerCase().endsWith('.txt/') || val.url.toLowerCase().endsWith('.xls/') || val.url.toLowerCase().endsWith('.xlsx/') || val.url.toLowerCase().endsWith('.doc/') || val.url.toLowerCase().endsWith('.docx/')) {
                            a_file.setAttribute('class', 'media-embed');
                        } else if (val.url.toLowerCase().endsWith('.mp3/')) {
                            a_file.setAttribute('class', 'media-audio');
                        } else if (val.url.toLowerCase().endsWith('.mp4/')) {
                            a_file.setAttribute('class', 'media-video');
                        }
                        a_file.setAttribute('onclick', 'javascript:previewFile(this, event);');
                    }
                    var href_file = 'http://' + document.location.host + val.url;
                    a_file.setAttribute('href', href_file);
                    a_file.setAttribute('data-asset', false);
                    a_file.innerHTML = '' + val.name + '';
                    h3.append(a_file);
                    item_content.append(h3);
                    li.append(item_content);
                    file_ul.append(li);
                });
            }

            body_file.append(file_ul);
            body_content.append(body_file);
            body.append(body_content);
            item.append(body);
            $("#" + modalName).append(item);
        });
        /*]]>*/
    }

    function takeAction(){
        if($('input[name="actionChoose"]:checked').length > 0){
            $('#departmentalAction').removeClass("hidden");
            var url = "api/grievance/users/"+ getUrlParameter('id');
            $.getJSON(url, function(data){
                $select = $("#potentialVictims");
                $select.html("");
                $.each(data, function(key, user){
                    $select.append('<label class="control-label">' +'<input type=\"checkbox\" id=\"deptAction\" name=\"deptAction\" value=\"' + user.id + '\">' + " " +
                         user.name + ", " + user.designation + ", " + user.officeUnitNameBng + ", " + user.officeNameBng + '</label><br>'
                    );
                });
            });

        } else {
            $('#departmentalAction').addClass("hidden");
        }
    }

    function loadServicesOnOfficeSelectionChange() {
        $("#officeSelectionId").on('change', "select", function () {
            var _this = $(this);
            if (_this.is("#secondSelection")) {
                var officeId = $("#secondSelection").val();
                var url = '/api/office/service/' + officeId + "/NAGORIK";
                getJson(url, anotherOfficeCitizenCharterPopulate);
            }
        });
    }

    function rejectComplaint() {

        var files = getFileDTO($("#fileuploadReject td p.name"));

        var complaintId = getUrlParameter('id');
        var rejectDTO = {};
        var content = $("#rejectionNote").summernote('code');
        var cleanText = $("#rejectionNote").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        if (cleanText == "") {
            toastr.error("অভিযোগ প্রত্যাখ্যান সংক্রান্ত একটি মন্তব্য লিখুন।");
            return;
        }
        rejectDTO['note'] = content;
        rejectDTO['grievanceId'] = complaintId;
        if (checkEmptyFileNameField(files)==true){
            toastr.error("দয়া করে সংযুক্ত ফাইল এর নাম প্রদান করুন।");
            return;
        }
        rejectDTO['files'] = files;

        $("#ajaxProcessingModal").modal('show');
        ajaxPut("/api/grievance/forward/reject/" + complaintId, "json", "application/json", JSON.stringify(rejectDTO), genericResponseOnSuccess);
    }


    function onComplaintRejection(data) {
        $("#ajaxProcessingModal").modal('hide');
        toastr.info(data.message);
        window.location.reload();
    }

    function closeComplaint() {
        var complaintId = getUrlParameter('id');
        var closeDTO = {};
        if($('input[name="actionChoose"]:checked').length > 0){
            closeDTO['takeAction'] = true;
            var cleanActionNote = $("#departmentalActionReason").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
            if(cleanActionNote == "" || $('input[name="deptAction"]:checked').length <= 0) {
                toastr.error("অনুগ্রহ করে বিভাগীয় ব্যবস্থা গ্রহণের কারণ উল্লেখ করুন এবং যার  বিরুদ্ধে ব্যবস্থা গ্রহণ করা হবে তাকে বাছাই করুন।");
                return;
            }
            closeDTO['departmentalActionNote'] = $("#departmentalActionReason").summernote('code');
            var array = [];
            $.each($('input[name="deptAction"]:checked'), function(key, val){
                array.push(val.value);
            });
            closeDTO['employeeList'] = array;
        }else{
            closeDTO['takeAction'] = false;
        }
        var contentGRODecision = $("#closingNoteGRODecision").summernote('code');
        var cleanTextGRODecision = $("#closingNoteGRODecision").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");

        var contentMainReason = $("#closingNoteMainReason").summernote('code');
        var cleanTextMainReason = $("#closingNoteMainReason").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");

        var contentSuggestion = $("#closingNoteSuggestion").summernote('code');

        if (cleanTextMainReason == "" || $("#closeState").val() == "") {
            toastr.error("দয়া করে অভিযোগ বন্ধ করার জন্য একটি কারণ নির্বাচন করুন এবং প্রধান কারণ লিখুন যে কারণে অভিযোগটি ঘটেছে।");
            $('#closingNoteMainReason').prop('selectedIndex', 0);
            $("#ajaxProcessingModal").modal('hide');
        } else if (cleanTextGRODecision == ""){
            toastr.error("অভিযোগটি বন্ধ করার জন্য আপনার সিদ্ধান্তটি লিখুন।");
            $('#closingNoteGRODecision').prop('selectedIndex', 0);
            $("#ajaxProcessingModal").modal('hide');
        } else {
            $("#ajaxProcessingModal").modal('show');
            var files = getFileDTO($("#fileuploadClose td p.name"));
            if (checkEmptyFileNameField(files)==true){
                toastr.error("দয়া করে সংযুক্ত ফাইল এর নাম প্রদান করুন।");
                $('#closingNoteGRODecision').prop('selectedIndex', 0);
                $("#ajaxProcessingModal").modal('hide');
                return;
            }
            $("#closeFileUp").empty();
            closeDTO['groDecision'] = contentGRODecision;
            closeDTO['mainReason'] = contentMainReason;
            closeDTO['groSuggestion'] = contentSuggestion;
            closeDTO['status'] = $("#closeState").val();
            closeDTO['files']= files;
            closeDTO['referredFiles'] = getReferredFiles();
            var postObj = JSON.stringify(closeDTO);
            ajaxPut("/api/grievance/forward/close/" + complaintId, "json", "application/json", postObj, genericResponseOnSuccess);
        }
    }

    function sendToAppealOfficer() {
        var id = getUrlParameter('id');
        var url = "/api/grievance/forward/appeal/officer/send";
        var note = {};
        var bodyContent = $("#sentToAppealOfficerNote").summernote("code");
        var cleanText = $("#sentToAppealOfficerNote").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        if(cleanText == ""){
            toastr.error("অনুগ্রহ করে আপিল কর্মকর্তা নিকট প্রেরণের কারণ লিখুন। ");
            return;
        }
        note['note'] = bodyContent;
        note['grievanceId'] = getUrlParameter('id');
        ajaxPost(url, "json", "application/json", JSON.stringify(note), genericResponseOnSuccess);
    }

    function sendToSubOfficeGRO(context) {
        var treeId = 'jstree' + context,
            divId = 'officersDetail' + context,
            summerNoteId = 'summernote' + context,
            fileuploadId = 'fileupload' + context,
            dateId = 'date' + context;

        var receiverNodes = [];
        $('input[name="toNodesSendToSubOfficeGRO"]:checked').map(function(index, elm){
            receiverNodes.push(elm.defaultValue);
        });

        var postNodeIds = [];
        $('input[name="ccNodesSendToSubOfficeGRO"]:checked').map(function(index, elm){
            postNodeIds.push(elm.defaultValue);
        });

        var id = getUrlParameter('id');
        var content = $("#" + summerNoteId).summernote('code');
        var cleanText = $("#" + summerNoteId).summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        var deadline = $('#' + dateId).datepicker('getDate');
        if (deadline == null || receiverNodes.length == 0) {
            toastr.error("তারিখ এবং ব্যক্তি নির্বাচন করুন");
            return;
        }
        if (cleanText == "") {
            toastr.error("মতামতের জন্য অভিযোগটি পাঠানোর কারণ লিখুন");
            return;
        }

        var referredFileList = getReferredFiles();
        var files = getFileDTO($("#" + fileuploadId + " td p.name"));
        if (checkEmptyFileNameField(files)==true){
            toastr.error("দয়া করে সংযুক্ত ফাইল এর নাম প্রদান করুন।");
            return;
        }

        var postObj = JSON.stringify({
            grievanceId: id,
            comment: content,
            postNode: receiverNodes,
            ccNode: postNodeIds,
            files: files,
            deadline: deadline,
            referredFiles: referredFileList
        });
        var url = "/api/grievance/forward/opinion";
        ajaxPost(url, "json", "application/json", postObj, genericResponseOnSuccess);
        $('#modal' + context).modal('hide');
    }

    function confirmReport(context) {
        var postObj = {};
        var signature = getFileDTO($("#fileuploadCommitteeMember td p.name"));
        if (checkEmptyFileNameField(signature)==true){
            toastr.error("দয়া করে সংযুক্ত ফাইল এর নাম প্রদান করুন।");
            return;
        }

        if (signature.length == 0){
            toastr.error("অনুগ্রহপূর্বক স্বাক্ষর আপলোড করুন।");
            return;
        }
        postObj['grievanceId'] = getUrlParameter('id');
        postObj['decision'] = context;
        postObj['signature'] = signature;
        var url = "/api/grievance/forward/report/agreement";
        ajaxPost(url, "json", "application/json", JSON.stringify(postObj), genericResponseOnSuccess);
    }

    function sendForOpinion(context) {
        var treeId = 'jstree' + context,
            divId = 'officersDetail' + context,
            summerNoteId = 'summernote' + context,
            fileuploadId = 'fileupload' + context,
            dateId = 'date' + context;

        var receiverNodes = [];
        $('input[name="receiverNodes"]:checked').map(function(index, elm){
            receiverNodes.push(elm.defaultValue);
        });

        var postNodeIds = [];
        $('input[name="ccNodes"]:checked').map(function(index, elm){
            postNodeIds.push(elm.defaultValue);
        });

        var id = getUrlParameter('id');
        var content = $("#" + summerNoteId).summernote('code');
        var cleanText = $("#" + summerNoteId).summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        var deadline = $('#' + dateId).datepicker('getDate');
        if (deadline == null) {
            toastr.error("তারিখ এবং ব্যক্তি নির্বাচন করুন");
            return;
        }

        if (receiverNodes.length == 0){
            toastr.error("অনুগ্রহ করে মতামতের জন্য অন্ততপক্ষে যে কোন একজনকে নির্বাচন করুন");
            return;
        }

        if (cleanText == "") {
            toastr.error("মতামতের জন্য অভিযোগটি পাঠানোর কারণ লিখুন");
            return;
        }
        var referredFileList = getReferredFiles();
        var files = getFileDTO($("#" + fileuploadId + " td p.name"));
        if (checkEmptyFileNameField(files)==true){
            toastr.error("দয়া করে সংযুক্ত ফাইল এর নাম প্রদান করুন।");
            return;
        }
        var postObj = JSON.stringify({
            grievanceId: id,
            comment: content,
            postNode: receiverNodes,
            ccNode: postNodeIds,
            files: files,
            deadline: deadline,
            referredFiles: referredFileList
        });
        var url = "/api/grievance/forward/opinion";
        ajaxPost(url, "json", "application/json", postObj, genericResponseOnSuccess);
        $('#modal' + context).modal('hide');
    }

    function getReferredFiles(){
        var referredFileList = [];
        $('.icheck:visible').each(function fn(index, node){
            if ($(this).is(":checked")) {
                referredFileList.push($(node).val());
            }
        });
        return referredFileList
    }

    function giveOpinionWithAttachment() {
        var files = getFileDTO($("#fileuploadGiveOpinion td p.name"));
        if (checkEmptyFileNameField(files)==true){
            toastr.error("দয়া করে সংযুক্ত ফাইল এর নাম প্রদান করুন।");
            return;
        }
        var opinion = {};
        opinion['files'] = files;
        opinion['referredFiles'] = getReferredFiles();
        var bodyContent = $("#giveOpinionNote").summernote("code");

        var cleanText = $("#giveOpinionNote").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        if(cleanText == ""){
            toastr.error("অনুগ্রহ করে মতামত লিখুন ");
            return;
        }

        opinion['comment'] = bodyContent;
        opinion['grievanceId'] = getUrlParameter('id');
        $("#giveOpinionNote").summernote('reset');
        $("#giveOpinionAttachment tbody > tr").remove();
        $("#ajaxProcessingModal").modal('show');
        ajaxPost("api/grievance/forward/opinion/reply", "json", "application/json", JSON.stringify(opinion), genericResponseOnSuccess);
    }

    function SendForPermission() {
        var opinion = {};
        var bodyContent = $("#SendForPermissionNote").summernote("code");
        var cleanText = $("#SendForPermissionNote").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");

        if(cleanText == ""){
            toastr.error("অনুগ্রহ করে কোন বিষয়ে অফিস প্রধানের অনুমতি প্রয়োজন তা লিখুন।");
            return;
        }

        opinion['note'] = bodyContent;
        opinion['grievanceId'] = getUrlParameter('id');
        $("#SendForPermissionNote").summernote('reset');
        $("#ajaxProcessingModal").modal('show');
        ajaxPost("api/grievance/forward/permission/ask", "json", "application/json", JSON.stringify(opinion), genericResponseOnSuccess);
    }

    function givePermission(){
        var opinion = {};
        var bodyContent = $("#givePermissionNote").summernote("code");
        opinion['note'] = bodyContent;
        opinion['grievanceId'] = getUrlParameter('id');
        var cleanText = $("#givePermissionNote").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");

        if (cleanText == "") {
            toastr.error("অনুগ্রহ করে কোন বিষয়ে অনুমতি দিয়েছেন তা লিখুন।");
            return;
        }
        $("#SendForPermissionNote").summernote('reset');
        $("#ajaxProcessingModal").modal('show');
        ajaxPost("api/grievance/forward/permission/give", "json", "application/json", JSON.stringify(opinion), genericResponseOnSuccess);
    }

    function GuidanceForService(){
        var opinion = {};
        opinion['grievanceId'] = getUrlParameter('id');
        var note = $("#guidanceForServiceNote").summernote("code");
        var deadline = $('#dateServiceGuidance').datepicker('getDate');
        var guidanceReceiver = $('#jstreeGuidanceForService').jstree('get_selected');

        /*<![CDATA[*/
            var serviceIsNull = /*[[${serviceIsNull}]]*/ false;
        /*]]>*/

        if( deadline == null){
            toastr.error("পরিষেবা দেওয়ার জন্য পরিষেবা অফিসারকে একটি নির্দিষ্ট সময়সীমা নির্ধারণ করুন।");
            return;
        } else if(serviceIsNull && guidanceReceiver.length == 0){
            toastr.error("পরিষেবা দেওয়ার জন্য পরিষেবা অফিসারকে নির্ধারণ করুন।");
            return;
        }

        var fullNote = note + "<p> সেবা প্রদানের শেষ তারিখ: " + deadline.toLocaleDateString().toBanglaNumber() + "</p>";
        opinion['note'] = fullNote;
        opinion['guidanceReceiver'] = guidanceReceiver[0];
        $("#ajaxProcessingModal").modal('show');
        ajaxPost("api/grievance/forward/guidance/service", "json", "application/json", JSON.stringify(opinion), genericResponseOnSuccess);
    }

    function genericResponseOnSuccess(data){
        $("#ajaxProcessingModal").modal('hide');
        /*<![CDATA[*/
        var isGrsUser = /*[[${grsUser}]]*/ false;
        /*]]>*/

        if(!data.success) {
            toastr.error(data.message);
            $(".btn-action").show();
        } else {
            emptyAllTree();
            if(!isGrsUser){
                var alertInfo = JSON.stringify(data);
                sessionStorage.setItem("alertInfo", alertInfo);

            }

            window.onbeforeunload = null;
            $('.modal:visible').modal("hide");
            window.history.back();
        }
    }

    function emptyAllTree() {
        $('#jstreegiveOpinion').jstree('deselect_all');
        $('#investigationCommitteeSelection').jstree('deselect_all');
        $('#jstreeSendToOfficer').jstree('deselect_all');
        $('#jstreeSendToSubOfficeGRO').jstree('deselect_all');
        $('#jstreegiveOpinion').jstree("destroy").empty();
        $('#investigationCommitteeSelection').jstree("destroy").empty();
        $('#jstreeSendToOfficer').jstree("destroy").empty();
        $('#jstreeSendToSubOfficeGRO').jstree("destroy").empty();

    }

    function recommendationForDepartmentalAction(){
        var opinion = {};
        var bodyContent = $("#recommendationForDepartmentalActionNote").summernote("code");
        var cleanText = $("#recommendationForDepartmentalActionNote").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");

        if (cleanText == "") {
            toastr.error("অনুগ্রহ করে বিভাগীয় ব্যবস্থা গ্রহণের সুপারিশ লিখুন।");
            return;
        }
        opinion['note'] = bodyContent;
        opinion['grievanceId'] = getUrlParameter('id');

        var files = getFileDTO($("#fileuploadRecommendDepartmentalAction td p.name"));
        if (checkEmptyFileNameField(files)==true){
            toastr.error("দয়া করে সংযুক্ত ফাইল এর নাম প্রদান করুন।");
            return;
        }
        opinion['files'] = files;
        opinion['referredFiles'] = getReferredFiles();

        $("#giveOpinionNote").summernote('reset');
        $("#giveOpinionAttachment tbody > tr").remove();
        $("#ajaxProcessingModal").modal('show');
        ajaxPost("api/grievance/forward/department/action", "json", "application/json", JSON.stringify(opinion), genericResponseOnSuccess);
    }

    function initiateInvestigation() {
        var id = getUrlParameter('id');
        var cleanText = $("#investigationNote").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        var receiverNode = [];
        $('input[name="committee"]:checked').map(function(index, elm){
            receiverNode.push(elm.defaultValue);
        });

        var postNodeIds = [];
        $('input[name="committee"]:unchecked').map(function(index, elm){
            postNodeIds.push(elm.defaultValue);
        });

        if (cleanText == "" || receiverNode.length == 0) {
            toastr.error("নোটে কিছু লিখুন এবং তদন্ত কমিটির প্রধান নির্বাচন করুন।");
        } else {
            var content = $("#investigationNote").summernote('code');
            $.getJSON("/api/grievance/forward/last/" + id, function(grievanceForwarding) {
                var postObj = JSON.stringify({
                    grievanceId: id,
                    note: content,
                    currentStatus: grievanceForwarding.currentStatus,
                    committee: postNodeIds,
                    head: receiverNode[0]
                });
                var url = "/api/grievance/inspection/initiate";
                $("#modalInvestigation").modal('hide');
                ajaxPost(url, "json", "application/json", postObj, genericResponseOnSuccess);
            });
        }
    }

    function requestForMaterial() {
        var id = getUrlParameter('id');
        var content = $("#requestMaterialNote").summernote('code');
        var cleanText = $("#requestMaterialNote").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        var selectedRecipients = $('#evidenceProviderSelect').val();
        if (cleanText == "") {
            toastr.error("দয়া করে অভিযোগকারী থেকে উপকরণের অনুরোধ সম্পর্কে একটি মন্তব্য লিখুন।");
            return;
        } else if (selectedRecipients == null){
            toastr.error("দয়া করে কমপক্ষে একজন ব্যক্তি নির্বাচন করুন যিনি উপকরণ দিবেন।");
            return;
        }
        var postObj = JSON.stringify({
            grievanceId: id,
            note: content,
            persons: selectedRecipients,
            hearingDate: null
        });
        var url = "/api/grievance/inspection/notice/inspector/file";
        ajaxPost(url, "json", "application/json", postObj, genericResponseOnSuccess);
    }

    function makeHearingNotice() {
        var id = getUrlParameter('id');
        var content = $("#hearingNote").summernote('code');
        var cleanText = $("#hearingNote").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        var selectedRecipients = $('#noticeReceiver').val();
        if (cleanText == "") {
            toastr.error("শুনানির জন্য নোটিশ দেওয়ার বিষয়ে একটি মন্তব্য লিখুন।");
            return;
        } else if (selectedRecipients == null){
            toastr.error("দয়া করে কমপক্ষে একজনকে নির্বাচন করুন, যাকে আপনি শুনানিতে যোগ দিতে বলবেন।");
            return;
        }
        var deadline = $('#hearingDate').datetimepicker('getDate').valueOf();

        if (deadline == null){
            toastr.error("অনুগ্রহ করে শুনানির তারিখ বাছাই করুন।");
            return;
        }

        var postObj = JSON.stringify({
            grievanceId: id,
            note: content,
            persons: selectedRecipients,
            hearingDate: deadline
        });
        var url = "/api/grievance/inspection/notice/inspector/hearing";
        ajaxPost(url, "json", "application/json", postObj, genericResponseOnSuccess);
    }

    function takeHearingNote() {
        var id = getUrlParameter('id');
        var content = $("#hearingSpeech").summernote('code');
        var cleanText = $("#hearingSpeech").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");
        if (cleanText == "") {
            toastr.error("শুনানির বিষয়ে কিছু লিখুন দয়া করে।");
            return;
        }
        var files = getFileDTO($("#fileuploadHearing td p.name"));
        if (checkEmptyFileNameField(files)==true){
            toastr.error("দয়া করে সংযুক্ত ফাইল এর নাম প্রদান করুন।");
            return;
        }

        var postObj = JSON.stringify({
            grievanceId: id,
            note: content,
            currentStatus: null,
            files: files,
            referredFiles: getReferredFiles()
        });
        var url = "/api/grievance/inspection/take/hearing";
        ajaxPost(url, "json", "application/json", postObj, genericResponseOnSuccess);
    }

    function submitReportWithSignature(){

    }

    function sendReport() {
        var id = getUrlParameter('id');
        var content = $("#sendingReport").summernote('code');

        var files = getFileDTO($("#fileuploadReport td p.name"));
//        var signature = getFileDTO($("#signatureuploadReport td p.name"));
        if (checkEmptyFileNameField(files)==true){
            toastr.error("দয়া করে সংযুক্ত ফাইল এর নাম প্রদান করুন।");
            return;
        }

        if (files.length == 0){
            toastr.error("অনুগ্রহপূর্বক স্বাক্ষর আপলোড করুন।");
            return;
        }
        /*if (signature.length > 1){
            toastr.error("অনুগ্রহপূর্বক একটি স্বাক্ষর আপলোড করুন।");
            return;
        }*/

        $.getJSON("/api/grievance/forward/investigation/head/" + id, function(grievanceForwarding) {
            /*$.getJSON("/api/employee/" + grievanceForwarding.toEmployeeRecordId, function(data) {*/
//                var signature = " <img src=\"\\signatures\\" + grievanceForwarding.fromEmployeeRecordId + ".jpg\" alt=\"signature\" style=\"width:150px;height:80px;\"><br> <p>[" + data.name + ", " + data.designation + "]</p>";
                var postObj = JSON.stringify({
                    grievanceId: id,
                    note: (content),
                    files: files,
                    referredFiles: getReferredFiles()
                });
                var url = "/api/grievance/inspection/report";
                ajaxPost(url, "json", "application/json", postObj, genericResponseOnSuccess);
            /*});*/
        });
    }

    function seeHearingDate() {
        var id = getUrlParameter('id');
        var content = $("#optionalNote").summernote('code');
        var cleanText = $("#optionalNote").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");

        var files = getFileDTO($("#fileuploadSeeHearing td p.name"));
        if (checkEmptyFileNameField(files)==true){
            toastr.error("দয়া করে সংযুক্ত ফাইল এর নাম প্রদান করুন।");
            return;
        }

        if(files.length == 0 && cleanText == "") {
            toastr.error("অনুগ্রহ করে শুনানিতে উপস্থিতি বিষয়ে কিছু লিখুন অথবা কইছে নতুন প্রমান সংযুক্ত করুন।");
            return;
        }

        var postObj = JSON.stringify({
            grievanceId: id,
            note: content,
            files: files,
            referredFiles: getReferredFiles()
        });

        var url = "/api/grievance/inspection/notice/complainant/hearing";
        ajaxPost(url, "json", "application/json", postObj, genericResponseOnSuccess);
    }

    function provideEvidence() {
        var id = getUrlParameter('id');
        var files = getFileDTO($("#fileuploadEvidence td p.name"));
        if (checkEmptyFileNameField(files)==true){
            toastr.error("দয়া করে সংযুক্ত ফাইল এর নাম প্রদান করুন।");
            return;
        }
        var content = $("#fileSendNote").summernote('code');
        var cleanText = $("#fileSendNote").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");

        if(files.length == 0 && cleanText == "") {
            toastr.error("অনুগ্রহ করে সাক্ষ্য-প্রমান  বিষয়ে কিছু লিখুন অথবা  নতুন প্রমান সংযুক্ত করুন।");
            return;
        }

        var postObj = JSON.stringify({
            grievanceId: id,
            note: content,
            files: files,
            referredFiles: getReferredFiles()
        });

        var url = "/api/grievance/inspection/notice/complainant/file";
        ajaxPost(url, "json", "application/json", postObj, genericResponseOnSuccess);
    }

    function formatDate(date) {
        var monthNames = [
            "January", "February", "March",
            "April", "May", "June", "July",
            "August", "September", "October",
            "November", "December"
        ];

        var day = date.getDate();
        var monthIndex = date.getMonth();
        var year = date.getFullYear();

        return day + ' ' + monthNames[monthIndex] + ' ' + year;
    }

    function populateGuidelineModal(){
        $('#shortGuideline').modal('show');
    }

    function populateAendToAppealOfficerSummerNote(service, officeName){
        if(service == null){
            service = "<সেবার নাম>";
        }
        var note = "<p>প্রাপ্ত " + service+" সেবা-সংক্রান্ত অভিযোগটি "+ officeName+" এর অভিযোগ নিষ্পত্তি কর্মকর্তা/অফিস প্রধান সংশ্লিষ্ট হওয়ায় প্রেরণ করা হলো</p>";
        $('#sentToAppealOfficerNote').summernote('code', note);
    }

    function populateSendForOpinionSummerNote(val, context, serviceName){
        var date = val;
        if(date == null){
            date = "<তারিখ>";
        } else {
            date = ("" + date).toBanglaNumber();
        }
        var service = serviceName;
        if(service == null){
            service = "<সেবার নাম>";
        }
        var note = "<p>আপনার দায়িত্বাধীন <b><u>" + service + "</u></b> সংক্রান্ত একটি অভিযোগ পাওয়া গিয়েছে। অভিযোগের বিস্তারিত সংযুক্ত করা হলো। আগামী " + date +" এর মধ্যে এ বিষয়ে মতামত প্রদানের জন্য অনুরোধ করা হলো।</p><ol style=\"list-style-type: lower-roman;\"><li>অভিযোগে উল্লিখিত সেবাটি ইতোমধ্যে প্রদান করা হয়ে থাকলে বিস্তারিত তথ্য প্রদান করতে হবে;</li><li>সেবা প্রদান না করা হয়ে থাকলে তা প্রদান করে বিস্তারিত তথ্যসহ অবহিত করতে হবে;</li><li>সেবা প্রদানের জন্য অধিকতর সময় প্রয়োজন হলে যথোপযুক্ত কারণ জানাতে হবে;</li><li>অধিনস্ত কোনো কর্মকর্তা/কর্মচারির দায়িত্বে অবহেলার কারণে নির্ধারিত সময়ে বা পদ্ধতিতে সেবা প্রদান করা সম্ভব না হয়ে থাকলে বিস্তারিত উল্লেখ করতে হবে;</li><li>আবেদনের অসম্পূর্ণতা অথবা অন্য কোনো কারণে সেবা প্রদান করা সম্ভব না হলে যথোপযুক্ত কারণ অবহিত করতে হবে।</li></ol>";
        $('#summernote' + context).summernote('code', note);
    }

    function byDefaultSelectSOForOpinion() {
        var id = getUrlParameter('id');
        $.getJSON('api/grievance/so/'+ id, function(result){
            if (result) {
                if (result.officeId != null) {
                    var postNode = 'post_{0}_{1}_{2}'.format(result.ministryId, result.officeId, result.officeUnitOrganogramId);
                    addNewRowSelectedOfficer(postNode, result.employeeDesignation + ", " + result.officeUnitName, result.employeeName, true);
                    receiverArray.push(postNode);
                } else{
                    isOtherService = true;
                }
            }
        });
    }

    function addNewRowSelectedOfficer(id, designationText, nameFull, checked){
       checked = $("#selectedOfficer > tbody > tr").length == 0;

        var item = document.createElement('tr');
        item.setAttribute('id', 'table' + id);
        var designation = document.createElement('td');
        var degText = document.createElement('span');
        degText.innerHTML = designationText;
        designation.append(degText);
        item.append(designation);

        var name = document.createElement('td');
        var nameText = document.createElement('span');
        nameText.innerHTML = nameFull;
        name.append(nameText);
        item.append(name);

        var radioTd = document.createElement('td');
        var radio = document.createElement('div');
        radio.setAttribute('id', 'uniform-'+ id);
        var spanRadio = document.createElement('span');
        var radioInput = document.createElement('input');
        spanRadio.setAttribute('class', '');
        radioInput.setAttribute('class', 'office_employee_to');
        radioInput.setAttribute('value', id);
        radioInput.setAttribute('name', 'receiverNodes');
        radioInput.setAttribute('type', 'radio');
        if(checked){
            radioInput.setAttribute('checked', checked);
        }
        spanRadio.append(radioInput);
        radio.append(spanRadio);
        radioTd.append(radio);
        item.append(radioTd);

        var checkTd = document.createElement('td');
        var check = document.createElement('div');
        check.setAttribute('id', 'check-'+ id);
        var spanCheck = document.createElement('span');
        var checkInput = document.createElement('input');
        spanCheck.setAttribute('class', '');
        checkInput.setAttribute('class', 'office_employee_to');
        checkInput.setAttribute('value', id);
        checkInput.setAttribute('name', 'ccNodes');
        checkInput.setAttribute('type', 'checkbox');
        if(!checked){
            checkInput.setAttribute('checked', !checked);
        }
        spanCheck.append(checkInput);
        check.append(spanCheck);
        checkTd.append(check);
        item.append(checkTd);
        $("#selectedOfficer tbody").append(item);
    }

    function addNewRowInvestigationCommittee(id, designationText, nameFull, checked){
        var item = document.createElement('tr');
        item.setAttribute('class', 'table' + id);
        var designation = document.createElement('td');
        var degText = document.createElement('span');
        degText.innerHTML = designationText;
        designation.append(degText);
        item.append(designation);

        var name = document.createElement('td');
        var nameText = document.createElement('span');
        nameText.innerHTML = nameFull;
        name.append(nameText);
        item.append(name);

        var radioTd = document.createElement('td');
        var radio = document.createElement('div');
        radio.setAttribute('id', 'uniform-'+ id);
        var spanRadio = document.createElement('span');
        var radioInput = document.createElement('input');
        spanRadio.setAttribute('class', '');
        radioInput.setAttribute('class', 'office_employee_to');
        radioInput.setAttribute('value', id);
        radioInput.setAttribute('name', 'committee');
        radioInput.setAttribute('type', 'radio');
        if(checked){
            radioInput.setAttribute('checked', checked);
        }
        spanRadio.append(radioInput);
        radio.append(spanRadio);
        radioTd.append(radio);
        item.append(radioTd);
        $("#investigationCommittee tbody").append(item);
        initIChecks();
    }

    function addNewRowSelectedOfficerSendToSubOfficeGRO(id, designationText, nameFull, checked){
        var item = document.createElement('tr');
        item.setAttribute('id', 'table' + id);
        var designation = document.createElement('td');
        var degText = document.createElement('span');
        degText.innerHTML = designationText;
        designation.append(degText);
        item.append(designation);

        var name = document.createElement('td');
        var nameText = document.createElement('span');
        nameText.innerHTML = nameFull;
        name.append(nameText);
        item.append(name);

        var radioTd = document.createElement('td');
        var radio = document.createElement('div');
        radio.setAttribute('id', 'uniform-'+ id);
        var spanRadio = document.createElement('span');
        var inputRadio = document.createElement('input');
        spanRadio.setAttribute('class', '');
        inputRadio.setAttribute('class', 'office_employee_to');
        inputRadio.setAttribute('value', id);
        inputRadio.setAttribute('name', 'toNodesSendToSubOfficeGRO');
        inputRadio.setAttribute('type', 'radio');
        if(checked){
            inputRadio.setAttribute('checked', checked);
        }
        spanRadio.append(inputRadio);
        radio.append(spanRadio);
        radioTd.append(radio);
        item.append(radioTd);

        var checkTd = document.createElement('td');
        var check = document.createElement('div');
        check.setAttribute('id', 'check-'+ id);
        var spanCheck = document.createElement('span');
        var checkInput = document.createElement('input');
        spanCheck.setAttribute('class', '');
        checkInput.setAttribute('class', 'office_employee_to');
        checkInput.setAttribute('value', id);
        checkInput.setAttribute('name', 'ccNodesSendToSubOfficeGRO');
        checkInput.setAttribute('type', 'checkbox');
        if(!checked){
            checkInput.setAttribute('checked', !checked);
        }
        spanCheck.append(checkInput);
        check.append(spanCheck);
        checkTd.append(check);
        item.append(checkTd);
        $("#selectedOfficerSendToSubOfficeGRO tbody").append(item);
    }

    function byDefaultSelectGROForOpinion() {
        var id = getUrlParameter('id');
        $.getJSON('/api/grievance/gro/'+id, function(result) {
            var postNode = 'post_{0}_{1}_{2}'.format(result.ministryId, result.officeId, result.officeUnitOrganogramId);
            addNewRowSelectedOfficerSendToSubOfficeGRO(postNode, result.employeeDesignation + ", " + result.officeUnitName, result.employeeName, true);
            receiverArraySub.push(postNode);
        });
    }

    function makeSelectedOfficerRadio(text, value) {
        var label = document.createElement("label");
        var radio = document.createElement("input");
        radio.type = "radio";
        radio.value = value;
        radio.checked="checked";
        label.appendChild(radio);
        label.appendChild(document.createTextNode(text));
        return label;
    }

    function onSentToOfficerForOpinion(data) {
        $("#ajaxProcessingModal").modal('hide');
        toastr.info(data.message);
        window.location.reload();
    }

    function appealOption() {
        $("#modalAppeal").modal('show');
    }

    function retakeComplaint(){
        swal({
          title: "আপনি কি নিশ্চিত?",
          text: "অভিযোগটি পুনরুদ্ধার করা হবে",
          type: "warning",
          showCancelButton: true,
          confirmButtonClass: "btn-danger",
          confirmButtonText: "হ্যাঁ",
          cancelButtonText: "না",
          closeOnConfirm: true,
          closeOnCancel: true
          }, function(isConfirm) {
            if(isConfirm) {
                var url = "/api/grievance/retake/" + getUrlParameter('id');
                ajaxPut(url, "json", "application/json", null, function(data){
                    window.history.back();
                });
            }
        } );
    }

    function reviveComplaint(){
        swal({
          title: "আপনি কি নিশ্চিত?",
          text: "অভিযোগটি পুনরুদ্ধার করা হবে",
          type: "warning",
          showCancelButton: true,
          confirmButtonClass: "btn-danger",
          confirmButtonText: "হ্যাঁ",
          cancelButtonText: "না",
          closeOnConfirm: true,
          closeOnCancel: true
          }, function(isConfirm) {
            if(isConfirm) {
                var url = "/api/grievance/retrieve/" + getUrlParameter('id');
                ajaxPut(url, "json", "application/json", null, function(data){
                    //$("#reviveComplaint").addClass("hidden");
                    window.history.back();
                });
            }
        } );
    }

    function appealToOfficer() {
        var id = getUrlParameter('id');
        var url = "api/grievance/forward/appeal";
        var note = {};
        var bodyContent = $("#appealNote").summernote("code");
        var cleanText = $("#appealNote").summernote('code').replace(/<\/?[^>]+(>|$)/g, "");

        if(cleanText == ""){
            toastr.error("অনুগ্রহ করে আপিল করে কারণ উল্লেখ করুন।");
            return;
        }
        note['note'] = bodyContent;
        note['grievanceId'] = id;
        App.blockUI();
        ajaxPost(url, "json", "application/json", JSON.stringify(note), appealResponseOnSuccess);
    }

    function appealResponseOnSuccess(data) {
        if (data.success){
            $("#modalAppeal").modal('hide');

            $("#appealButton").addClass("hidden");
            $("#feedbackButtonId").addClass("hidden");
            $("#appealButton").remove();
            $("#feedbackButtonId").remove();

            App.unblockUI();
            swal({text: data.message, title: '', type: 'success'}, function() {} );
            //$("#modalAppeal").remove();
        }
    }

    function populateOfficersDetail(treeId, divId) {
        var id = getUrlParameter('id'),
            postNodeId = $('#' + treeId).jstree('get_selected')[0];
        $.getJSON("/api/grievance/forward/opinion/receiver/" + id + '?postNodeId=' + postNodeId, function(result) {
            if (result == null || $.isEmptyObject(result)) {
                return;
            }
            localStorage.setItem('grievForwarding', JSON.stringify(result));

            document.getElementById(divId).innerHTML = "<span>নামঃ " + result.employeeName + ",  পোস্টঃ " + result.employeeDesignation + "</span>";
            document.getElementById("officersDetail").innerHTML = "<span>নামঃ " + result.employeeName + ",  পোস্টঃ " + result.employeeDesignation + "</span>";
            document.getElementById("groDetail").innerHTML = "<span>নামঃ " + result.employeeName + ",  পোস্টঃ " + result.employeeDesignation + "</span>";
        });
    }

    function populateJSTree(treeName, url, multipleSelection) {

        $(treeName).jstree({
            "core": {
                multiple: multipleSelection,
                "themes": {
                    "responsive": false
                },
                // so that create works
                "check_callback": true,
                'data': {
                    'url': function(node) {
                        return node.id === '#' ?
                            url :
                            '/api/office/organogram/so';
                    },
                    'data': function(node) {
                        return {
                            'id': node.id
                        };
                    },
                    'cache' : false
                }
            },
            "types": {
                "default": {
                    "icon": "fa fa-folder icon-state-warning icon-lg"
                },
                "file": {
                    "icon": "fa fa-file icon-state-warning icon-lg"
                }
            },
            "plugins": ["checkbox"],
            checkbox: {
                three_state: false,
                cascade: "none"
            }
        });
        $(treeName).jstree('deselect_all');
    }

    function populateJSTreeBind(treeName, url, multipleSelection) {

        $(treeName).jstree({
            "core": {
                multiple: multipleSelection,
                "themes": {
                    "responsive": false
                },
                // so that create works
                "check_callback": true,
                'data': {
                    'url': function(node) {
                        return node.id === '#' ?
                            url :
                            '/api/office/organogram/so';
                    },
                    'data': function(node) {
                        return {
                            'id': node.id
                        };
                    },
                    'cache' : false
                }
            },
            "types": {
                "default": {
                    "icon": "fa fa-folder icon-state-warning icon-lg"
                },
                "file": {
                    "icon": "fa fa-file icon-state-warning icon-lg"
                }
            },
            "plugins": ["checkbox"],
            checkbox: {
                three_state: false,
                cascade: "none"
            }
        });
        $(treeName).jstree('deselect_all');
    }

    function onJstreeSelectionChanged(divId) {
        $('#' + divId).on("changed.jstree", function(e, data) {
            $.each(data.selected, function(key, val) {
                if (data.instance.get_node(val).original.name == null) {
                    toastr.error("আপনি যে পদটি বাছাই করেছেন তা এই মুহূর্তে ফাকা আছে");
                    data.instance.deselect_node(val);
                }
            });
        });
    }

    function jstreeSelectGRO(divId) {
        $("#" + divId).on("load_node.jstree", function(e, data) {
            var id = getUrlParameter('id');
            $.getJSON('/api/grievance/forward/latest/gro/' + id, function(result) {
                var postNode = "post_{0}_{1}_{2}".format(result.ministryId, result.officeId, result.officeUnitOrganogramId);
                var checkCount = data.instance.get_checked();
                if (data.node.children.indexOf(postNode) != -1 && checkCount.length == 0) {
                    $('#' + divId).jstree(true).select_node(postNode);
                }
            });
        });
    }

    function jstreeSubordinateOffice(treeName, url, multipleSelection) {
        $(treeName).jstree({
            "core": {
                multiple: multipleSelection,
                "themes": {
                    "responsive": false
                },
                "check_callback": true,
                'data': {
                    'url': function(node) {
                        return node.id === '#' ?
                            url :
                            '/api/office/descendents';
                    },
                    'data': function(node) {
                        return {
                            'id': node.id
                        };
                    }
                }
            },
            "types": {
                "default": {
                    "icon": "fa fa-folder icon-state-warning icon-lg"
                },
                "file": {
                    "icon": "fa fa-file icon-state-warning icon-lg"
                }
            },
            "state": {
                "key": "demo3"
            },
            "plugins": ["dnd", "state", "types", "checkbox"],
            checkbox: {
                three_state: false,
                cascade: "none"
            }
        });
        $(treeName).jstree('deselect_all');
    }

    function anotherOfficeCitizenCharterPopulate(data){

        var isEnglish = (languageCode == "en"),
            $select = $('#serviceDropDown'),
            attrSuffix = isEnglish ? "English" : "Bangla",
            defaultText = isEnglish ? "Select Service" : "সেবা বাছাই করুন",
            strOthers = isEnglish ? 'Others' : 'অন্যান্য';

        $select = $("#anotherOfficesCitizenCharters");
        $select.html("");

        $.each(data.services, function(key, val){
            var x = '<label><input type="radio"  name="citizenCharter" value="' + val.id + '" class="icheck"> ' + val['serviceName' + attrSuffix] + ' </label><br>';
            $select.append(x);
        });
    }


    String.prototype.format = function() {
        var str = this;
        for (var i = 0; i < arguments.length; i++) {
            var reg = new RegExp("\\{" + i + "\\}", "gm");
            str = str.replace(reg, arguments[i]);
        }
        return str;
    }

    function populateGrievanceListOfCitizen(data) {
        $('#tblGrievanceListOfCitizen').dataTable().fnClearTable();
        $('#tblGrievanceListOfCitizen').dataTable().fnAddData(data);
    }

    function populateComplaintsAttachments(){
        var complaintId = getUrlParameter('id');
        var url = "/api/grievance/" + complaintId + "/files";
        getJson(url, function(data){constructFilePage(data, "attachedFilesList")});
        $("#attachedFileModal").modal('show');
    }

    function populateComplaintAttachedFiles(){
        var complaintId = getUrlParameter('id');
        var url = "/api/grievance/" + complaintId + "/files";
        getJson(url, function(data){constructFilePage(data, "complaintAttachFile")});
    }

    function populateComplaintsMovementAttachments(){
        var complaintId = getUrlParameter('id');
        var url = "/api/grievance/forward/" + complaintId + "/files";
        getJson(url, function(data){constructFilePage(data, "attachedFilesList")});
        $("#attachedFileModal").modal('show');
    }

    function getGrievanceListOfCitizen() {
        if (complainantId == null || complainantId == 0) {
            return;
        }
        var dataTable = $("#tblGrievanceListOfCitizen").DataTable();
        if(!dataTable.data().any()){
            var url = "/api/grievances/" + complainantId;
            getJson(url, populateGrievanceListOfCitizen);
        }
        $("#modalGrievanceListOfCitizen").modal('show');
    }

    function blacklistCitizen() {
        $("#ajaxProcessingModal").modal('show');
        var body = JSON.stringify({
            complainantId: complainantId,
            blacklistReason: $("#blacklistReason").summernote("code")
        });
        var url = '/api/complainants/blacklist/request';
        ajaxPut(url, "json", "application/json", body, function(data){``
            $("#ajaxProcessingModal").modal('hide');
            $("#modalBlacklistCItizen").modal('hide');
            if(data.success) {
                $('#btnBlacklist').attr('disabled', true);

                //toastr.info(data.message);
                swal("কালো-তালিকাভুক্ত!", data.message, "success");
            }
            else {
                //toastr.error(data.message);
                swal("স্থগিত", data.message, "error");
            }
        });
    }

    function warnBeforeBlacklisting() {
        /*swal({
          title: "আপনি কি নিশ্চিত?",
          text: "কালো-তালিকাভুক্ত ব্যক্তি কোনো প্রকার অভিযোগ করতে পারবে না!",
          type: "warning",
          showCancelButton: true,
          confirmButtonClass: "btn-danger",
          confirmButtonText: "হ্যাঁ, কালো-তালিকাভুক্ত করুন!",
          cancelButtonText: "না, বাতিল!",
          closeOnConfirm: false,
          closeOnCancel: false
        },
        function(isConfirm) {
          if (isConfirm) {
            blacklistCitizen();
          } else {
            swal("স্থগিত", "অভিযোগকারীকে কালো-তালিকাভুক্তকরণ বাতিল করা হয়েছে", "error");
          }
        });*/
        $("#modalGrievanceListOfCitizen").modal('hide');
        $("#modalBlacklistCItizen").modal('show');

    }

    function initRating() {
        ko.applyBindings(new ratingViewModel());
        $('#btnFeedback').on('click', function() {
            $("#ajaxProcessingModal").modal('show');
            var url = "/api/grievance/feedback";
            var id = getUrlParameter('id');
            var putObj = JSON.stringify({
                grievanceId: id,
                rating: $('#rating').val(),
                userComments: $('#txtaFeedback').val()
            });
            ajaxPut(url, "json", "application/json", putObj, genericResponseHandler);

        });
    }

    function genericResponseHandler(data) {
        $("#ajaxProcessingModal").modal('hide');
        if(data.success) {
            //swal("আপনার প্রতিক্রিয়া!", data.message, "success");
            //window.location.reload();

            swal({
                title: "আপনার প্রতিক্রিয়া!",
                text: data.message,
                type: "success"
                },
                    function() {
                        window.location.reload();
                    }
                );
        }
        else {
            swal("স্থগিত", data.message, "error");
        }
    }

    function ratingViewModel() {
        this.isRated = ko.observable(0);
    }

    function initializeJstree(menuOptions){
        /*<![CDATA[*/
            var isCellMember = /*[[${isCellMember}]]*/ true;
        /*]]>*/
        var url = isCellMember ? '/api/office/organogram/subordinate' + '?grievanceId=' + getUrlParameter('id') : '/api/office/organogram/so'
        if(menuOptions != null){
            $.each(menuOptions.grievanceMenus, function(k, v){
                if(v.link == "#modalSendToOfficer"){
                    byDefaultSelectSOForOpinion();
                    populateJSTreeBind('#jstreeSendToOfficer', url, true);
                    onJstreeSelectionChanged('jstreeSendToOfficer');
                    $('#jstreeSendToOfficer').on("select_node.jstree", function(e, data) {
                        if(receiverArray.indexOf(data.node.id) == -1 && data.node.id != groPOST){
                            var so = data.instance.get_node(data.node.id);
                            //console.log(data.instance.get_node(data.node.id));
                            addNewRowSelectedOfficer(data.node.id, so.original.designation + ", " + so.original.officeUnitName, so.original.name, false);
                            receiverArray.push(data.node.id);
                            if(complaintStatus === "NEW" && !isOtherService) {
                                $("#selectedOfficer input[type=radio]").attr('disabled', true);
                                $("#table" + soPOST + " input[type=checkbox]").attr('disabled', true);
                            }
                        } else if (data.node.id == groPOST){
                            toastr.error("ব্যবহারকারী নিজেকে মতামতের জন্য প্রেরণ করতে পারবে না।");
                            var gro = data.instance.get_node(data.node.id);
                            data.instance.deselect_node(gro.id);
                        }
                    });

                    $('#jstreeSendToOfficer').on("deselect_node.jstree", function(e, data) {
                        $('#' + 'table' + data.node.id).remove();
                        const index = receiverArray.indexOf(data.node.id);
                        if(index != -1){
                            receiverArray.splice(index, 1);
                        }
                    });
                }
                if(v.link == "#modalSendToSubOfficeGRO"){
                    populateJSTreeBind('#jstreeSendToSubOfficeGRO', '/api/office/organogram/subordinate' + '?grievanceId=' + getUrlParameter('id'), true);
                    onJstreeSelectionChanged('jstreeSendToSubOfficeGRO');
                    $('#jstreeSendToSubOfficeGRO').on("select_node.jstree", function(e, data) {
                        if(receiverArraySub.indexOf(data.node.id) == -1){
                            var so = data.instance.get_node(data.node.id);
                            addNewRowSelectedOfficerSendToSubOfficeGRO(data.node.id, so.original.designation + ", " + so.original.officeUnitName, so.original.name, false);
                            receiverArraySub.push(data.node.id);
                        }
                    });

                    $('#jstreeSendToSubOfficeGRO').on("deselect_node.jstree", function(e, data) {
                        $('#' + 'table' + data.node.id).remove();
                        const index = receiverArraySub.indexOf(data.node.id);
                        if(index != -1){
                            receiverArraySub.splice(index, 1);
                        }
                    });
                }
                if(v.link == "#modalForwardToSubordinateOffice"){
                    jstreeSubordinateOffice('#jstreeForwardToSubordinateOffice', '/api/office/descendents', false);
                    $('#jstreeForwardToSubordinateOffice').on("select_node.jstree", function(e, data) {
                        $.getJSON("/api/office/" + data.node.id.split("_")[2] + "/citizen-charters", function(result) {
                            $select = $("#officesCitizenCharters");
                            $select.html("");

                            $.each(result.content, function(key, val){
                                var x = '<label><input type="radio"  name="citizenCharter" value="' + val.id + '" class="icheck"> ' + val.serviceNameBangla + ' </label><br>';
                                $select.append(x);
                            });
                        });
                    });

                    $('#jstreeForwardToSubordinateOffice').on("deselect_node.jstree", function(e, data) {
                        $select = $("#officesCitizenCharters");
                        $select.html("");
                    });
                }
                if(v.link == "#modalInvestigation"){
                    populateJSTreeBind('#investigationCommitteeSelection', url, true);
                    $('#investigationCommitteeSelection').jstree('deselect_all');
                    $('#investigationCommitteeSelection').on("select_node.jstree", function(e, data) {
                        var so = data.instance.get_node(data.node.id);
                        if(so.original.name && committeeArray.indexOf(data.node.id) == -1 && data.node.id != soPOST){
                            addNewRowInvestigationCommittee(data.node.id, so.original.designation + ", " + so.original.officeUnitName, so.original.name, false);
                            committeeArray.push(data.node.id);
                        } else if(data.node.id == soPOST){
                            toastr.error("সেবা প্রদানকারী কর্মকর্তাকে তদন্ত কমিটির সদস্য হিসেবে নিযোগ দেয়া যাবে না। ");
                            data.instance.deselect_node(data.node.id);
                        }
                    });

                    $('#investigationCommitteeSelection').on("deselect_node.jstree", function(e, data) {
                        $(".table" + data.node.id).remove();
                        const index = committeeArray.indexOf(data.node.id);
                        if(index != -1){
                            committeeArray.splice(index, 1);
                        }
                    });
                }
                if(v.link == "#modalGiveOpinion"){
                    populateJSTree('#jstreegiveOpinion', url, true);
                    $('#jstreegiveOpinion').on("select_node.jstree", function(e, data) {
                        var so = data.instance.get_node(data.node.id);
                        if(so.original.name){
                            var name = so.original.name + ", " + so.original.designation + ", " + so.original.officeUnitName;
                            var currentNote = $("#giveOpinionNote").summernote('code');
                            var addName = currentNote + " " + name;
                            $('#giveOpinionNote').summernote('code', addName);
                        } else {
                            toastr.error("আপনি যে পদটি বাছাই করেছেন তা এই মুহূর্তে ফাকা আছে");
                        }
                        $('#jstreegiveOpinion').jstree('deselect_all');
                    });
                }
                if(v.link == "#modalGuidanceForService"){
                    populateJSTree('#jstreeGuidanceForService', url, false);
                    onJstreeSelectionChanged('jstreeGuidanceForService');
                    $('#jstreeGuidanceForService').on("select_node.jstree", function(e, data) {
                        $select = $("#guidanceReceiver");
                        $select.html("");
                        $.each(data.selected, function(key, val) {
                            var x = data.instance.get_node(val);
                            if (data.instance.get_node(val).original.name) {
                                $select.append('<label>' + x.original.name + ", " + x.original.designation + ", " + x.original.officeUnitName + '</label>');
                            } else {
                                toastr.error("আপনি যে পদটি বাছাই করেছেন তা এই মুহূর্তে ফাঁকা আছে");
                                data.instance.deselect_node(val);
                            }
                        });
                    });
                }
            });
        }
    }

    $(document).ready(function() {
        emptyAllTree();
        initializePage();
        initRating();
        populateComplaintAttachedFiles();
        $("#grsUserManualModal").on('shown.bs.modal', function (e) {
            $("#grsUserManualModal img").each(function (key, val) {
                var selector = $(val);
                var source = selector.attr('data-src');
                selector.attr('src', source);
            });
        });
        $("#selectedOfficer").on("change", "[type='radio']", function() {
            var _this = $(this);
            var thisRow = _this.closest("tr");
            thisRow.find("[type='checkbox']").removeAttr("checked");
            thisRow.siblings().find("[type='checkbox']").prop("checked", true);
        });

        $("#selectedOfficerSendToSubOfficeGRO").on("change", "[type='radio']", function() {
            var _this = $(this);
            var thisRow = _this.closest("tr");
            thisRow.find("[type='checkbox']").removeAttr("checked");
            thisRow.siblings().find("[type='checkbox']").prop("checked", true);
            console.log("changed");
        });
        bindOfficeLayersChangeActions("");
        loadServicesOnOfficeSelectionChange()

        $('#btnBlacklist').on('click', warnBeforeBlacklisting);

        $(".modal").on("show.bs.modal", function(){
            window.onbeforeunload = function() {
                return true;
            };
        });

        $(".modal").on("hidden.bs.modal", function(){
            if ($(".modal:visible").length == 0) {
                window.onbeforeunload = null;
            }
        });

        if (jsLangCodeForLibs == "bn") {
            $.fn.datepicker.dates['bn'] = {
                months : 'জানুয়ারী_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর'.split('_'),
                monthsShort : 'জানু_ফেব_মার্চ_এপ্র_মে_জুন_জুল_আগ_সেপ্ট_অক্টো_নভে_ডিসে'.split('_'),
                days : 'রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার'.split('_'),
                daysShort : 'রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি'.split('_'),
                daysMin : 'রবি_সোম_মঙ্গ_বুধ_বৃহঃ_শুক্র_শনি'.split('_'),
                longDateFormat : {
                    LT : 'A h:mm সময়',
                    LTS : 'A h:mm:ss সময়',
                    L : 'DD/MM/YYYY',
                    LL : 'D MMMM YYYY',
                    LLL : 'D MMMM YYYY, A h:mm সময়',
                    LLLL : 'dddd, D MMMM YYYY, A h:mm সময়'
                },
                calendar : {
                    sameDay : '[আজ] LT',
                    nextDay : '[আগামীকাল] LT',
                    nextWeek : 'dddd, LT',
                    lastDay : '[গতকাল] LT',
                    lastWeek : '[গত] dddd, LT',
                    sameElse : 'L'
                },
                relativeTime : {
                    future : '%s পরে',
                    past : '%s আগে',
                    s : 'কয়েক সেকেন্ড',
                    ss : '%d সেকেন্ড',
                    m : 'এক মিনিট',
                    mm : '%d মিনিট',
                    h : 'এক ঘন্টা',
                    hh : '%d ঘন্টা',
                    d : 'এক দিন',
                    dd : '%d দিন',
                    M : 'এক মাস',
                    MM : '%d মাস',
                    y : 'এক বছর',
                    yy : '%d বছর'
                },
                meridiemParse: /রাত|সকাল|দুপুর|বিকাল|রাত/,
                meridiemHour : function (hour, meridiem) {
                    if (hour === 12) {
                        hour = 0;
                    }
                    if ((meridiem === 'রাত' && hour >= 4) ||
                            (meridiem === 'দুপুর' && hour < 5) ||
                            meridiem === 'বিকাল') {
                        return hour + 12;
                    } else {
                        return hour;
                    }
                },
                meridiem : function (hour, minute, isLower) {
                    if (hour < 4) {
                        return 'রাত';
                    } else if (hour < 10) {
                        return 'সকাল';
                    } else if (hour < 17) {
                        return 'দুপুর';
                    } else if (hour < 20) {
                        return 'বিকাল';
                    } else {
                        return 'রাত';
                    }
                },
                week : {
                    dow : 0, // Sunday is the first day of the week.
                    doy : 6  // The week that contains Jan 1st is the first week of the year.
                }
            };
            moment.locale("bn");
        }

        $('.date-picker').datepicker({
            format: 'dd/mm/yyyy',
            autoclose: true,
            language: jsLangCodeForLibs,
            beforeShowDay: function(date){
                if (jsLangCodeForLibs == "bn") {
                    var obj = {
                        "enabled": true,
                        "content" : ("" + date.getDate()).toBanglaNumber(),
                        "classes": "",
                        "tooltip": ""
                    };
                    return obj;
                }
            },
            beforeShowYear: function(date){
                if (jsLangCodeForLibs == "bn") {
                    var obj = {
                        "enabled": true,
                        "content" : ("" + date.getFullYear()).toBanglaNumber(),
                        "classes": "",
                        "tooltip": ""
                    };
                    return obj;
                }
            },
            beforeShowDecade: function(date){
                if (jsLangCodeForLibs == "bn") {
                    var obj = {
                        "enabled": true,
                        "content" : ("" + date.getFullYear()).toBanglaNumber(),
                        "classes": "",
                        "tooltip": ""
                    };
                    return obj;
                }
            },
            beforeShowCentury: function(date){
                if (jsLangCodeForLibs == "bn") {
                    var obj = {
                        "enabled": true,
                        "content" : ("" + date.getFullYear()).toBanglaNumber(),
                        "classes": "",
                        "tooltip": ""
                    };
                    return obj;
                }
            }
        });

        $("#dateSendToOfficer input").on("change", function() {
            populateSendForOpinionSummerNote($(this).val(), 'SendToOfficer', serviceNameGlobal);
        });

        $("#dateSendToSubOfficeGRO input").on("change", function() {
            populateSendForOpinionSummerNote($(this).val(), 'SendToSubOfficeGRO', serviceNameGlobal);
        });

        //document.getElementById("sendingReport").innerHTML
        var initial = "<p style='text-align: center'><strong>তদন্ত প্রতিবেদন</strong></p><p>----------------------------------------------------------------------------------------</p><p>--------------------------------------------</p><p>--------------------------------------------</p><p><strong>&nbsp;</strong></p><p><strong>&nbsp;</strong></p><p><strong>তদন্ত কমিটির সদস্যঃ&nbsp;</strong></p><p><strong>&nbsp;</strong></p><p><strong>ঘটনার বিব্রণঃ&nbsp;</strong></p><p>----------------------------------------------------------------------------------------</p><p>--------------------------------------------</p><p>--------------------------------------------</p><p>--------------------------------------------</p><p><strong>বিবেচ্য বিষয়ঃ&nbsp;</strong></p><p><strong>&nbsp;</strong></p><p><strong>&nbsp;পর্যবেক্ষন ও &nbsp; মতামতঃ</strong></p><p>--------------------------------------------</p><p>--------------------------------------------</p><p>--------------------------------------------</p><p>--------------------------------------------</p><p>--------------------------------------------</p><p>--------------------------------------------</p><p><strong>&nbsp;</strong></p><p><strong>সুপারিশঃ</strong></p><p><strong>১।</strong></p><p><strong>২।</strong></p><p><strong>৩। &nbsp;</strong></p>"

        $('#sendingReport').summernote({
            height: 450,
            width: 350
        });

        var anotherOfficeNote = $("#sendToAnotherOfficeNote").val();
        $('#anotherOfficeNote').summernote('code', anotherOfficeNote);

        var serviceGuidanceNote = "নির্ধারিত তারিখের মধ্যে সেবা প্রদান করে অবহিত করুন";
        $('#guidanceForServiceNote').summernote('code', serviceGuidanceNote);
        $('#sendingReport').summernote('code', initial);
        $('.summernote').summernote({
            height: 450,
            width: 350
        });

        toastr.options = {
            closeButton: $('#closeButton').prop('checked'),
            debug: $('#debugInfo').prop('checked'),
            positionClass: $('#positionGroup input:checked').val() || 'toast-top-center',
            onclick: null
        };

        $("#btnTimeline").click(function(e) {
            e.preventDefault();
            $("#divTimeline").toggle();
        });

        $(".existingFiles").click(function(e){
            e.preventDefault();
            $(this).parent().next().toggle();
            if ($(this).parent().next().is(':visible')) {
                var currentInstance = $(this);
                var id = (document.location.href).split("=")[1];
                $.ajax({
                    type: "GET",
                    url: "/api/grievance/existingfiles/" + id,
                    success: function(response){
                        if (response.length > 0) {
                            var checkBoxListContent = '';
                            $(response).each(function(index, row){
                                checkBoxListContent += '<label><input type="checkbox" value="' + row.id + '" class="icheck chkExistingFile_' + row.id + '"> ' + row.name + ' </label>';
                            });
                            $(currentInstance).parent().next().find(".icheck-list").html(checkBoxListContent);
                            //$(currentInstance).parent().next().removeClass('hide');
                            initIChecks();
                        } else {
                            $(currentInstance).parent().next().find(".icheck-list").html('<label> কোন সংযুক্তি পাওয়া যায়নি </label>');
                            //$(currentInstance).parent().next().removeClass('hide');
                        }
                    }
                });
            }
        });

        $("#fileViewerModal").on("hidden.bs.modal", function(){
            $(this).find(".modal-body").html("");
        });

        $("#printGrievanceDetails").on("click", function () {
            var mywindow = window.open('', 'PRINT', "width="+screen.availWidth+",height="+screen.availHeight);
            mywindow.document.write('<html><head>');
            mywindow.document.write('<style> @media screen { body{ font-family: "kalpurushregular" !important;font-size: 8px; box-sizing: border-box; width:98%; height: 98%; margin: 0px; padding: 0px; font-weight: 300; }h1, h2, h3, h4, h5, h6 {font-family: "kalpurushregular" !important;font-size: 8px;}.text-center {text-align: center;} input{ font-size: 8px !important; } .double-line{ width:100%; height: 4.6%; } .single-line{ box-sizing: border-box; width:100%; height: 2.3%; padding-bottom: .2%; } .double-line input{ height: 100%; width: 75%; box-sizing: border-box; float:left; border: thin solid black; padding-left:1%; } .single-line input{ height: 100%; width: 75%; display: inline-block; box-sizing: border-box; float: left; border: thin solid black ; border-width: thin; padding-left:1%; } .input{ height: 100%; width: 63%; display: inline-block; box-sizing: border-box; float: left; } .fee-input{ height: 20%; width: 16%; display: inline-block; float: left; box-sizing: border-box; } .label{ box-sizing: border-box; width: 23%; height: 100%; vertical-align: top; display: inline-block; float: left; margin-right: 2%; padding: .7%; } .label-independent{ box-sizing: border-box; width: 100%; height: 1%; vertical-align: top; display: inline-block; float: left; margin-right: 0%; } .element{ box-sizing: border-box; width: 60% } .left_top{ height: 50%; text-align: left; } .right_bottom{ height: 50%; text-align: right; } .left_bottom{ height: 50%; text-align: left; } table, th, td, tr { font-family: "kalpurushregular"; box-sizing: border-box; border: .5px solid black; border-collapse: collapse; padding: 1px; } .table{ font-family: "kalpurushregular" width: 100%; height: 15%; font-size: 8.6px; } .photo{ box-sizing: border-box; width:100%; height: 13%; } .photo-tabel{ width: 45%; height: 100%; font-size: 8.6px; } .page-break{ page-break-after: always; } .body-border{ border: 1px solid black; padding: 2%;; } .attachements{ width:100%; height: 8%; } td img{ display: block; width:100%; } } @media print{ body{ font-family: "kalpurushregular" !important;font-size: 8px; box-sizing: border-box; width:98%; height: 98%; margin: 0px; padding: 0px; font-weight: 300; }h1, h2, h3, h4, h5, h6 {font-family: "kalpurushregular" !important;font-size: 8px;}.text-center {text-align: center;} input{ font-size: 8px !important; } .double-line{ width:100%; height: 4.6%; } .single-line{ box-sizing: border-box; width:100%; height: 2.3%; padding-bottom: .2%; } .double-line input{ height: 100%; width: 75%; box-sizing: border-box; float:left; border: thin solid black; padding-left:1%; } .single-line input{ height: 100%; width: 75%; display: inline-block; box-sizing: border-box; float: left; border: thin solid black ; border-width: thin; padding-left:1%; } .input{ height: 100%; width: 63%; display: inline-block; box-sizing: border-box; float: left; } .fee-input{ height: 20%; width: 16%; display: inline-block; float: left; box-sizing: border-box; } .label{ box-sizing: border-box; width: 23%; height: 100%; vertical-align: top; display: inline-block; float: left; margin-right: 2%; padding: .7%; } .label-independent{ box-sizing: border-box; width: 100%; height: 1%; vertical-align: top; display: inline-block; float: left; margin-right: 0%; } .element{ box-sizing: border-box; width: 60% } .left_top{ height: 50%; text-align: left; } .right_bottom{ height: 50%; text-align: right; } .left_bottom{ height: 50%; text-align: left; } table, th, td, tr { font-family: "kalpurushregular"; box-sizing: border-box; border: .5px solid black; border-collapse: collapse; padding: 1px; } .table{ font-family: "kalpurushregular" width: 100%; height: 15%; font-size: 8.6px; } .photo{ box-sizing: border-box; width:100%; height: 13%; } .photo-tabel{ width: 45%; height: 100%; font-size: 8.6px; } .page-break{ page-break-after: always; } .body-border{ border: 1px solid black; padding: 2%;; } .attachements{ width:100%; height: 8%; } td img{ display: block; width:100%; } } </style>');
            mywindow.document.write('</head><body >');
            mywindow.document.write('<h1 class="text-center">' + document.title  + '</h1>');
            mywindow.document.write($("#printableArea").clone().find('.remove-on-print').remove().end().html());
            mywindow.document.write('</body></html>');

            mywindow.print();
            mywindow.close();

            /*$("#complaintDetails .printable-area").clone()
                .css("padding-top", "50px")
                .find("a.btn-print")
                .remove()
                .end()
                .find("a")
                .removeAttr("href")
                .end()
                .printThis({
                    importStyle: true,
                    formValues: false
                });*/
        });

        $("#printGrievanceHistory").on("click", function () {
            var mywindow = window.open('', 'PRINT', "width="+screen.availWidth+",height="+screen.availHeight);
            mywindow.document.write('<html><head>');
            mywindow.document.write('<style> @media screen { body{ font-family: "kalpurushregular" !important;font-size: 8px; box-sizing: border-box; width:98%; height: 98%; margin: 0px; padding: 0px; font-weight: 300; }h1, h2, h3, h4, h5, h6 {font-family: "kalpurushregular" !important;font-size: 8px;}.text-center {text-align: center;} input{ font-size: 8px !important; } .double-line{ width:100%; height: 4.6%; } .single-line{ box-sizing: border-box; width:100%; height: 2.3%; padding-bottom: .2%; } .double-line input{ height: 100%; width: 75%; box-sizing: border-box; float:left; border: thin solid black; padding-left:1%; } .single-line input{ height: 100%; width: 75%; display: inline-block; box-sizing: border-box; float: left; border: thin solid black ; border-width: thin; padding-left:1%; } .input{ height: 100%; width: 63%; display: inline-block; box-sizing: border-box; float: left; } .fee-input{ height: 20%; width: 16%; display: inline-block; float: left; box-sizing: border-box; } .label{ box-sizing: border-box; width: 23%; height: 100%; vertical-align: top; display: inline-block; float: left; margin-right: 2%; padding: .7%; } .label-independent{ box-sizing: border-box; width: 100%; height: 1%; vertical-align: top; display: inline-block; float: left; margin-right: 0%; } .element{ box-sizing: border-box; width: 60% } .left_top{ height: 50%; text-align: left; } .right_bottom{ height: 50%; text-align: right; } .left_bottom{ height: 50%; text-align: left; } table, th, td, tr { font-family: "kalpurushregular"; box-sizing: border-box; border: .5px solid black; border-collapse: collapse; padding: 1px; } .table{ font-family: "kalpurushregular" width: 100%; height: 15%; font-size: 8.6px; } .photo{ box-sizing: border-box; width:100%; height: 13%; } .photo-tabel{ width: 45%; height: 100%; font-size: 8.6px; } .page-break{ page-break-after: always; } .body-border{ border: 1px solid black; padding: 2%;; } .attachements{ width:100%; height: 8%; } td img{ display: block; width:100%; } } @media print{ body{ font-family: "kalpurushregular" !important;font-size: 8px; box-sizing: border-box; width:98%; height: 98%; margin: 0px; padding: 0px; font-weight: 300; }h1, h2, h3, h4, h5, h6 {font-family: "kalpurushregular" !important;font-size: 8px;}.text-center {text-align: center;} input{ font-size: 8px !important; } .double-line{ width:100%; height: 4.6%; } .single-line{ box-sizing: border-box; width:100%; height: 2.3%; padding-bottom: .2%; } .double-line input{ height: 100%; width: 75%; box-sizing: border-box; float:left; border: thin solid black; padding-left:1%; } .single-line input{ height: 100%; width: 75%; display: inline-block; box-sizing: border-box; float: left; border: thin solid black ; border-width: thin; padding-left:1%; } .input{ height: 100%; width: 63%; display: inline-block; box-sizing: border-box; float: left; } .fee-input{ height: 20%; width: 16%; display: inline-block; float: left; box-sizing: border-box; } .label{ box-sizing: border-box; width: 23%; height: 100%; vertical-align: top; display: inline-block; float: left; margin-right: 2%; padding: .7%; } .label-independent{ box-sizing: border-box; width: 100%; height: 1%; vertical-align: top; display: inline-block; float: left; margin-right: 0%; } .element{ box-sizing: border-box; width: 60% } .left_top{ height: 50%; text-align: left; } .right_bottom{ height: 50%; text-align: right; } .left_bottom{ height: 50%; text-align: left; } table, th, td, tr { font-family: "kalpurushregular"; box-sizing: border-box; border: .5px solid black; border-collapse: collapse; padding: 1px; } .table{ font-family: "kalpurushregular" width: 100%; height: 15%; font-size: 8.6px; } .photo{ box-sizing: border-box; width:100%; height: 13%; } .photo-tabel{ width: 45%; height: 100%; font-size: 8.6px; } .page-break{ page-break-after: always; } .body-border{ border: 1px solid black; padding: 2%;; } .attachements{ width:100%; height: 8%; } td img{ display: block; width:100%; } } </style>');
            mywindow.document.write('</head><body >');
            mywindow.document.write('<h1 class="text-center">' + document.title  + '</h1>');
            mywindow.document.write($("#printable-area").clone().find('.remove-on-print').remove().end().html());
            mywindow.document.write('</body></html>');

            mywindow.print();
            mywindow.close();
            /*$("#complaintMovementHistory .printable-area").clone()
                .css("padding-top", "50px")
                .find("a.btn-print")
                .remove()
                .end()
                .printThis({
                    importStyle: true,
                    formValues: false
                });*/
        });

        var a = "yy-mm-dd ";
        var b = "hh-mm-ss";
        var c = a.concat(b);
        $("#hearingDate").datetimepicker({format: 'yyyy-mm-dd hh:ii'});
    });

    function initIChecks() {
        $('.icheck').each(function() {
            var checkboxClass = $(this).attr('data-checkbox') ? $(this).attr('data-checkbox') : 'icheckbox_minimal-green';
            var radioClass = $(this).attr('data-radio') ? $(this).attr('data-radio') : 'icheckbox_minimal-green';

            if (checkboxClass.indexOf('_line') > -1 || radioClass.indexOf('_line') > -1) {
                $(this).iCheck({
                    checkboxClass: checkboxClass,
                    radioClass: radioClass,
                    insert: '<div class="icheck_line-icon"></div>' + $(this).attr("data-label")
                });
            } else {
                $(this).iCheck({
                    checkboxClass: checkboxClass,
                    radioClass: radioClass
                });
            }
        });
    }


     function previewFile(clickedLink, e) {
        if (e) {
            e.preventDefault();
        }
        var domainURL = "http://" + document.location.host;
        if ($(clickedLink).attr("href").startsWith("http://")) {
            domainURL = "";
        }
        if ($(clickedLink).hasClass("media-embed")) {
            var isEmbed = false;
            if($(clickedLink).attr("data-asset") == "true"){
                isEmbed = true;
            }
            if(isEmbed){
                $("#fileViewerModal .modal-body").html('<embed src="' + domainURL + $(clickedLink).attr("href") + '" style="width:100%; height:800px;"></embed>');
            } else {
                $("#fileViewerModal .modal-body").html('<iframe src="http://docs.google.com/gview?embedded=true&url=' + domainURL + $(clickedLink).attr("href") + '" style="width:100%; height:800px;" frameborder="0"></iframe>');
            }
            $("#fileViewerModal").modal("show");
            return false;
        } else if ($(clickedLink).hasClass("media-audio")) {
            $("#fileViewerModal .modal-body").html('<audio style="width:100%;" controls><source src="' + $(clickedLink).attr("href") + '" type="audio/mpeg">Your browser does not support the audio element.</audio>');
            $("#fileViewerModal").modal("show");
            return false;
        } else if ($(clickedLink).hasClass("media-video")) {
            $("#fileViewerModal .modal-body").html('<video style="width:100%;height:480px;" controls><source src="' + $(clickedLink).attr("href") + '" type="video/mp4">Your browser does not support the video tag.</video>');
            $("#fileViewerModal").modal("show");
            return false;
        } else {
            return true;
        }
    }

    function populateAendToAppealOfficerSummerNote(service, officeName){
        if(service == null){
            service = "<সেবার নাম>";
        }
        var note = "<p>প্রাপ্ত " + service+" সেবা-সংক্রান্ত অভিযোগটি "+ officeName+" এর অভিযোগ নিষ্পত্তি কর্মকর্তা/অফিস প্রধান সংশ্লিষ্ট হওয়ায় প্রেরণ করা হলো</p>";
        $('#sentToAppealOfficerNote').summernote('code', note);
    }

    function goPreviousPage() {
        var previousPage = document.referrer;
        var nextPage = null;
        if (previousPage.includes("viewGrievances.do") || previousPage.includes("viewMyGrievances.do") || previousPage.includes("dashboardMobile.do")|| previousPage.includes("dashboard.do") ){
            nextPage = "/" + previousPage.split("/")[3];
        } else {
            nextPage = "/viewGrievances.do";
        }
        window.location.href = nextPage;
    }

</script>
