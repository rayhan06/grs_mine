<!DOCTYPE html xmlns:th="http://www.thymeleaf.org" >
<html xmlns:th="http://www.thymeleaf.org">

<div th:fragment="viewGrievancesIncludeStyle" th:remove="tag"></div>

<div class="page-content" th:fragment="viewGrievances">


    <div class="portlet light portlet-fit full-height-content full-height-content-scrollable bordered" th:fragment="dashboardGroPortlet" >
        <div class="portlet-title">
            <div class="caption">
                <i class="icon-bubbles "></i>
                <span class="caption-subject bold uppercase" th:text="#{manage.x(#{grievance})}"></span>
                <span class="caption-helper">&nbsp;</span>
            </div>
            <div class="actions">
                <button class="btn btn-circle btn-danger btn-sm" data-toggle="collapse"
                        data-target="#search-bar" th:text="#{search}"><i class="icon-magnifier"></i>

                </button>
                <a class="btn btn-circle btn-icon-only btn-default fullscreen" href="javascript:;"
                   data-original-title="" title=""> </a>
            </div>
        </div>
        <div class="portlet-body form">
            <div class="search-page search-content-2">
                <div class="search-bar collapse" id="search-bar">
                    <div class="row">
                        <div class="col-md-12">
                            <form class="form-horizontal" id="frmSearch" role="form">
                                <div class="form-body">
                                    <div class="input-group clearfix">
                                        <input class="form-control" th:placeholder="#{type.to.search}"
                                               id="searchFor" type="text">
                                        <input type="hidden" id="criteria"/>
                                        <span class="input-group-btn">
																		<button class="btn blue uppercase bold"
                                                                                id="btnSearch"
                                                                                type="button" th:text="#{search}"></button>
																		<button class="btn green uppercase bold"
                                                                                id="btnClearSearch" type="button"
                                                                                th:title="#{reset}"><i
                                                                                class="icon-close"></i></button>
																	</span>
                                    </div>
                                    <div class="clearfix"></div>
                                    <label class="col-md-1 control-label">&nbsp;</label>
                                    <div class="icheck-inline">
                                        <label>
                                            <input name="sType" value="id" type="checkbox" class="icheck"
                                                   data-checkbox="icheckbox_square-grey" th:text="#{entry.num}">
                                        </label>
                                        <label>
                                            <input name="sType" value="caseNumber" type="checkbox"
                                                   class="icheck" data-checkbox="icheckbox_square-grey" th:text="#{track.num}">

                                        </label>
                                        <label>
                                            <input name="sType" value="title" type="checkbox" class="icheck"
                                                   data-checkbox="icheckbox_square-grey" th:text="#{subject}">
                                        </label>
                                        <label>
                                            <input name="sType" value="description" type="checkbox"
                                                   class="icheck" data-checkbox="icheckbox_square-grey" th:text="#{description}">
                                        </label>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div class="portlet light ">
                <div class="portlet-title tabbable-line">
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a href="#inbox" id="navInbox" data-toggle="tab"><i class="icon-arrow-down"></i> <th:block th:text="#{incoming}"></th:block> </a>
                        </li>
                        <li>
                            <a href="#sent" id="navSent" data-toggle="tab"><i class="icon-arrow-right"></i> <th:block th:text="#{outgoing}"></th:block> </a>
                        </li>
                        <li>
                            <a href="#rejected" id="navRejected" data-toggle="tab"><i class="icon-folder"></i> <th:block th:text="#{rejected}"></th:block> </a>
                        </li>
                        <li>
                            <a href="#closed" id="navClosed" data-toggle="tab"><i class="icon-folder"></i> <th:block th:text="#{closed}"></th:block> </a>
                        </li>
                    </ul>
                </div>
                <div class="portlet-body">
                    <div class="tab-content">
                        <div class="tab-pane active" id="inbox">
                            <h4 class="tabletitle"><i class="icon-arrow-down"></i> আগত তালিকা</h4>
                            <table class="table table-striped table-bordered table-hover "
                                   id="tblListView1">
                                <thead>
                                <tr>
                                    <th> <th:block th:text="#{entry.num}"></th:block> </th>
                                    <th> <th:block th:text="#{track.num}"></th:block> </th>
                                    <th> <th:block th:text="#{register.view.table.subject}"></th:block> </th>
                                    <th> <th:block th:text="#{date}"></th:block> </th>
                                    <th> <th:block th:text="#{type}"></th:block> </th>
                                    <th> <th:block th:text="#{register.view.table.status}"></th:block> </th>
                                    <th> &nbsp;</th>
                                </tr>
                                </thead>
                                <tbody>

                                </tbody>
                            </table>
                            <div class="row">
                                <div class="col-sm-5 col-md-5">
                                    <div class="dataTables_info" id="tblListView1_info" role="status"
                                         aria-live="polite">০ এর মধ্যে ০ তথ্য দেখানো হচ্ছে
                                    </div>
                                </div>
                                <div class="col-md-7 col-sm-7">
                                    <div class="dataTables_paginate paging_bootstrap_extended"
                                         id="tblListView_paginate">
                                        <div class="pagination-panel pull-right"> পৃষ্ঠা <span
                                                class="pagination-panel-total">০</span> এর
                                            <a href="javascript:;" class="btn btn-sm default prev disabled">
                                                <i class="fa fa-angle-left"></i>
                                            </a>
                                            <input class="pagination-panel-input form-control input-sm input-inline input-mini"
                                                   maxlength="5" style="text-align:center; margin: 0 5px;"
                                                   id="currentPage" value="০" type="text">
                                            <a href="javascript:;" class="btn btn-sm default next disabled">
                                                <i class="fa fa-angle-right"></i>
                                            </a>
                                            পৃষ্ঠা দেখানো হচ্ছে
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="sent">
                            <h4 class="tabletitle"><i class="icon-arrow-right"></i> প্রেরিত তালিকা</h4>
                            <table class="table table-striped table-bordered table-hover"
                                   id="tblListView2">
                                <thead>
                                <tr>
                                    <th> <th:block th:text="#{entry.num}"></th:block> </th>
                                    <th> <th:block th:text="#{track.num}"></th:block> </th>
                                    <th> <th:block th:text="#{register.view.table.subject}"></th:block> </th>
                                    <th> <th:block th:text="#{date}"></th:block> </th>
                                    <th> <th:block th:text="#{type}"></th:block> </th>
                                    <th> <th:block th:text="#{register.view.table.status}"></th:block> </th>
                                    <th> &nbsp;</th>
                                </tr>
                                </thead>
                                <tbody>

                                </tbody>
                            </table>
                            <div class="row">
                                <div class="col-sm-5 col-md-5">
                                    <div class="dataTables_info" id="tblListView2_info" role="status"
                                         aria-live="polite">০ এর মধ্যে ০ তথ্য দেখানো হচ্ছে
                                    </div>
                                </div>
                                <div class="col-md-7 col-sm-7">
                                    <div class="dataTables_paginate paging_bootstrap_extended"
                                         id="tblListView_paginate">
                                        <div class="pagination-panel pull-right"> পৃষ্ঠা <span
                                                class="pagination-panel-total">০</span> এর
                                            <a href="javascript:;" class="btn btn-sm default prev disabled">
                                                <i class="fa fa-angle-left"></i>
                                            </a>
                                            <input class="pagination-panel-input form-control input-sm input-inline input-mini"
                                                   maxlength="5" style="text-align:center; margin: 0 5px;"
                                                   id="currentPage" value="০" type="text">
                                            <a href="javascript:;" class="btn btn-sm default next disabled">
                                                <i class="fa fa-angle-right"></i>
                                            </a>
                                            পৃষ্ঠা দেখানো হচ্ছে
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="rejected">
                            <h4 class="tabletitle"><i class="icon-folder"></i> নথিজাত </h4>
                            <table class="table table-striped table-bordered table-hover"
                                   id="tblListView3">
                                <thead>
                                <tr>
                                    <th> <th:block th:text="#{entry.num}"></th:block> </th>
                                    <th> <th:block th:text="#{track.num}"></th:block> </th>
                                    <th> <th:block th:text="#{register.view.table.subject}"></th:block> </th>
                                    <th> <th:block th:text="#{date}"></th:block> </th>
                                    <th> <th:block th:text="#{type}"></th:block> </th>
                                    <th> <th:block th:text="#{register.view.table.status}"></th:block> </th>
                                    <th> &nbsp;</th>
                                </tr>
                                </thead>
                                <tbody>

                                </tbody>
                            </table>
                            <div class="row">
                                <div class="col-sm-5 col-md-5">
                                    <div class="dataTables_info" id="tblListView3_info" role="status"
                                         aria-live="polite">০ এর মধ্যে ০ তথ্য দেখানো হচ্ছে
                                    </div>
                                </div>
                                <div class="col-md-7 col-sm-7">
                                    <div class="dataTables_paginate paging_bootstrap_extended"
                                         id="tblListView_paginate">
                                        <div class="pagination-panel pull-right"> পৃষ্ঠা <span
                                                class="pagination-panel-total">০</span> এর
                                            <a href="javascript:;" class="btn btn-sm default prev disabled">
                                                <i class="fa fa-angle-left"></i>
                                            </a>
                                            <input class="pagination-panel-input form-control input-sm input-inline input-mini"
                                                   maxlength="5" style="text-align:center; margin: 0 5px;"
                                                   id="currentPage" value="০" type="text">
                                            <a href="javascript:;" class="btn btn-sm default next disabled">
                                                <i class="fa fa-angle-right"></i>
                                            </a>
                                            পৃষ্ঠা দেখানো হচ্ছে
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane" id="closed">
                            <h4 class="tabletitle"><i class="icon-folder"></i> নিষ্পত্তি </h4>
                            <table class="table table-striped table-bordered table-hover"
                                   id="tblListView4">
                                <thead>
                                <tr>
                                    <th> <th:block th:text="#{entry.num}"></th:block> </th>
                                    <th> <th:block th:text="#{track.num}"></th:block> </th>
                                    <th> <th:block th:text="#{register.view.table.subject}"></th:block> </th>
                                    <th> <th:block th:text="#{date}"></th:block> </th>
                                    <th> <th:block th:text="#{type}"></th:block> </th>
                                    <th> <th:block th:text="#{register.view.table.status}"></th:block> </th>
                                    <th> &nbsp;</th>
                                </tr>
                                </thead>
                                <tbody>

                                </tbody>
                            </table>
                            <div class="row">
                                <div class="col-sm-5 col-md-5">
                                    <div class="dataTables_info" id="tblListView4_info" role="status"
                                         aria-live="polite">০ এর মধ্যে ০ তথ্য দেখানো হচ্ছে
                                    </div>
                                </div>
                                <div class="col-md-7 col-sm-7">
                                    <div class="dataTables_paginate paging_bootstrap_extended"
                                         id="tblListView_paginate">
                                        <div class="pagination-panel pull-right"> পৃষ্ঠা <span
                                                class="pagination-panel-total">০</span> এর
                                            <a href="javascript:;" class="btn btn-sm default prev disabled">
                                                <i class="fa fa-angle-left"></i>
                                            </a>
                                            <input class="pagination-panel-input form-control input-sm input-inline input-mini"
                                                   maxlength="5" style="text-align:center; margin: 0 5px;"
                                                   id="currentPage" value="০" type="text">
                                            <a href="javascript:;" class="btn btn-sm default next disabled">
                                                <i class="fa fa-angle-right"></i>
                                            </a>
                                            পৃষ্ঠা দেখানো হচ্ছে
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="ajaxProcessingModal" tabindex="-1" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <img src="assets/global/img/loading-spinner-grey.gif" alt="" class="loading">
                    <span> &nbsp;&nbsp;লোড হচ্ছে... দয়া করে অপেক্ষা করুন  </span>
                </div>
            </div>
        </div>
    </div>

</div>

<div th:fragment="viewGrievancesIncludeScript" th:remove="tag">
    <script src="assets/global/scripts/datatable.js" type="text/javascript"></script>
    <script src="assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
    <script src="assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
    <script src="assets/global/plugins/icheck/icheck.min.js" type="text/javascript"></script>
</div>

<script type="text/javascript" th:fragment="viewGrievancesScript">

var currentPage = 1;
var maxPage = 1;
var searchSize = 10;
var currentView = "inbox";

$(document).ready(function() {
    loadComplaintsList(currentPage);

    var isEnglish = languageCode == "en";
    var rowTitle = isEnglish ? "Click to view details" : "বিস্তারিত দেখতে ক্লিক করুন";

    var table1 = $('#tblListView1');
    var table2 = $('#tblListView2');
    var table3 = $('#tblListView3');
    var table4 = $('#tblListView4');

    table1.dataTable({
        "language": {
            "aria": {
                "sortAscending": ": activate to sort column ascending",
                "sortDescending": ": activate to sort column descending"
            },
            "emptyTable": "দুঃখিত, কোনো তথ্য পাওয়া যায়নি ",
            "info": "Showing _START_ to _END_ of _TOTAL_ records",
            "infoEmpty": "No records found",
            "infoFiltered": "(filtered1 from _MAX_ total records)",
            "lengthMenu": "Show _MENU_",
            "search": "ফিল্টার:",
            "zeroRecords": "No matching records found",
            "paginate": {
                "previous": "Prev",
                "next": "Next",
                "last": "Last",
                "first": "First"
            }
        },
        "bPaginate": false,
        "bFilter": true,
        "bInfo": false,
        "bAutoWidth": true,
        "columnDefs": [{
                'orderable': false,
                'targets': [6]
            },
            {
                "searchable": false,
                "targets": [0, 6]
            },
            {
                targets: [0],
                orderData: [0]
            }
        ],
        "createdRow": function( row, data, dataIndex ) {
            var currentRow = $(row);
            currentRow.attr("data-toggle", "tooltip");
            currentRow.attr("title", rowTitle);
        },
        columns: [{
                data: "id"
            },
            {
                data: "track"
            },
            {
                data: "subject"
            },
            {
                data: "date"
            },
            {
                data: "typeBangla"
            },
            {
                data: "statusBangla"
            },
            {
                data: function(row) {
                    return "<a href='viewPublicGrievances.do?id=" + row.id + "' class='btn btn-primary'><i class="fa fa-search"></i> বিস্তারিত</a>";
                }
            }
        ],
        "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
            if(aData.isSeen==false) {
                 $(nRow).addClass('bg-white bold');
            }
            else {
                 $(nRow).addClass('bg-grey');
            }
        },
        "order": [
            [0, "desc"]
        ]
    });

    table2.dataTable({
        "language": {
            "aria": {
                "sortAscending": ": activate to sort column ascending",
                "sortDescending": ": activate to sort column descending"
            },
            "emptyTable": "দুঃখিত, কোনো তথ্য পাওয়া যায়নি ",
            "info": "Showing _START_ to _END_ of _TOTAL_ records",
            "infoEmpty": "No records found",
            "infoFiltered": "(filtered1 from _MAX_ total records)",
            "lengthMenu": "Show _MENU_",
            "search": "ফিল্টার:",
            "zeroRecords": "No matching records found",
            "paginate": {
                "previous": "Prev",
                "next": "Next",
                "last": "Last",
                "first": "First"
            }
        },
        "bPaginate": false,
        "bFilter": true,
        "bInfo": false,
        "bAutoWidth": true,
        "columnDefs": [{
                'orderable': false,
                'targets': [6]
            },
            {
                "searchable": false,
                "targets": [0, 6]
            },
            {
                targets: [0],
                orderData: [0]
            }
        ],
        "createdRow": function( row, data, dataIndex ) {
            var currentRow = $(row);
            currentRow.attr("data-toggle", "tooltip");
            currentRow.attr("title", rowTitle);
        },
        columns: [{
                data: "id"
            },
            {
                data: "track"
            },
            {
                data: "subject"
            },
            {
                data: "date"
            },
            {
                data: "typeBangla"
            },
            {
                data: "statusBangla"
            },
            {
                data: function(row) {
                    return "<a href='viewPublicGrievances.do?id=" + row.id + "' class='btn btn-primary'><i class="fa fa-search"></i> বিস্তারিত</a>";
                }
            }
        ],
        "order": [
            [0, "desc"]
        ]
    });

    table3.dataTable({
        "language": {
            "aria": {
                "sortAscending": ": activate to sort column ascending",
                "sortDescending": ": activate to sort column descending"
            },
            "emptyTable": "দুঃখিত, কোনো তথ্য পাওয়া যায়নি ",
            "info": "Showing _START_ to _END_ of _TOTAL_ records",
            "infoEmpty": "No records found",
            "infoFiltered": "(filtered1 from _MAX_ total records)",
            "lengthMenu": "Show _MENU_",
            "search": "ফিল্টার:",
            "zeroRecords": "No matching records found",
            "paginate": {
                "previous": "Prev",
                "next": "Next",
                "last": "Last",
                "first": "First"
            }
        },
        "bPaginate": false,
        "bFilter": true,
        "bInfo": false,
        "bAutoWidth": true,
        "columnDefs": [{
                'orderable': false,
                'targets': [6]
            },
            {
                "searchable": false,
                "targets": [0, 6]
            },
            {
                targets: [0],
                orderData: [0]
            }
        ],
        "createdRow": function( row, data, dataIndex ) {
            var currentRow = $(row);
            currentRow.attr("data-toggle", "tooltip");
            currentRow.attr("title", rowTitle);
        },
        columns: [{
                data: "id"
            },
            {
                data: "track"
            },
            {
                data: "subject"
            },
            {
                data: "date"
            },
            {
                data: "typeBangla"
            },
            {
                data: "statusBangla"
            },
            {
                data: function(row) {
                    return "<a href='viewPublicGrievances.do?id=" + row.id + "' class='btn btn-primary'><i class="fa fa-search"></i> বিস্তারিত</a>";
                }
            }
        ],
        "order": [
            [0, "desc"]
        ]
    });

    table4.dataTable({
        "language": {
            "aria": {
                "sortAscending": ": activate to sort column ascending",
                "sortDescending": ": activate to sort column descending"
            },
            "emptyTable": "দুঃখিত, কোনো তথ্য পাওয়া যায়নি ",
            "info": "Showing _START_ to _END_ of _TOTAL_ records",
            "infoEmpty": "No records found",
            "infoFiltered": "(filtered1 from _MAX_ total records)",
            "lengthMenu": "Show _MENU_",
            "search": "ফিল্টার:",
            "zeroRecords": "No matching records found",
            "paginate": {
                "previous": "Prev",
                "next": "Next",
                "last": "Last",
                "first": "First"
            }
        },
        "bPaginate": false,
        "bFilter": true,
        "bInfo": false,
        "bAutoWidth": true,
        "columnDefs": [{
                'orderable': false,
                'targets': [6]
            },
            {
                "searchable": false,
                "targets": [0, 6]
            },
            {
                targets: [0],
                orderData: [0]
            }
        ],
        "createdRow": function( row, data, dataIndex ) {
            var currentRow = $(row);
            currentRow.attr("data-toggle", "tooltip");
            currentRow.attr("title", rowTitle);
        },
        columns: [{
                data: "id"
            },
            {
                data: "track"
            },
            {
                data: "subject"
            },
            {
                data: "date"
            },
            {
                data: "typeBangla"
            },
            {
                data: "statusBangla"
            },
            {
                data: function(row) {
                    return "<a href='viewPublicGrievances.do?id=" + row.id + "' class='btn btn-primary'><i class="fa fa-search"></i> বিস্তারিত</a>";
                }
            }
        ],
        "order": [
            [0, "desc"]
        ]
    });

    $(".next").click(function(e) {
        currentPage = currentPage + 1;
        $(".prev").removeClass("disabled");
        if (currentPage == maxPage) {
            $(".next").addClass("disabled");
        }
        if (currentPage > maxPage) {
            currentPage = maxPage;
        }

        /*if ($("#criteria").val().length > 0) {
            searchComplaintsList(currentPage);
        } else {
            loadComplaintsList(currentPage);
        }*/
        loadComplaintsList(currentPage);
    });

    $(".prev").click(function(e) {
        currentPage = currentPage - 1;
        $(".next").removeClass("disabled");
        if (currentPage == 1) {
            $(".prev").addClass("disabled");
        }
        if (currentPage < 1) {
            currentPage = 1;
        }
        /*if ($("#criteria").val().length > 0) {
            searchComplaintsList(currentPage);
        } else {
            loadComplaintsList(currentPage);
        }*/
        loadComplaintsList(currentPage);
    });


    $("#frmSearch").submit(function(e) {
        e.preventDefault();
        $("#btnSearch").click().trigger();
    });

    $("#btnSearch").click(function(e) {
        currentPage = 1;
        maxPage = 1;
        searchComplaintsList();
    });

    $("#btnClearSearch").click(function(e) {
        e.preventDefault();
        $("#searchFor").val("");
        currentPage = 1;
        maxPage = 1;
        $("input[name='sType']").each(function(index, node) {
            if ($(this).is(":checked")) {
                $(this).prop("checked", false);
                $(this).parent().removeClass("checked");
            }
        });
        loadComplaintsList(currentPage);
    });

    $("#currentPage").blur(function(e) {
        e.preventDefault();
        var curValue = $("#currentPage").val();
        if ($.isNumeric(curValue)) {
            if (curValue > 0 && curValue <= maxPage) {
                currentPage = curValue;
                if (currentPage == 1) {
                    $(".prev").addClass("disabled");
                } else {
                    $(".prev").removeClass("disabled");
                }
                if (currentPage == maxPage) {
                    $(".next").addClass("disabled");
                } else {
                    $(".next").removeClass("disabled");
                }
                loadComplaintsList(currentPage);
            } else {
                toastr.error("Sorry, page range out of bound");
                $("#currentPage").val(currentPage);
            }
        } else {
            toastr.error("Sorry, invalid page number");
            $("#currentPage").val(currentPage);
        }
    });

    $("#navInbox").click(function(e) {
        currentView = "inbox";
        currentPage = 1;
        loadComplaintsList(currentPage);
    });

    $("#navSent").click(function(e) {
        currentView = "outbox";
        currentPage = 1;
        loadComplaintsList(currentPage);
    });

    $("#navRejected").click(function(e) {
        currentView = "rejected";
        currentPage = 1;
        loadComplaintsList(currentPage);
    });

    $("#navClosed").click(function(e) {
        currentView = "closed";
        currentPage = 1;
        loadComplaintsList(currentPage);
    });

});

function searchComplaintsList(page) {
    var selectedCriteria = "";

    $("input[name='sType']").each(function(index, node) {
        if ($(this).is(":checked")) {
            selectedCriteria += $(this).val() + ",";
        }
    });

    if (selectedCriteria.length > 0) {
        selectedCriteria = selectedCriteria.substring(0, (selectedCriteria.length - 1));
    } else {
        toastr.error("Select at least one criteria to search");
        return false;
    }

    $("#ajaxProcessingModal").modal("show");
    $("#currentPage").val(currentPage);

    $("#criteria").val(selectedCriteria);

    $.ajax({
        url: "SearchComplaintsList.do",
        type: "post",
        data: {
            "page": (currentPage - 1),
            "searchText": $("#searchFor").val(),
            "fields": selectedCriteria,
            "size": searchSize
        },
        dataType: "json",
        success: function(response) {
            if (response == 0 || response == "" || response.content.length == 0) {
                toastr.info("No data was found in the server");
                $(".pagination-panel-total").html(0);
                $("#currentPage").val(0);
                $(".prev, .next").addClass("disabled");
                $("#ajaxProcessingModal").modal("hide");
            } else {
                var totalPages = response.totalPages;
                var totalElements = response.totalElements;
                var dataSize = response.size;
                var numberOfElements = response.numberOfElements;
                var number = response.number;
                var sort = response.sort;
                var isFirst = response.isFirst;
                var isLast = response.isLast;
                $("#tblListView1_info").html(totalElements + " এর মধ্যে " + (number * dataSize + 1) + "-" + (number * dataSize + numberOfElements) + " এর  তথ্য দেখানো হচ্ছে");
                $(".pagination-panel-total").html(totalPages);
                maxPage = totalPages;
                if (maxPage == 1) {
                    $(".prev, .next").addClass("disabled");
                }
                if (currentPage == 1){
                    $(".prev").addClass("disabled");
                }
                if (maxPage > 1 && maxPage!=currentPage){
                    $(".next").removeClass("disabled");
                }
                $('#tblListView1').dataTable().fnClearTable();
                $('#tblListView1').dataTable().fnAddData(response.content);
                $('#tblListView1').find("[data-toggle='tooltip']").tooltip();
                $("#ajaxProcessingModal").modal("hide");
            }
        }
    });
}

function loadComplaintsList(page) {
    $("#ajaxProcessingModal").modal("show");
    $("#currentPage").val(currentPage);
    $.ajax({
        url: "/api/grievance/" + currentView,
        type: "get",
        data: {
            "page": (currentPage - 1),
            "size": searchSize
        },
        dataType: "json",
        success: function(response) {
            if (response == 0 || response == "" || response.content.length == 0) {
                toastr.info("দুঃখিত, কোনো তথ্য পাওয়া যায়নি ");
                $(".pagination-panel-total").html(0);
                $("#currentPage").val(0);
                $(".prev, .next").addClass("disabled");
                $("#ajaxProcessingModal").modal("hide");
            } else {
                var totalPages = response.totalPages;
                var totalElements = response.totalElements;
                var dataSize = response.size;
                var numberOfElements = response.numberOfElements;
                var number = response.number;
                var sort = response.sort;
                var isFirst = response.isFirst;
                var isLast = response.isLast;

                $(".pagination-panel-total").html(totalPages);
                maxPage = totalPages;
                if (maxPage == 1) {
                    $(".prev, .next").addClass("disabled");
                }
                if (currentPage == 1){
                    $(".prev").addClass("disabled");
                }
                if (maxPage > 1 && maxPage!=currentPage){
                    $(".next").removeClass("disabled");
                }
                if (currentView == "inbox") {
                    $("#tblListView1_info").html(totalElements + " এর মধ্যে " + (number * dataSize + 1) + "-" + (number * dataSize + numberOfElements) + " এর  তথ্য দেখানো হচ্ছে");
                    $('#tblListView1').dataTable().fnClearTable();
                    $('#tblListView1').dataTable().fnAddData(response.content);
                    $('#tblListView1').find("[data-toggle='tooltip']").tooltip();
                } else if (currentView == "outbox") {
                    $("#tblListView2_info").html(totalElements + " এর মধ্যে " + (number * dataSize + 1) + "-" + (number * dataSize + numberOfElements) + " এর  তথ্য দেখানো হচ্ছে");
                    $('#tblListView2').dataTable().fnClearTable();
                    $('#tblListView2').dataTable().fnAddData(response.content);
                    $('#tblListView2').find("[data-toggle='tooltip']").tooltip();
                } else if (currentView == "rejected") {
                    $("#tblListView3_info").html(totalElements + " এর মধ্যে " + (number * dataSize + 1) + "-" + (number * dataSize + numberOfElements) + " এর  তথ্য দেখানো হচ্ছে");
                    $('#tblListView3').dataTable().fnClearTable();
                    $('#tblListView3').dataTable().fnAddData(response.content);
                    $('#tblListView3').find("[data-toggle='tooltip']").tooltip();
                }
                else if (currentView == "closed") {
                    $("#tblListView4_info").html(totalElements + " এর মধ্যে " + (number * dataSize + 1) + "-" + (number * dataSize + numberOfElements) + " এর  তথ্য দেখানো হচ্ছে");
                    $('#tblListView4').dataTable().fnClearTable();
                    $('#tblListView4').dataTable().fnAddData(response.content);
                    $('#tblListView4').find("[data-toggle='tooltip']").tooltip();
                }
                $("#ajaxProcessingModal").modal("hide");
            }
        }
    });
}


</script>
