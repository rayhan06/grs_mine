<!DOCTYPE html>
<!--[if IE 8]>
<html lang="en" class="ie8 no-js" xmlns:th="http://www.thymeleaf.org"> <![endif]-->
<!--[if IE 9]>
<html lang="en" class="ie9 no-js" xmlns:th="http://www.thymeleaf.org"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<!--<![endif]-->

<head>
    <meta charset="utf-8" />
    <title th:text="#{grs}">&nbsp;</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <meta content="Welcome to the online platform of Central Grievance Remedies of the Government of the People's Republic of Bangladesh. You can report your dissatisfaction or opinion about the government service and the promised service of the underwriters/agencies, service delivery methods and the quality of services or products through this website. After submitting the complaint, the latest status of complaint remedies will be communicated through SMS and e-mail. You can also know about update information by logging in. However, if you file a complaint as anonymity, you will not get any further information about the complaint" name="description" />
    <meta content="" name="author" />
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css" />
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <link href="/assets/global/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/select2/css/select2-bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/global/plugins/bootstrap-toastr/toastr.min.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN THEME GLOBAL STYLES -->
    <link href="/assets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
    <link href="/assets/global/css/plugins.min.css" rel="stylesheet" type="text/css" />
    <link href="/assets/layouts/layout3/css/custom.css" rel="stylesheet" type="text/css" />
    <!-- END THEME GLOBAL STYLES -->
    <!-- BEGIN PAGE LEVEL STYLES -->
    <link href="/assets/pages/css/login.min.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL STYLES -->
    <!-- BEGIN THEME LAYOUT STYLES -->
    <!-- END THEME LAYOUT STYLES -->
    <link rel="shortcut icon" href="favicon.ico" />
</head>
<!-- END HEAD -->

<body class=" login">
<div class="page-wrapper">
    <div class="page-wrapper-row full-height">
        <div class="page-wrapper-middle">
            <div class="page-container">
                <div class="page-content-wrapper">
                    <div class="page-body">
                        <div class="container">
                            <div class="top-strip">
                                &nbsp;
                            </div>
                            <!-- BEGIN LOGO -->
                            <div class="logo">
                                <a href="/">
                                    <img src="/assets/layouts/layout3/img/GRS-Logo-Login.png" alt=""/>
                                </a>
                            </div>
                            <!-- END LOGO -->
                            <!-- BEGIN LOGIN -->
                            <div class="content">
                                <!-- BEGIN LOGIN FORM -->
                                <div id="warnCitizen" class="alert alert-warning fade in hide"></div>
                                <form id="myForm" th:if="${#strings.isEmpty(redirectUrl)}" class="login-form" th:action="@{/login(a=${valueOfA})}"method="post" enctype="application/x-www-form-urlencoded">
                                    <h3 class="form-title font-green" th:text="${lang == 'en' ? formTitleText.nameEnglish : formTitleText.nameBangla}"></h3>
                                    <div class="alert alert-danger display-hide">
                                        <button class="close" data-close="alert"></button>
                                        <span th:text="#{enter.username.password}"> </span>
                                    </div>

                                    <div th:if="${param.disabled}" class="alert alert-danger">
                                        <button class="close" data-close="alert"></button>
                                        <span th.text="#{account.blocked.or.unconfirmed}"></span>
                                    </div>

                                    <div th:if="${param.error}" class="alert alert-danger">
                                        <button class="close" data-close="alert"></button>
                                        <span th:text="#{wrong.username.password}"> </span>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label visible-ie8 visible-ie9" th:text="${lang == 'en' ? usernameFieldText.nameEnglish : usernameFieldText.nameBangla}"></label>
                                        <div class="input-icon">
                                            <i th:class="${valueOfA == '0' ? 'icon-screen-smartphone' : 'icon-user'}"></i>
                                            <input th:value="${phoneNumber}" class="form-control form-control-solid placeholder-no-fix" type="text" autocomplete="nope" name="username" th:placeholder="${lang == 'en' ? usernameFieldText.nameEnglish : usernameFieldText.nameBangla}" onblur="javascript:populateFullId();" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label visible-ie8 visible-ie9" th:text="${lang == 'en' ? passwordFieldText.nameEnglish : passwordFieldText.nameBangla}"></label>
                                        <div class="input-icon password">
                                            <i class="icon-lock"></i>
                                            <input class="form-control form-control-solid placeholder-no-fix" type="password" autocomplete="nope" name="password" th:id="${lang == 'en' ? 'passwordEng' : 'passwordBng'}" th:placeholder="${lang == 'en' ? (passwordFieldText.nameEnglish) : passwordFieldText.nameBangla}" />
                                            <span class="glyphicon glyphicon-eye-open" th:id="${lang == 'en' ? 'EyeForEng' : 'EyeForBng'}" style="position: absolute; top: 15px; left: 310px; cursor: pointer; display: none;"></span>
                                        </div>
                                    </div>
                                    <div class="form-actions">
                                        <button type="submit" class="btn green-jungle form-control" id="btnSubmit" th:utext="#{login}"></button>
                                        <br/>
                                        <a href="/register.do" id="register-btn" class="uppercase" th:if="${valueOfA=='0'}" th:text="#{new.x(#{account})}"></a>
                                        <span th:if="${valueOfA=='0'}" th:remove="tag"> | </span>
                                        <a href="javascript:;" id="forget-password" class="forget-password" th:text="${lang == 'en' ? 'Retrieve Pin Code' : 'পিনকোড পুনরুদ্ধার'}"></a>
                                    </div>
                                </form>
                                <form th:if="${#strings.isEmpty(redirectUrl)==false}" class="login-form" th:action="@{/login(a=${valueOfA},redirectUrl=${redirectUrl})}" method="post" enctype="application/x-www-form-urlencoded">
                                    <h3 class="form-title font-green" th:text="${lang == 'en' ? formTitleText.nameEnglish : formTitleText.nameBangla}"></h3>
                                    <div class="alert alert-danger display-hide">
                                        <button class="close" data-close="alert"></button>
                                        <span th:text="#{enter.username.password}"> </span>
                                    </div>

                                    <div th:if="${param.disabled}" class="alert alert-danger">
                                        <button class="close" data-close="alert"></button>
                                        <span th.text="#{account.blocked.or.unconfirmed}"></span>
                                    </div>

                                    <div th:if="${param.error}" class="alert alert-danger">
                                        <button class="close" data-close="alert"></button>
                                        <span th:text="#{wrong.username.password}"> </span>
                                    </div>
                                    <div class="form-group">
                                        <!--ie8, ie9 does not support html5 placeholder, so we just show field title for that-->
                                        <label class="control-label visible-ie8 visible-ie9" th:text="${lang == 'en' ? usernameFieldText.nameEnglish : usernameFieldText.nameBangla}"></label>
                                        <div class="input-icon">
                                            <i th:class="${valueOfA == '0' ? 'icon-screen-smartphone' : 'icon-user'}" th:if="${valueOfA=='1'}"></i>
                                            <input th:value="${phoneNumber}" class="form-control form-control-solid placeholder-no-fix" type="text" autocomplete="nope" name="username" th:placeholder="${lang == 'en' ? usernameFieldText.nameEnglish : usernameFieldText.nameBangla}" onblur="javascript:populateFullId();" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label visible-ie8 visible-ie9" th:text="${lang == 'en' ? passwordFieldText.nameEnglish : passwordFieldText.nameBangla}"></label>
                                        <div class="input-icon">
                                            <i class="icon-lock"></i>
                                            <input class="form-control form-control-solid placeholder-no-fix" type="password" autocomplete="nope" name="password" th:id="${lang == 'en' ? 'passwordEngRedirected' : 'passwordBngRedirected'}"  th:placeholder="${lang == 'en' ? passwordFieldText.nameEnglish : passwordFieldText.nameBangla}"/>
                                            <span class="glyphicon glyphicon-eye-open" th:id="${lang == 'en' ? 'EyeForEngRedirected' : 'EyeForBngRedirected'}" style="position: absolute; top: 15px; left: 310px; cursor: pointer; display: none;"></span>
                                        </div>
                                    </div>
                                    <div class="form-actions">
                                        <button type="submit" class="btn green-jungle uppercase" th:utext="#{login}"></button>
                                        <br/>
                                        <a href="/register.do" id="register-btn" class="uppercase" th:if="${valueOfA=='0'}" th:text="#{new.x(#{account})}"></a>
                                        <span th:if="${valueOfA=='0'}" th:remove="tag"> | </span>
                                        <a href="javascript:;" id="forget-password" class="forget-password" th:text="${lang == 'en' ? 'Retrieve Pin Code' : 'পিনকোড পুনরুদ্ধার'}"></a>
                                    </div>
                                </form>
                                <!-- END LOGIN FORM -->
                                <!-- BEGIN FORGOT PASSWORD FORM -->
                                <form class="forget-form" action="#">
                                    <p th:text="${lang == 'en' ? ('To reset your ' + passwordFieldText.nameEnglish + ', please enter your ' + usernameFieldText.nameEnglish) : (passwordFieldText.nameBangla + ' রিসেট করতে নিচে আপনার ' + usernameFieldText.nameBangla + 'টি দিন')}"></p>
                                    <div class="form-group">
                                        <div class="input-icon">
                                            <i th:class="${valueOfA == '0' ? 'icon-screen-smartphone' : 'icon-user'}"></i>
                                            <input th:value="${phoneNumber}" class="form-control placeholder-no-fix" type="text" autocomplete="nope" th:placeholder="${lang == 'en' ? usernameFieldText.nameEnglish : usernameFieldText.nameBangla}" name="mobileNumber" />
                                        </div>
                                    </div>
                                    <div class="form-actions">
                                        <button type="button" id="back-btn" class="btn green btn-outline" th:text="#{page.previous.page.text}"></button>
                                        <button type="button" onclick="resetCitizenPinCode();" class="btn btn-success uppercase pull-right" th:text="#{page.submit.text}"></button>
                                    </div>
                                </form>
                                <!-- END FORGOT PASSWORD FORM -->
                            </div>
                            <div class="copyright hide" th:text="#{copyright}"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="page-wrapper-row">
        <div class="page-wrapper-bottom">
            <div class="page-prefooter">
                <div class="container">
                    <div class="footer-reve-logo">
                        <h4 th:text="#{technical.cooperation}"></h4>
                        <a href="http://www.revesoft.com/" target="_blank">
                            <img src="/assets/layouts/layout3/img/REVE-logo.png" height="20" style="margin: 5px; height: 20px;" />
                        </a>
                    </div>
                    <div class="footer-govt-logo">
                        <h4 th:text="#{index.footer.plan.implementation}"></h4>
                        <ul class="footer_logos">
                            <li>
                                <a href="http://a2i.pmo.gov.bd/" target="_blank">
                                    <img src="/assets/global/img/a2i.png" height="30">
                                </a>
                            </li>
                            <li>
                                <a href="http://cabinet.gov.bd/" target="_blank">
                                    <img src="/assets/global/img/bd_gov.png" height="30">
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!--[if lt IE 9]>
<script src="/assets/global/plugins/respond.min.js"></script>
<script src="/assets/global/plugins/excanvas.min.js"></script>
<script src="/assets/global/plugins/ie8.fix.min.js"></script>
<![endif]-->
<!-- BEGIN CORE PLUGINS -->
<script src="/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/assets/global/plugins/js.cookie.min.js" type="text/javascript"></script>
<script src="/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="/assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<script src="/assets/global/plugins/bootstrap-toastr/toastr.min.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="/assets/global/plugins/jquery-validation/js/jquery.validate.min.js" type="text/javascript"></script>
<script src="/assets/global/plugins/jquery-validation/js/additional-methods.min.js" type="text/javascript"></script>
<script src="/assets/global/plugins/select2/js/select2.full.min.js" type="text/javascript"></script>
<script src="/assets/global/plugins/jquery.cookie.js" type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN THEME GLOBAL SCRIPTS -->
<script src="/assets/global/scripts/app.min.js" type="text/javascript"></script>
<!-- END THEME GLOBAL SCRIPTS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="/assets/pages/scripts/login.min.js" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->
<!-- BEGIN THEME LAYOUT SCRIPTS -->
<!-- END THEME LAYOUT SCRIPTS -->
<script>
        function ajaxPut(url, accept, send, postData, onSuccess) {
            $.ajax({
                type: "PUT",
                url: url,
                dataType: accept,
                contentType: send,
                data: postData,
                success: onSuccess
            });
        }

        function showSuccess(msg) {
            toastr.success(msg);
        }

        function showError(msg) {
            toastr.error(msg);
        }

        function showLoading() {
            $("#ajaxProcessingModal").modal('show');
        }

        function hideLoading() {
            $("#ajaxProcessingModal").modal('hide');
        }

        function resetCitizenPinCode() {
            showLoading();
            var phoneNumber = $("input[name='mobileNumber']").val();
            ajaxPut("/api/citizen/reset/pincode/" + phoneNumber, "json", "text/plain", "", showMessageHandler);
        }

        function showMessageHandler(result) {
            hideLoading();
            if (result.success) {
                showSuccess(result.message);
                window.location.reload();
            } else {
                showError(result.message);
            }
        }

        function populateFullId() {
            var url = new URL(window.location.href);
            var c = url.searchParams.get("a");
            if (c == 1) {
                var strPaddedBy = "";
                var strEmployeeID = $("input[name='username']").val().trim();
                if (strEmployeeID.length > 2 && strEmployeeID.length < 7) {
                    if (strEmployeeID.startsWith("1")) {
                        strPaddedBy = "100000";
                    } else if (strEmployeeID.startsWith("2")) {
                        strPaddedBy = "200000";
                    } else {
                        //others
                    }

                    if (strEmployeeID.startsWith("1") || strEmployeeID.startsWith("2")) {
                        strEmployeeID = strEmployeeID.substr(1, (strEmployeeID.length-1));
                        if (strEmployeeID.length == 6) {
                            strEmployeeID = strPaddedBy + strEmployeeID;
                        } else if (strEmployeeID.length == 5) {
                            strEmployeeID = strPaddedBy + "0" + strEmployeeID;
                        } else if (strEmployeeID.length == 4) {
                            strEmployeeID = strPaddedBy + "00" + strEmployeeID;
                        } else if (strEmployeeID.length == 3) {
                            strEmployeeID = strPaddedBy + "000" + strEmployeeID;
                        } else if (strEmployeeID.length == 2) {
                            strEmployeeID = strPaddedBy + "0000" + strEmployeeID.substr(1, (strEmployeeID.length-1));
                        }
                        $("input[name='username']").val(strEmployeeID);
                    }
                }
            }
        }

        function showHidePassword(passwordId, eyeId) {
            var password = "#" + passwordId;
            var eye = "#" + eyeId;
            $(password).on("keyup",function(){
                if($(this).val()) {
                    $(eye).show();
                } else {
                    $(eye).hide();
                }
            });
            $(eye).mousedown(function(){
                $(this).removeClass("glyphicon-eye-open").addClass("glyphicon-eye-close");
                $(password).attr('type','text');
            }).mouseup(function(){
                $(this).removeClass("glyphicon-eye-close").addClass("glyphicon-eye-open");
                $(password).attr('type','password');
            }).mouseout(function(){
                $(this).removeClass("glyphicon-eye-close").addClass("glyphicon-eye-open");
                $(password).attr('type','password');
            });
        }

        function init() {
            showHidePassword("passwordBng", "EyeForBng");
            showHidePassword("passwordEng", "EyeForEng");
            showHidePassword("passwordBngRedirected", "EyeForBngRedirected");
            showHidePassword("passwordEngRedirected", "EyeForEngRedirected");
        }

        $(document).ready(function(){
            init();
            if (location.href.includes("login?a=0&redirectUrl=addPublicGrievances.do")
                || location.href.includes("login?a=0&redirectUrl=complainForOthers.do")) {} {
                var languageCode = $.cookie("lang");
                var msg = (languageCode == 'en') ? "To submit a grievance, login using your mobile number and the pin number sent to your mobile" : "আপনার মোবাইল নম্বর ও SMS এ আসা পিন নম্বর দিয়ে লগইন করে অভিযোগ দাখিল করুন" ;
                $("#warnCitizen").text(msg);
                $("#warnCitizen").removeClass('hide');
            }
        });

        // window.onload = function () {
        //
        //     document.getElementsByName('username').item(0).value = 'superman';
        //     document.getElementsByName('password').item(0).value = 'admin2';
        //
        //     // document.getElementById("myForm").submit();
        //
        // }

    </script>
</body>

</html>
